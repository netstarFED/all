popupBox.initShow=function(e){if($(".modal-backdrop").length>0){}else{popupBox.init(e);var t="m";if(typeof e.size!="undefined"){t=e.size}popupBox.show("#"+e.id,t)}};popupBox.init=function(e,t){this.btnHandlerArr=[];this.config=e;var o="";var r;if(typeof e.title=="undefined"){r=""}else{r=e.title}if(typeof e.form=="undefined"){e.form=[]}if(typeof e.btns=="undefined"){e.btns=[]}var n="";var a=[];var i=[];var l=[];var f=[];var d=[];var s=[];var p=[];var m={};var c="";var u="";var h="";var v=[];var g={};var y={};var b=[];var x=[];for(var S=0;S<e.form.length;S++){if(typeof e.form[S].length=="undefined"){h="modal-body";var P="";if(typeof e.form[S].id!="undefined"){n+=commonConfig.component(e.form[S],e.id,"modal",e.size);a.push(e.form[S]);if(e.form[S].type=="date"){var z={id:e.form[S].id,format:e.form[S].format,changeHandler:e.form[S].changeHandler};i.push(z)}if(e.form[S].type=="select"){b.push(e.form[S])}if(e.form[S].type=="tree-select"){m[e.form[S].id]=e.form[S]}if(e.form[S].type=="datetime"){l.push(e.form[S])}if(e.form[S].type=="select2"){s.push(e.form[S])}if(e.form[S].type=="typeahead"){p.push(e.form[S])}if(e.form[S].type=="upload_single"){y[e.form[S].id]=e.form[S]}if(typeof e.form[S].changeHandler!="undefined"){d.push(e.form[S])}if(e.form[S].type=="upload"){g=e.form[S];v.push(e.form[S])}else if(e.form[S].type=="table"){v.push(e.form[S])}else if(e.form[S].type=="province-select"){x.push(e.form[S])}}else{if(typeof e.form[S].html!="undefined"){n+=e.form[S].html}else if(typeof e.form[S].note!="undefined"){n+="<blockquote>"+"<p>"+e.form[S].note+"</p>"+"</blockquote>"}}}else{u="panel-form";h="panel-body";for(var B=0;B<e.form[S].length;B++){if(typeof e.form[S][B].id=="undefined"){if(typeof e.form[S][B].html!="undefined"){n+=e.form[S][B].html}else if(typeof e.form[S][B].note!="undefined"){n+="<blockquote>"+"<p>"+e.form[S][B].note+"</p>"+"</blockquote>"}else if(typeof e.form[S][B].element!="undefined"){if(e.form[S][B].element=="hr"){n+='<div class="col-xs-12 element-hr"><hr></div><div class="clearfix"></div>'}else if(e.form[S][B].element=="label"){n+='<label class="grouplable">'+e.form[S][B].label+"</label>"}else if(e.form[S][B].element=="br"){n+='<div class="col-xs-12 element-br"></div><div class="clearfix"></div>'}else if(e.form[S][B].element=="title"){n+='<div class="col-xs-12 element-title"><label>'+'<i class="fa fa-arrow-circle-down"></i> '+e.form[S][B].label+"</label></div>"}}}else{a.push(e.form[S][B]);if(e.form[S][B].type=="date"){var z={id:e.form[S][B].id,format:e.form[S][B].format,changeHandler:e.form[S][B].changeHandler};i.push(z)}if(e.form[S][B].type=="select"){b.push(e.form[S][B])}if(e.form[S][B].type=="tree-select"){m[e.form[S][B].id]=e.form[S][B]}if(e.form[S][B].type=="datetime"){l.push(e.form[S][B])}if(e.form[S][B].type=="select2"){s.push(e.form[S][B])}if(e.form[S][B].type=="typeahead"){p.push(e.form[S][B])}if(typeof e.form[S][B].changeHandler!="undefined"){d.push(e.form[S][B])}if(e.form[S][B].type=="upload_single"){y[e.form[S][B].id]=e.form[S][B]}if(e.form[S][B].type=="upload"){g=e.form[S][B];v.push(e.form[S][B])}else if(e.form[S][B].type=="table"){v.push(e.form[S][B])}else if(e.form[S][B].type=="province-select"){x.push(e.form[S][B])}n+=commonConfig.component(e.form[S][B],e.id,"form",e.size)}}}}var H="";for(var w=0;w<e.btns.length;w++){if(typeof e.btns[w].handler!="undefined"){f.push(e.btns[w])}H+=commonConfig.getBtn(e.btns[w],"modal",w);if(typeof e.btns[w].handler=="function"){this.btnHandlerArr.push(e.btns[w].handler)}else{this.btnHandlerArr.push("")}}var F=typeof e.note=="undefined"?"":'<small> <i class="fa fa-angle-double-right"></i> '+e.note+" </small>";var C="";if(r!=""){C='<div class="modal-header">'+'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'+'<h4 class="modal-title">'+r+F+"</h4>"+"</div>"}var D,k;var I=true;if(e.form.length==1){if(e.form[0].html){I=false}}if(I){D='<form class="form-horizontal" role="form" id="form-'+e.id+'" method="get" action="">';k="</form>"}else{D="";k=""}o+='<div id="'+e.id+'" class="modal fade modal-ns">'+'<div class="modal-dialog">'+'<div class="modal-content '+u+'">'+C+'<div class="'+h+'">'+D+'<div class="row row-close fillbg">'+n+"</div>"+k+"</div>"+'<div class="modal-footer">'+H+'<button type="button" class="btn btn-white" data-dismiss="modal"><i class="fa fa-ban"></i> 取消</button>'+"</div>"+"</div>"+"</div>"+"</div>";$("#placeholder-popupbox").html(o);for(var E=0;E<this.btnHandlerArr.length;E++){var T=$("#"+e.id+" .modal-footer .btn")[E];if(typeof f[E].handler=="function"){$(T).on("click",function(){var e=parseInt($(this).attr("fid"));var t=popupBox.btnHandlerArr[e];t()})}}if(a.length>0){formPlane.validateForm(e.id,a,"dialog")}$("#form-"+e.id).on("keydown",function(e){if(e.keyCode==13){return false}});if(v.length>0){popupBox.initTable(v)}if(!$.isEmptyObject(y)){formPlane.componentUpload(e.id,y)}if(!$.isEmptyObject(m)){treeUI.componentSelectPlane(e.id,m)}if(!$.isEmptyObject(g)){var A=1;var M=0;$example_dropzone_filetable=$("#"+g.id);formPlane.dropzoneGetFile={};formPlane.dropzoneGetFile["advancedDropzone"]={};formPlane.dropzoneFile={};formPlane.dropzoneFile["advancedDropzone"]={};var O=g.isAllowFiles?Number(g.isAllowFiles):1;example_dropzone=$("#advancedDropzone").dropzone({url:g.uploadsrc,maxFiles:O,dictMaxFilesExceeded:"您一次最多只能上传{{maxFiles}}个文件",addRemoveLinks:true,dictInvalidFileType:"不支持上传的格式",dictResponseError:"文件上传失败",dictInvalidFileType:"文件名和类型不匹配",autoProcessQueue:true,init:function(){var e=this;formPlane.dropzoneFile["advancedDropzone"]=e},addedfile:function(e){if(A==1){$example_dropzone_filetable.find("tbody").html("")}var t=parseInt(e.size/1024,10);t=t<1024?t+" KB":parseInt(t/1024,10)+" MB";var o=$('<tr>\t\t\t\t\t\t\t\t<th class="text-center">'+A++ +"</th>\t\t\t\t\t\t\t\t<td>"+e.name+'</td>\t\t\t\t\t\t\t\t<td><div class="progress progress-striped"><div class="progress-bar progress-bar-warning"></div></div></td>\t\t\t\t\t\t\t\t<td>'+t+"</td>\t\t\t\t\t\t\t\t<td>Uploading...</td>\t\t\t\t\t\t\t</tr>");$example_dropzone_filetable.find("tbody").append(o);e.fileEntryTd=o;e.progressBar=o.find(".progress-bar")},removedfile:function(e){M--;if(M<0){M=0;formPlane.dropzoneGetFile["advancedDropzone"]={}}},uploadprogress:function(e,t,o){e.progressBar.width(t+"%")},success:function(e,t){e.fileEntryTd.find("td:last").html('<span class="text-success">上传成功</span>');e.progressBar.removeClass("progress-bar-warning").addClass("progress-bar-success");var o='<td class="td-button">'+'<button type="button" class="btn btn-warning  btn-icon" fid="'+M+'" nstype="file-upload">'+'<i class="fa-trash"></i>'+"</button>"+"</td>";e.fileEntryTd.find("td:last").after(o);if(typeof g.changeHandler!="undefined"){var r=g.changeHandler;r(t,e)}formPlane.dropzoneGetFile["advancedDropzone"][M]=e;M++;e.fileEntryTd.find('button[nstype="file-upload"]').on("click",function(){var e=$(this).attr("fid");var t=formPlane.dropzoneGetFile["advancedDropzone"][e];if(t){formPlane.dropzoneFile["advancedDropzone"].removeFile(t)}})},error:function(e,t){e.fileEntryTd.find("td:last").closest("tr").remove();this.removeFile(e);nsalert(t)}});$("#advancedDropzone").css({minHeight:200})}if(i.length>0){formPlane.componentDate(e.id,i)}if(l.length>0){formPlane.componentDatetime(e.id,l)}if(d.length>0){formPlane.componentHandler(e.id,d)}if(p.length>0){formPlane.componentTypeahead(e.id,p)}$(".form-item.select select").selectBoxIt().on("open",function(){$(this).data("selectBoxSelectBoxIt").list.perfectScrollbar()});if(s.length>0){formPlane.componentSelect2(e.id,s)}if(b.length>0){formPlane.validateSelectPlane(e.id,b)}if(x.length>0){provinceSelect.init(e.id,x)}};popupBox.initTable=function(e){var t={};var o={};var r={};for(var n=0;n<e.length;n++){if(typeof e[n].id=="undefined"){nsalert("表格ID未定义");return false}if(typeof e[n].src=="undefined"&&typeof e[n].dataSource=="undefined"){nsalert("表格数据来源未定义");return false}var a="GET";if(typeof e[n].srctype!="undefined"){a=e[n].srctype}var i="data";if(typeof e[n].dataSrc!="undefined"){i=e[n].dataSrc}var l="搜索";if(typeof e[n].searchTitle!="undefined"){l=e[n].searchTitle}var f="";if(typeof e[n].searchPlaceholder!="undefined"){f=e[n].searchPlaceholder}var d=false;if(typeof e[n].scrollX!="undefined"){d=e[n].scrollX}var s=e[n].column;for(var p=0;p<s.length;p++){if(s[p].removeHandler){s[p]={title:"操作",formatHandler:{type:"upload",data:s[p].removeHandler}}}}o.columns=s;t={tableID:e[n].id,src:e[n].src,type:a,data:e[n].data,dataSrc:i,isServerMode:typeof e[n].isServerMode=="undefined"?false:e[n].isServerMode,isSearch:typeof e[n].isSearch=="undefined"?false:e[n].isSearch,isPage:typeof e[n].isPage=="undefined"?false:e[n].isPage,dataSource:e[n].dataSource,info:typeof e[n].info=="undefined"?true:e[n].info,isLengthChange:e[n].isLengthChange?e[n].isLengthChange:true};r={searchTitle:l,searchPlaceholder:f,isSelectColumns:e[n].isSelectColumns?e[n].isSelectColumns:false,isAllowExport:typeof e[n].isAllowExport=="undefined"?false:e[n].isAllowExport,pageLengthMenu:e[n].pageLengthMenu?e[n].pageLengthMenu:["auto",20,50,"all"],auto:e[n].auto?e[n].auto:false,isMulitSelect:typeof e[n].isMulitSelect=="undefined"?false:e[n].isMulitSelect,isSingleSelect:typeof e[n].isSingleSelect=="undefined"?false:e[n].isSingleSelect,scrollX:d,scrollY:e[n].scrollY?e[n].scrollY:false,isorder:e[n].isorder?e[n].isorder:false,dragWidth:e[n].dragWidth?e[n].dragWidth:false,orderBtn:e[n].orderBtn?e[n].orderBtn:"[]"};if(typeof e[n].onSingleSelectHandler!="undefined"){r.onSingleSelectHandler=e[n].onSingleSelectHandler}if(typeof e[n].onDoubleSelectHandler!="undefined"){r.onDoubleSelectHandler=e[n].onDoubleSelectHandler}baseDataTable.init(t,o.columns,r)}};popupBox.show=function(e,t){var o=arguments[1]?arguments[1]:"m";this.modal=$(e).modal("show",{backdrop:"fade"});if(!$(e).hasClass("custom-width")){$(e).addClass("custom-width")}var r="600px";switch(o){case"s":r="400px";break;case"m":r="600px";break;case"b":r="800px";break;case"f":r="100%";break;default:r=t;break}$(e+" .modal-dialog").attr("style","width:"+r)};popupBox.hide=function(){this.config=undefined;this.modal.modal("hide")};popupBox.getFormJson=function(){if(this.config){return nsForm.getFormJSON(this.config.id)}};popupBox.edit=function(e,t,o){for(var r=0;r<e.length;r++){var n=e[r];var a=formPlane.getInputContainerAndData(n.id,t);var i=a[0];var l=a[1];$.each(n,function(e,t){if(e!="id"){l[e]=t}});var f=commonConfig.component(l,t,"modal",o);var d=f.substring(f.indexOf("=")+1,f.indexOf(">"));f=f.substring(f.indexOf(">")+1,f.lastIndexOf("<"));var s="form-"+t+"-"+l.id;if(l.type=="hidden"){if(i.parent().hasClass("row row-close")){$("#"+s).val(l.value)}}inputContainerAttr=d.substring(d.indexOf('"')+1,d.length-1);i.closest(".form-group").attr("class",inputContainerAttr);i.closest(".form-group").html(f)}};popupBox.formEdit=function(e,t,o){var r=[];var n=[];var a=[];for(var i=0;i<e.length;i++){var l=e[i];var f=formPlane.getInputContainerAndData(l.id,t);var d=f[0];var s=f[1];$.each(l,function(e,t){if(e!="id"){s[e]=t}});var p=commonConfig.component(s,t,"modal",o);p=p.substring(p.indexOf(">")+1,p.lastIndexOf("<"));d.closest(".form-group").html(p);if(typeof s.id!="undefined"){if(typeof s.changeHandler!="undefined"){r.push(s)}if(s.type=="select"){n.push(s)}if(s.type=="date"){if(typeof s.readonly=="undefined"){a.push(s)}else{if(s.readonly==true){a.push(s)}}}}}if(a.length>0){formPlane.componentDate(t,a)}for(refreshSel in n){var m="form-"+t+"-"+n[refreshSel].id;var c=false;if(typeof n[refreshSel].disabled!="undefined"){c=n[refreshSel].disabled}if(c){$("#"+m).attr("disabled",true)}else{$("#"+m).attr("disabled",false);$("#"+m).selectBoxIt().on("open",function(){$(this).data("selectBoxSelectBoxIt").list.perfectScrollbar()})}}formPlane.componentHandler(t,r)};
popupBoxMore.initShow=function(e){popupBoxMore.init(e);var o="m";if(typeof e.size!="undefined"){o=e.size}popupBoxMore.show("#"+e.id,o)};popupBoxMore.init=function(e,o){this.btnHandlerArr=[];this.config=e;var t="";var r;if(typeof e.title=="undefined"){r=""}else{r=e.title}if(typeof e.form=="undefined"){e.form=[]}if(typeof e.btns=="undefined"){e.btns=[]}var i="";var a=[];var f=[];var n=[];var d=[];var s=[];var l=[];var m=[];var p="";var c="";var h="";var u=[];var v={};var g=[];for(var b=0;b<e.form.length;b++){if(typeof e.form[b].length=="undefined"){h="modal-body";var y="";if(typeof e.form[b].id!="undefined"){i+=commonConfig.component(e.form[b],e.id,"modal",e.size);a.push(e.form[b]);if(e.form[b].type=="date"){var x={id:e.form[b].id,format:e.form[b].format,changeHandler:e.form[b].changeHandler};f.push(x)}if(e.form[b].type=="datetime"){n.push(e.form[b])}if(e.form[b].type=="select2"){l.push(e.form[b])}if(e.form[b].type=="typeahead"){m.push(e.form[b])}if(e.form[b].type=="upload_single"){g[e.form[b].id]=e.form[b]}if(typeof e.form[b].changeHandler!="undefined"){s.push(e.form[b])}if(e.form[b].type=="upload"){v=e.form[b];u.push(e.form[b])}else if(e.form[b].type=="table"){u.push(e.form[b])}else{a.push(e.form[b])}}else{if(typeof e.form[b].html!="undefined"){i+=e.form[b].html}else if(typeof e.form[b].note!="undefined"){i+="<blockquote>"+"<p>"+e.form[b].note+"</p>"+"</blockquote>"}}}else{c="panel-form";h="panel-body";for(var B=0;B<e.form[b].length;B++){if(typeof e.form[b][B].id=="undefined"){if(typeof e.form[b][B].html!="undefined"){i+=e.form[b][B].html}else if(typeof e.form[b][B].note!="undefined"){i+="<blockquote>"+"<p>"+e.form[b][B].note+"</p>"+"</blockquote>"}else if(typeof e.form[b][B].element!="undefined"){if(e.form[b][B].element=="hr"){i+='<div class="col-xs-12 element-hr"><hr></div><div class="clearfix"></div>'}else if(e.form[b][B].element=="label"){i+='<label class="grouplable">'+e.form[b][B].label+"</label>"}else if(e.form[b][B].element=="br"){i+='<div class="col-xs-12 element-br"></div><div class="clearfix"></div>'}else if(e.form[b][B].element=="title"){i+='<div class="col-xs-12 element-title"><label>'+'<i class="fa fa-arrow-circle-down"></i> '+e.form[b][B].label+"</label></div>"}}}else{if(e.form[b][B].type=="date"){var x={id:e.form[b][B].id,format:e.form[b][B].format,changeHandler:e.form[b][B].changeHandler};f.push(x)}if(e.form[b][B].type=="datetime"){n.push(e.form[b][B])}if(e.form[b][B].type=="select2"){l.push(e.form[b][B])}if(e.form[b][B].type=="typeahead"){m.push(e.form[b][B])}if(typeof e.form[b][B].changeHandler!="undefined"){s.push(e.form[b][B])}if(e.form[b][B].type=="upload_single"){g[e.form[b][B].id]=e.form[b][B]}if(e.form[b][B].type=="upload"){v=e.form[b][B];u.push(e.form[b][B])}else if(e.form[b][B].type=="table"){u.push(e.form[b][B])}else{a.push(e.form[b][B])}i+=commonConfig.component(e.form[b][B],e.id,"form",e.size)}}}}var w="";for(var k=0;k<e.btns.length;k++){if(typeof e.btns[k].handler!="undefined"){d.push(e.btns[k])}w+=commonConfig.getBtn(e.btns[k],"modal",k);if(typeof e.btns[k].handler=="function"){this.btnHandlerArr.push(e.btns[k].handler)}else{this.btnHandlerArr.push("")}}var z=typeof e.note=="undefined"?"":'<small> <i class="fa fa-angle-double-right"></i> '+e.note+" </small>";var H="";if(r!=""){H='<div class="modal-header">'+'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'+'<h4 class="modal-title">'+r+z+"</h4>"+"</div>"}var M,C;var _=true;if(e.form.length==1){if(e.form[0].html){_=false}}if(_){M='<form class="form-horizontal" role="form" id="form-'+e.id+'" method="get" action="" onsubmit="false">';C="</form>"}else{M="";C=""}t+='<div id="'+e.id+'" class="modal fade modal-ns">'+'<div class="modal-dialog">'+'<div class="modal-content '+c+'">'+H+'<div class="'+h+'">'+M+'<div class="row row-close fillbg">'+i+"</div>"+C+"</div>"+'<div class="modal-footer">'+w+'<button type="button" class="btn btn-white" data-dismiss="modal">取消</button>'+"</div>"+"</div>"+"</div>"+"</div>";if($("#placeholder-popupboxMore").length==0){$("body").append('<div id="placeholder-popupboxMore"></div>')}$("#placeholder-popupboxMore").html(t);for(var P=0;P<this.btnHandlerArr.length;P++){var A=$("#"+e.id+" .modal-footer .btn")[P];if(typeof d[P].handler=="function"){$(A).on("click",function(){var e=parseInt($(this).attr("fid"));var o=popupBoxMore.btnHandlerArr[e];o()})}}if(a.length>0){formPlane.validateForm(e.id,a,"dialog")}if(u.length>0){popupBox.initTable(u)}if(!$.isEmptyObject(g)){formPlane.componentUpload(e.id,g)}if(!$.isEmptyObject(v)){var E=1;$example_dropzone_filetable=$("#"+v.id);example_dropzone=$("#advancedDropzone").dropzone({url:v.uploadsrc,addedfile:function(e){if(E==1){$example_dropzone_filetable.find("tbody").html("")}var o=parseInt(e.size/1024,10);o=o<1024?o+" KB":parseInt(o/1024,10)+" MB";var t=$('<tr>\t\t\t\t\t\t\t\t<td class="text-center">'+E++ +"</td>\t\t\t\t\t\t\t\t<td>"+e.name+'</td>\t\t\t\t\t\t\t\t<td><div class="progress progress-striped"><div class="progress-bar progress-bar-warning"></div></div></td>\t\t\t\t\t\t\t\t<td>'+o+"</td>\t\t\t\t\t\t\t\t<td>Uploading...</td>\t\t\t\t\t\t\t</tr>");$example_dropzone_filetable.find("tbody").append(t);e.fileEntryTd=t;e.progressBar=t.find(".progress-bar")},uploadprogress:function(e,o,t){e.progressBar.width(o+"%")},success:function(e,o){e.fileEntryTd.find("td:last").html('<span class="text-success">上传成功</span>');e.progressBar.removeClass("progress-bar-warning").addClass("progress-bar-success");if(typeof v.changeHandler!="undefined"){var t=v.changeHandler;t(o,e)}},error:function(e){e.fileEntryTd.find("td:last").html('<span class="text-danger">失败</span>');e.progressBar.removeClass("progress-bar-warning").addClass("progress-bar-red")}});$("#advancedDropzone").css({minHeight:200})}if(f.length>0){formPlane.componentDate(e.id,f)}if(n.length>0){formPlane.componentDatetime(e.id,n)}formPlane.componentHandler(e.id,s);if(m.length>0){formPlane.componentTypeahead(e.id,m)}$(".form-item.select select").selectBoxIt().on("open",function(){$(this).data("selectBoxSelectBoxIt").list.perfectScrollbar()});if(l.length>0){formPlane.componentSelect2(e.id,l)}};popupBoxMore.show=function(e,o){var t=arguments[1]?arguments[1]:"m";this.modal=$(e).modal("show").on("shown.bs.modal",function(){var e=$("#placeholder-popupboxMore").children("div");e.attr("style",e.attr("style")+"z-index:1052");$($(".modal-backdrop")[1]).attr("style","z-index:1051")});if(!$(e).hasClass("custom-width")){$(e).addClass("custom-width")}var r="600px";switch(t){case"s":r="400px";break;case"m":r="600px";break;case"b":r="800px";break;case"f":r="100%";break;default:r=o;break}$(e+" .modal-dialog").attr("style","width:"+r)};popupBoxMore.hide=function(){this.config=undefined;this.modal.modal("hide")};popupBoxMore.getFormJson=function(){if(this.config){if($("#form-"+this.config.id).valid()){var e=[];var o={};for(var t=0;t<this.config.form.length;t++){var r=this.config.form[t];if(r.id){e.push(this.config.form[t]);var i;if(r.type=="radio"){i=$("#form-"+this.config.id+' input[name="form-'+this.config.id+"-"+r.id+'"]:checked').val()}else if(r.type=="checkbox"){var a=$("#form-"+this.config.id+' input[name="form-'+this.config.id+"-"+r.id+'"]');if(a.length==1){if($(a).is(":checked")){i=1}else{i=0}}else{if($("#form-"+this.config.id+' input[name="form-'+this.config.id+"-"+r.id+'"]:checked').length>0){var f=[];$("#form-"+this.config.id+' input[name="form-'+this.config.id+"-"+r.id+'"]:checked').each(function(e){f.push($(this).val())});i=f}else{i=""}}}else{i=$("#form-"+this.config.id+" #form-"+this.config.id+"-"+r.id).val()}o[r.id]=i}}return o}else{return false}}};
var nswindow={};nswindow.configDefault=function(n){if(typeof n.container=="undefined"){n.container="body"}};nswindow.filterCode=function(n,e){var i=n.substr(n.indexOf("<"+e),100);i=i.substring(0,i.indexOf(">")+1);var o=n.substr(n.lastIndexOf(e+">")-100+e.length+1,100);o=o.substr(o.lastIndexOf("<"),o.length);n=n.substring(n.indexOf(i)+i.length,n.lastIndexOf(o));return n};nswindow.data={};nswindow.getContainer=function(n,e){var i=$(window).height()-100;i="height:"+i+"px; ";var o=$(".sidebar-menu").width();var t=$(window).width()-100-o;t="width:"+t+"px; ";var d='style="'+i+t+'"';var a='<div id="'+e+'" class="nswindow" '+d+"></div>";$(".page-container").children(".main-content").append(a)};nswindow.init=function(n){nswindow.configDefault(n);var e="dialog-more-"+Math.floor(Math.random()*1e10+1);nswindow.getContainer(n,e);$.ajax({url:n.url,data:"",success:function(i){dataObj=i;var o=i;o=nswindow.filterCode(o,n.container);console.log(o);$("#"+e).html(o);$("#"+e).find("#dialog-more").remove();$("#"+e).find("#placeholder-popupbox").remove();$("#"+e).find(".page-loading-overlay").remove();$("#"+e).find(".settings-pane").remove()}})};nswindow.refresh=function(){};