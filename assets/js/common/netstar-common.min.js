nsVals.containerHeight=function(){var e=108;var n=$(window).height();return n-e};nsVals.convertOptions=function(e){var n={};var r=e;var t=r.split(",");if(r.indexOf(",")<0){t=[r]}for(var i=0;i<t.length;i++){var s=t[i].substr(0,t[i].indexOf(":"));var a=t[i].substr(t[i].indexOf(":")+1,t[i].length);s=$.trim(s);a=a.replace(/'/g,"");a=a.replace(/"/g,"");a=$.trim(a);if(a=="true"){a=true}else if(a=="false"){a=false}else if(/^[1-9]\d*|0$/.test(a)){a=parseInt(a)}n[s]=a}return n};nsVals.clearNull=function(e){$.each(e,function(n,r){if(r==null){delete e[n]}});return e};nsVals.getRuleNumber=function(e,n){var r;var t=e.substring(e.indexOf(n),e.length);var i=t.indexOf(",");if(i==-1){i=t.length}r=t.substring(t.indexOf(":")+1,i);r=parseInt(r);return r};
nsDebuger.state=true;nsDebuger.navCustomConfigValid=function(e){var n=e.btns;nsDebuger.ArrTwoValid(n,"nav",e.id)};nsDebuger.formCustomConfigValid=function(e){var n=e.form;nsDebuger.ArrTwoValid(n,"form",e.id)};nsDebuger.ArrTwoValid=function(e,n,r){for(var t=0;t<e.length;t++){for(var o=0;o<e[t].length;o++){var i=e[t][o];if(n=="nav"){if(typeof i.id=="undefined"||typeof i.text=="undefined"||typeof i.handler=="undefined"||typeof i.configShow=="undefined"||typeof i.required=="undefined"){nsalert(n+":"+r+"参数不完整 第"+t+"组 / 第"+o+"个","error")}}else if(n=="form"){}}}};nsDebuger.runCode=function(){var e=$("#form-demo-code-outputHTML").val();nsdialog.hide();setTimeout(function(){var n=new Date;var r=n.getTime();$("container .page-title.nav-form").after(e);var t=new Date;var o=t.getTime();var i=o-r;n=undefined;t=undefined;nsalert("代码执行完毕 执行时间"+i+"毫秒","success")},500)};nsDebuger.codeDialog=function(e,n,r){if(typeof r=="undefined"){r=true}var t={id:"demo-code",title:e,size:"b",form:[{id:"outputHTML",label:"HTML代码",type:"textarea",height:"300px",placeholder:"",value:function(){return $("#"+n).html()}}]};var o=[{text:"执行代码",handler:nsDebuger.runCode}];if(r){t.btns=o}nsdialog.initShow(t)};
personUI.componentPersonPlane=function(n,e){for(var o in e){var r=e.personSelect;r.formID=n;nsUI.personSelect.init(r)}};
treeUI.componentSelectPlane=function(e,t){for(var r in t){if(!t[r].readonly){treeUI.init(e,t[r])}}};treeUI.init=function(e,t){var r="form-"+e+"-"+t.id;var a=r+"-tree";treeUI[a]={};treeUI[a].baseConfig=t;treeUI[a].inputContainer=$("#"+r);treeUI[a].treeContainer=$("#"+a);treeUI[a].treeBtnContainer=$("#"+a+"-menuBtn");treeUI[a].data={};treeUI[a].selectedNode={};var d={data:{simpleData:{enable:true},key:{url:"urlNullAndEmpty"}},view:{expandSpeed:""},callback:{onClick:treeUI.treenodeClick,onCheck:treeUI.treenodeOncheck,onAsyncSuccess:treeUI.ajaxCompete}};var n=t.async?t.async:false;if(n){d.async={enable:true,url:treeUI.getUrl,dataFilter:treeUI.ajaxDataFilter,type:"GET"}}if(t.isCheck){d.check={enable:true,chkboxType:{Y:"s",N:"s"}}}if(t.isRadio){d.check={enable:true,chkStyle:"radio",radioType:"all"}}treeUI.initAjaxTreedata(a,d)};treeUI.getUrl=function(e,t){var r="parentId="+t.id;var a=treeUI[e].baseConfig.url;treeUI[e].baseConfig.data.parentId=t.id;return a+"?"+r};treeUI.ajaxDataFilter=function(e,t,r){var a=treeUI.compontFieldPlane(e,r);return a};treeUI.initAjaxTreedata=function(e,t){var r=treeUI[e].baseConfig;$.ajax({url:r.url,data:r.data,type:r.treeType,dataType:"json",success:function(r){if(r.success){var a=treeUI.compontFieldPlane(e,r);$.fn.zTree.init($("#"+e),t,a);treeUI.componentInput(e)}}})};treeUI.compontFieldPlane=function(e,t){var r=treeUI[e].baseConfig;var a=t[r.dataSrc];var d="";if(typeof r.value=="function"){d=r.value()}else{d=r.value}treeUI[e].data["parentId"]={};treeUI[e].selectedNode["parentId"]={};treeUI[e].selectedNode["parentId"].selectedNodeIndex="";treeUI[e].selectedNode["parentId"].selectedNodeId="";treeUI[e].selectedNode["parentId"].selectedNodeValue="";n(a);function n(t){if(t){for(var a=0;a<t.length;a++){var i=t[a][r.haschildField];var l=true;if(i){if(Number(i)==0){l=false}else if(i==null){l=false}}else{var o="children";if(r.children){o=r.children}if(t[a][o]==null){l=false}else if(t[a][o].length==0){l=false}}t[a].isParent=l;t[a].name=t[a][r.textField];t[a].id=t[a][r.valueField];if(r.parentId){t[a].pId=t[a][r.parentId]}else{t[a].pId=t[a].parentId}if(l){n(t[a].children)}if(typeof d=="string"){if(d.indexOf(",")>-1){var s=d.split(",");for(var I=0;I<s.length;I++){if(t[a][r.valueField]==s[I]){treeUI[e].selectedNode["parentId"].selectedNodeIndex+=a+",";treeUI[e].selectedNode["parentId"].selectedNodeId+=t[a][r.valueField]+",";treeUI[e].selectedNode["parentId"].selectedNodeValue+=t[a][r.textField]+",";t[a].checked=true}}}else{if(t[a][r.valueField]==d){treeUI[e].selectedNode["parentId"].selectedNodeIndex=a;treeUI[e].selectedNode["parentId"].selectedNodeId=t[a][r.valueField];treeUI[e].selectedNode["parentId"].selectedNodeValue=t[a][r.textField]}}}else{if(t[a][r.valueField]==d){treeUI[e].selectedNode["parentId"].selectedNodeIndex=a;treeUI[e].selectedNode["parentId"].selectedNodeId=t[a][r.valueField];treeUI[e].selectedNode["parentId"].selectedNodeValue=t[a][r.textField]}}treeUI[e].data["parentId"][t[a][r.valueField]]=t[a]}}}var i=treeUI[e].selectedNode["parentId"].selectedNodeIndex;if(typeof i=="string"){if(i.indexOf(",")>-1){treeUI[e].selectedNode["parentId"].selectedNodeIndex=i.substr(0,i.length-1)}}var l=treeUI[e].selectedNode["parentId"].selectedNodeId;if(typeof l=="string"){if(l.indexOf(",")>-1){treeUI[e].selectedNode["parentId"].selectedNodeId=l.substr(0,l.length-1)}}var o=treeUI[e].selectedNode["parentId"].selectedNodeValue;if(typeof o=="string"){if(o.indexOf(",")>-1){treeUI[e].selectedNode["parentId"].selectedNodeValue=o.substr(0,o.length-1)}}return a};treeUI.ajaxCompete=function(e,t,r,a){var d=treeUI[t].inputContainer;var n=treeUI[t].baseConfig;treeUI.selectedTreeNode(t)};treeUI.componentInput=function(e){var t=treeUI[e].inputContainer;var r=treeUI[e].baseConfig;var a=treeUI[e].selectedNode["parentId"].selectedNodeId;var d=treeUI[e].baseConfig.fullnameField;var n=treeUI[e].selectedNode["parentId"].selectedNodeValue;if(a!=""){t.attr("value",n);t.attr("nodeid",a)}treeUI.selectedTreeNode(e);t.on("focus",function(e){$(this).on("click",function(e){var t=$(this).attr("id");t=t+"-tree";var r=treeUI[t].treeContainer;if(r.hasClass("hide")){r.removeClass("hide")}else{r.addClass("hide")}var a=$(this);var d=$(this).offset();var n=$(this).attr("id");$("body").on("mousedown",{treeId:t,inputId:n},treeUI.onBodyDown)})});var i=treeUI[e].treeBtnContainer;i.on("click",function(e){var t=$(e.target).closest("a").attr("id");var r=t.substr(0,t.length-8);var a=treeUI[r].treeContainer;if(a.hasClass("hide")){a.removeClass("hide")}else{a.addClass("hide")}var d=treeUI[r].inputContainer;inputId=d.attr("id");$("body").on("mousedown",{treeId:r,inputId:inputId},treeUI.onBodyDown)})};treeUI.onBodyDown=function(e){var t=e.data.treeId;var r=e.data.inputId;var a=treeUI[t].inputContainer;var d=treeUI[t].treeContainer;var n=d[0];var i=e.target;if(n!=i&&!$.contains(n,i)){treeUI.hideMenu(t)}};treeUI.hideMenu=function(e){var t=treeUI[e].treeContainer;t.addClass("hide");t.fadeOut("fast");var r=treeUI[e].inputContainer;r.off("click");$("body").off("mousedown",treeUI.onBodyDown)};treeUI.treenodeClick=function(e,t,r,a){var d=$.fn.zTree.getZTreeObj(t);var n=treeUI[t].baseConfig;if(n.isCheck||n.isRadio){d.checkNode(r,!r.checked,null,true);return false}else{var i=d.getSelectedNodes();var l="";var o="";var s="";i.sort(function e(t,r){return t.id-r.id});for(var I=0,c=i.length;I<c;I++){l+=i[I].name+",";if(n.fullnameField){o+=i[I][n.fullnameField]}else{o+=i[I][n.textField]}s+=i[I].id}if(l.length>0){l=l.substring(0,l.length-1)}if(o.length>0){o=o.substring(0,o.length)}if(s.length>0){s=s.substring(0,s.length)}var f=treeUI[t].inputContainer;f.val(o);f.attr("value",o);f.attr("nodeId",s);var u=treeUI[t].baseConfig.clickCallback;if(typeof u!="undefined"){var v={};v.treeId=t;v.inputContainer=f;v.value=l;v.id=s;u(v);treeUI.hideMenu(t)}}};treeUI.treenodeOncheck=function(e,t,r){var a=$.fn.zTree.getZTreeObj(t);var d=a.getCheckedNodes(true);var n=[];var i="";var l="";var o="";var s=treeUI[t].baseConfig;for(var I=0,c=d.length;I<c;I++){i+=d[I].name+",";if(s.fullnameField){l+=d[I][s.fullnameField]+","}else{l+=d[I][s.textField]+","}o+=d[I].id+",";n.push(d[I].name)}if(i.length>0){i=i.substring(0,i.length-1)}if(l.length>0){l=l.substring(0,l.length-1)}if(o.length>0){o=o.substring(0,o.length-1)}var f=treeUI[t].inputContainer;f.val(l);f.attr("value",l);f.attr("nodeId",o);var u=treeUI[t].baseConfig.checkCallback;if(typeof u!="undefined"){var v={};v.treeId=t;v.inputContainer=f;if(treeUI[t].baseConfig.isCheck){v.value=n}if(treeUI[t].baseConfig.isRadio){v.value=i}u(v)}};treeUI.selectedTreeNode=function(e,t){var r=$.fn.zTree.getZTreeObj(e);var t=treeUI[e].selectedNode["parentId"].selectedNodeIndex;var a="parentId";for(var d in treeUI[e].baseConfig.data){a=d}var n=treeUI[e].selectedNode["parentId"].selectedNodeId;var i=treeUI[e].baseConfig.async?treeUI[e].baseConfig.async:false;var l=[];if(typeof n=="string"){if(n.indexOf(",")>-1){n=n.split(",");for(var o=0;o<n.length;o++){var s=r.getNodesByParam("id",n[o]);r.selectNode(s[o],true)}}else{var s=r.getNodesByParam("id",n);r.selectNode(s[0])}}else{var s=r.getNodesByParam("id",n);r.selectNode(s[0])}};treeUI.updateTreeNode=function(e,t){var r=$.fn.zTree.getZTreeObj(e);var a=r.getNodes();r.updateNode(a[t])};
function getRootPath(){var n=window.document.location.href;var t=window.document.location.pathname;var o=n.indexOf(t);var r=n.substring(0,o);var a=t.substring(0,t.substr(1).indexOf("/")+1);return r+a}
function nsfullscreen(){if(!isFullScrenn){var e=document.documentElement;if(e.requestFullscreen){e.requestFullscreen()}else if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else if(e.webkitRequestFullScreen){e.webkitRequestFullScreen()}else if(elem.msRequestFullscreen){elem.msRequestFullscreen()}setTimeout(function(){var e=window.screen.height;var l=document.body.scrollHeight;isFullHeight=e==l;var s=window.screen.width;var n=document.body.scrollWidth;isFullWidth=s==n;if(isFullWidth||isFullHeight){toastr.success("已进入全屏，<br>按下ESC或者点击此按钮退出全屏");isFullScrenn=true;$("#icon-fullscreen").attr("class","fa-compress")}else{toastr.warning("您的浏览器不支持此方法，<br>您可以按下F11进入全屏<br>也可以更换为Google Chrome或者360浏览器、猎豹浏览器等推荐浏览器")}},100)}else{if(document.exitFullscreen){document.exitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}isFullScrenn=false;$("#icon-fullscreen").attr("class","fa-arrows-alt")}}
mainmenu.init=function(e,n,a,i){nsVals.homeUrl=i;mainmenu.mainmenuIconConfig={};var r={"基本结构":"fa-sitemap","Form类":"fa-edit","Table类":"fa-table","汽修类":"fa-car","dialog类":"fa-clipboard","leftmenu类":"fa-list","button类":"fa-mouse-pointer","其他类UI":"fa-puzzle-piece","奥来国信财务DEMO":"fa-rmb","页面配置生成":"fa-file-text","系统管理":"linecons-cog","基础信息管理":"linecons-database","项目管理":"linecons-calendar","报表管理":"linecons-doc","业务处理":"linecons-paper-plane","编号规则":"linecons-tag","采样管理":"linecons-inbox","结果录入":"linecons-pencil"};mainmenu.mainmenuIconConfig=r;for(var l in mainmenu.mainmenuIconConfig){for(var t in a){if(t==l){mainmenu.mainmenuIconConfig[l]=a[t]}else{mainmenu.mainmenuIconConfig[t]=a[t]}}}if(typeof mainmenu.url=="undefined"){mainmenu.url=getRootPath()+"/assets/json/mainmenu.json"}if(typeof mainmenu.type=="undefined"){mainmenu.type="get"}if(typeof mainmenu.data=="undefined"){mainmenu.data={id:0}}$.ajax({type:mainmenu.type,url:mainmenu.url,data:mainmenu.data,dataType:"json",success:function(a){if(a.success){mainmenu.data=a;mainmenu.currentCalalogID=parseInt(e);mainmenu.currentPageID=parseInt(n);mainmenu.initNav(e,n);var i="";for(var r=0;r<a.list.length;r++){var l="";if(a.list[r].list){l=s(a.list[r].list,r,n)}var t="javascript:void(0)";if(a.list[r].permitUrl!=""){t=getRootPath()+a.list[r].permitUrl;if(a.list[r].singlePageMode){var u=r;var o="false";if(a.list[r].minMenu){if(a.list[r].minMenu==true){o="true"}else{o="false"}}t="javascript:nsFrame.loadMenu('"+t+"','"+u+"','"+o+"');"}else{var f=t;if(f.indexOf("?")>-1){f=f+"&tid="+r}else{f=f+"?tid="+r}t=f}}var d=r==e?'class="opened active"':"";i+="<li "+d+">"+'<a href="'+t+'">'+'<i class="'+m(a.list[r].menuName)+'"></i>'+'<span class="title">'+a.list[r].text+"</span>"+"</a>"+l+"</li>"}}$("#main-menu").html(i);setup_sidebar_menu()},error:function(e){toastr.error("菜单加载出错")}});function s(e,n,a){var i="";for(var r=0;r<e.length;r++){var l="javascript:void(0)";if(e[r].singlePageMode){if(e[r].permitUrl!=""||e[r].permitUrl!=null){var t=getRootPath()+e[r].permitUrl;var s=n+"-"+r;var m="false";if(e[r].minMenu){if(e[r].minMenu==true){m="true"}}l="javascript:nsFrame.loadMenu('"+t+"','"+s+"','"+m+"');"}}else{if(e[r].permitUrl!=""||e[r].permitUrl!=null){var u=e[r].permitUrl;if(u.indexOf("?")>-1){u=u+"&tid="+n+"&sid="+r}else{u=u+"?tid="+n+"&sid="+r}l=getRootPath()+u}}var o=r==a?'class="opened active"':"";i+="<li "+o+">"+'<a href="'+l+'">'+'<span class="title">'+e[r].text+"</span>"+"</a>"+"</li>"}if(i!=""){i="<ul>"+i+"</ul>"}return i}function m(e){var n=mainmenu.mainmenuIconConfig[e];if(typeof n=="undefined"){n="linecons-desktop"}return n}};mainmenu.initNav=function(e,n){var a="";if(e!=-1){a="<li>"+'<a href="javascript:void(0);">'+mainmenu.data.list[e].menuName+"</a>"+"</li>"}var i="";if(typeof n=="undefined"){n=-1}if(n!=-1){i="<li>"+'<a href="javascript:void(0);">'+mainmenu.data.list[e].list[n].menuName+"</a>"+"</li>"}var r=getRootPath()+"/home?istree=1";if(nsVals.homeUrl){r='javascript:nsFrame.loadPage("'+nsVals.homeUrl+'");'}var l="<li>"+'<a href="'+r+'"><i class="fa-home"></i>首页</a>'+"</li>";$("#breadcrumb-env ol").html(l+a+i)};mainmenu.setMin=function(e){if(e){if(public_vars.$sidebarMenu.hasClass("collapsed")){}else{public_vars.$sidebarMenu.addClass("collapsed");ps_destroy();var n=public_vars.$sidebarMenu.find("li.has-sub.opened");n.removeClass("expanded opened");n.children("ul").removeAttr("style")}}else{if(public_vars.$sidebarMenu.hasClass("collapsed")){public_vars.$sidebarMenu.removeClass("collapsed");ps_init()}else{}}};mainmenu.setCurrentMenu=function(e,n){if(mainmenu.currentCalalogID==e&&mainmenu.currentPageID==n){return false}if(mainmenu.currentCalalogID!=e){$("#main-menu").children("li.opened.active").removeClass("opened active");$("#main-menu").children("li.active").removeClass("active");var a=$("#main-menu").children("li")[e];if($(a).hasClass("expanded")){$(a).addClass("opened active")}else{$(a).addClass("opened active expanded")}$(a).children("ul").children("li.opened.active").removeClass("opened active");var i=$(a).children("ul").children("li")[n];$(i).addClass("opened active");mainmenu.currentCalalogID=e;mainmenu.currentPageID=n}else{var a=$("#main-menu").children("li")[e];$(a).children("ul").children("li.opened.active").removeClass("opened active");var i=$(a).children("ul").children("li")[n];$(i).addClass("opened active");mainmenu.currentPageID=n}};mainmenu.initNew=function(e,n,a,i){nsVals.homeUrl=i;mainmenu.mainmenuIconConfig={};var r={"基本结构":"fa-sitemap","Form类":"fa-edit","Table类":"fa-table","汽修类":"fa-car","dialog类":"fa-clipboard","leftmenu类":"fa-list","button类":"fa-mouse-pointer","其他类UI":"fa-puzzle-piece","奥来国信财务DEMO":"fa-rmb","页面配置生成":"fa-file-text","系统管理":"linecons-cog","基础信息管理":"linecons-database","项目管理":"linecons-calendar","报表管理":"linecons-doc","业务处理":"linecons-paper-plane","编号规则":"linecons-tag","采样管理":"linecons-inbox","结果录入":"linecons-pencil"};mainmenu.mainmenuIconConfig=r;for(var l in mainmenu.mainmenuIconConfig){for(var t in a){if(t==l){mainmenu.mainmenuIconConfig[l]=a[t]}else{mainmenu.mainmenuIconConfig[t]=a[t]}}}if(typeof mainmenu.url=="undefined"){mainmenu.url=getRootPath()+"/assets/json/mainmenu.json"}if(typeof mainmenu.type=="undefined"){mainmenu.type="get"}if(typeof mainmenu.data=="undefined"){mainmenu.data={id:0}}$.ajax({type:mainmenu.type,url:mainmenu.url,data:mainmenu.data,dataType:"json",success:function(a){if(a.success){mainmenu.data=a;mainmenu.currentCalalogID=parseInt(e);mainmenu.currentPageID=parseInt(n);mainmenu.initNavNew(e,n);var i="";for(var r=0;r<a.rows.length;r++){var l="";if(a.rows[r].children){l=s(a.rows[r].children,r,n)}var t="javascript:void(0)";if(a.rows[r].url!=""){t=getRootPath()+a.rows[r].url;if(true){var u=r;var o="false";if(a.rows[r].minMenu){if(a.rows[r].minMenu==true){o="true"}else{o="false"}}t="javascript:nsFrame.loadMenuNew('"+t+"','"+u+"','"+o+"');"}else{var f=t;if(f.indexOf("?")>-1){f=f+"&tid="+r}else{f=f+"?tid="+r}t=f}}var d=r==e?'class="opened active"':"";i+="<li "+d+">"+'<a href="'+t+'">'+'<i class="'+m(a.rows[r].name)+'"></i>'+'<span class="title">'+a.rows[r].name+"</span>"+"</a>"+l+"</li>"}}$("#main-menu").html(i);setup_sidebar_menu()},error:function(e){toastr.error("菜单加载出错")}});function s(e,n,a){var i="";for(var r=0;r<e.length;r++){var l="javascript:void(0)";if(true){if(e[r].url!=""||e[r].url!=null){var t=getRootPath()+e[r].url;var s=n+"-"+r;var m="false";if(e[r].minMenu){if(e[r].minMenu==true){m="true"}}l="javascript:nsFrame.loadMenuNew('"+t+"','"+s+"','"+m+"');"}}else{if(e[r].url!=""||e[r].url!=null){var u=e[r].url;if(u.indexOf("?")>-1){u=u+"&tid="+n+"&sid="+r}else{u=u+"?tid="+n+"&sid="+r}l=getRootPath()+u}}var o=r==a?'class="opened active"':"";i+="<li "+o+">"+'<a href="'+l+'">'+'<span class="title">'+e[r].name+"</span>"+"</a>"+"</li>"}if(i!=""){i="<ul>"+i+"</ul>"}return i}function m(e){var n=mainmenu.mainmenuIconConfig[e];if(typeof n=="undefined"){n="linecons-desktop"}return n}};mainmenu.initNavNew=function(e,n){var a="";if(e!=-1){a="<li>"+'<a href="javascript:void(0);">'+mainmenu.data.rows[e].name+"</a>"+"</li>"}var i="";if(typeof n=="undefined"){n=-1}if(n!=-1){i="<li>"+'<a href="javascript:void(0);">'+mainmenu.data.rows[e].children[n].name+"</a>"+"</li>"}var r=getRootPath()+"/home";if(nsVals.homeUrl){r='javascript:nsFrame.loadPage("'+nsVals.homeUrl+'");'}var l="<li>"+'<a href="'+r+'"><i class="fa-home"></i>首页</a>'+"</li>";$("#breadcrumb-env ol").html(l+a+i)};
baseFrame.init=function(){var t=getHeight(".navbar.user-info-navbar");var a=getHeight(".page-title.nav-form");$(".frame-left").attr("style","top:"+(t+a+15)+"px")};
nsNav.json={};nsNav.btnHandler={};nsNav.btnGroupHandler={};nsNav.config={};nsNav.init=function(n){if(typeof n.id=="undefined"){nsalert("导航按钮未定义","error");return false}if(typeof n.btns!="undefined"){nsNav.initBtns(n)}};nsNav.initConfigBtn=function(n){var a="document";if(n.pageCode){a=n.pageCode}var t=n.nav[0].id;nsNav.config[t]=n;var e="";$.each(n,function(n,t){if(n=="nav"||n=="formJson"||n=="tableJson"){var i;var s;switch(n){case"nav":i="导航按钮配置";s="fa-inbox";break;case"formJson":i="表单配置";s="fa-terminal";break;case"tableJson":i="表格配置";s="fa-table";break}var r='<i class="fa '+s+'"></i> ';var o='<li><a href="javascript:void(0);" pageCode="'+a+'" configtype="'+n+'">'+i+"</a></li>";o+='<li class="divider"></li>';e+=o}});e+='<li><a href="javascript:void(0);" pageCode="'+a+'" configtype="all">全部恢复默认</a></li>';e='<ul class="dropdown-menu" role="menu">'+e+"</ul>";var i='<div class="nav-config"><a class="nav-config-btn" href="javascript:void(0);"  data-toggle="dropdown"><i class="fa-cog"></i></a>'+e+"</div>";$("#"+t).append(i);$("#"+t+" .nav-config ul.dropdown-menu li a").on("click",function(n){var a=$(this).attr("configtype");var t=$(this).attr("pageCode");nsNav.configBtnHandler(t,a)})};nsNav.configBtnHandler=function(n,a){switch(a){case"nav":nsCustomConfig.initButtonConfigPage(n);break;case"formJson":nsCustomConfig.initFormConfigPage(n);break;case"tableJson":nsCustomConfig.initTableConfigPage(n);break;case"all":nsCustomConfig.clearCustomData(n);break}};nsNav.initBtns=function(n){var a="";var t=[];var e=[];var i=0;for(var s=0;s<n.btns.length;s++){var r='<div class="btn-group">';for(var o=0;o<n.btns[s].length;o++){if(typeof n.btns[s][o].subdata!="undefined"){for(var f in n.btns[s][o].subdata){if(typeof n.btns[s][o].subdata[f].handler=="function"){e.push(n.btns[s][o].subdata[f].handler)}else{e.push("")}}}r+=commonConfig.getBtn(n.btns[s][o],"form",i);if(typeof n.btns[s][o].handler=="function"){t.push(n.btns[s][o].handler)}else{t.push("")}i++}r+="</div>";a+=r}var l="default";if(typeof n.id!="undefined"){$("#"+n.id).html(a);l=n.id}else{$(".nav-form").html(a)}nsNav.json[l]=n;nsNav.btnHandler[l]=t;nsNav.btnGroupHandler[l]=e;nsNav.btnInit(t,e,l)};nsNav.btnInit=function(n,a,t){for(var e=0;e<n.length;e++){if(n[e]!=""){var i;if(t=="default"){i=$(".nav-form button")[e]}else{i=$("#"+t+".nav-form button")[e]}var s="default";if(n[e]!=""){$(i).off("click");$(i).on("click",function(n){if(typeof $(this).closest(".nav-form").attr("id")=="undefined"){s="default"}else{s=$(this).closest(".nav-form").attr("id")}var a=Number($(this).attr("fid"));var t=nsNav.btnHandler[s][a];var e=$(this).attr("isReturn")=="true"?true:false;if(e){t(n)}else{t()}})}}}for(var r=0;r<a.length;r++){var o=$(".nav-form button.dropdown-toggle")[r];var f=$(o).nextAll();var s="default";$(f).find("li").off("click");$(f).find("li").on("click",function(n){if(typeof $(this).closest(".nav-form").attr("id")=="undefined"){s="default"}else{s=$(this).closest(".nav-form").attr("id")}var a=Number($(this).attr("fid"));if(isNaN(a)==false){var t=nsNav.btnGroupHandler[s][a];var e=$(this).attr("isReturn")=="true"?true:false;if(e){t(n)}else{t()}}})}};
controlPlane.formNavInit=function(n){nsNav.initBtns(n)};
nsMultiSelect.Json={};nsMultiSelect.multiSelectInit=function(e){var t={};t.attribute=e;var l="multi-"+e.multiID;nsMultiSelect.Json[l]={};var i=[];if(typeof e.select!="undefined"){i=e.select}else{$.ajax({url:e.url,type:e.method,data:e.data,async:false,success:function(t){if(typeof e.dataSrc=="undefined"){i=t}else{for(d in t){i=t[e.dataSrc]}}},error:function(){nsalert("请检查数据格式是否合法","warning")}})}var a=e.order;if(typeof a!="undefined"){i=i.sort(function(e,t){if(Number(e[a])<Number(t[a])){return-1}if(Number(e[a])>Number(t[a])){return 1}if(Number(e[a])==Number(t[a])){return 0}})}t.orderData=i;nsMultiSelect.Json[l]=t;multiSelectHtml=nsMultiSelect.Data(l);if($("#"+e.id).length<1){nsalert("无法在页面上找到multi对象，请检查HTML和JSON中的id命名是否统一")}else if($("#"+e.id).length>1){nsalert("HTML中的multi出现了ID重复,无法填充")}else{$("#"+e.id).html(multiSelectHtml)}nsMultiSelect.componentMulti(l)};nsMultiSelect.Data=function(e){var t=nsMultiSelect.Json[e].attribute;var l=nsMultiSelect.Json[e].orderData;var i="";for(var a=0;a<l.length;a++){var s="";var n="";var c="";var r="subdata";if(typeof t.labelField=="undefined"){c="label"}else{c=t.labelField}if(typeof t.groupField=="undefined"){r="subdata"}else{r=t.groupField}var d=l[a][r];if(typeof d=="undefined"){if(typeof t.textField=="undefined"){s=l[a].text}else{s=l[a][t.textField]}if(typeof t.valueField=="undefined"){n=l[a].id}else{n=l[a][t.valueField]}i+='<option value="'+n+'">'+s+"</option>"}else{i+='<optgroup label="'+l[a][c]+'">';for(var o=0;o<d.length;o++){if(typeof t.textField=="undefined"){s=d[o].text}else{s=d[o][t.textField]}if(typeof t.valueField=="undefined"){n=d[o].id}else{n=d[o][t.valueField]}i+='<option value="'+n+'">'+s+"</option>"}i+="</optgroup>"}}multiSelectHtml='<select name="'+e+'[]" id="'+e+'" class="form-control multi" multiple="multiple">'+i+"</select>";return multiSelectHtml};nsMultiSelect.componentMulti=function(e){var t=nsMultiSelect.Json[e].attribute;var l=false;if(t.keepOrder==true){l=true}var i="";var a="";var s="";var n="";if(t.headerType=="text"){if(typeof t.selectableHeader!="undefined"){i="<div class='custom-header'>"+t.selectableHeader+"</div>"}if(typeof t.selectionHeader!="undefined"){a="<div class='custom-header'>"+t.selectionHeader+"</div>"}if(typeof t.selectableFooter!="undefined"){s="<div class='custom-header'>"+t.selectableFooter+"</div>"}if(typeof t.selectionFooter!="undefined"){n="<div class='custom-header'>"+t.selectionFooter+"</div>"}}else if(t.headerType=="search"){i="<input type='text' class='search-input form-control' autocomplete='off' placeholder='搜索...'>";a="<input type='text' class='search-input form-control' autocomplete='off' placeholder='搜索...'>"}var c=false;if(t.choseALLGroup==true){c=true}var r="multi-"+t.multiID;$("#"+r).multiSelect({keepOrder:l,selectableHeader:i,selectionHeader:a,selectableFooter:s,selectionFooter:n,selectableOptgroup:c,cssClass:"selectMulti",afterInit:function(){this.$selectableContainer.add(this.$selectionContainer).find(".ms-list").perfectScrollbar();var e=this,t=e.$selectableUl.prev();$selectionSearch=e.$selectionUl.prev();selectableSearchString="#"+e.$container.attr("id")+" .ms-elem-selectable:not(.ms-selected)";selectionSearchString="#"+e.$container.attr("id")+" .ms-elem-selection.ms-selected";e.qs1=t.quicksearch(selectableSearchString).on("keydown",function(t){if(t.which===40){e.$selectableUl.focus();return false}});e.qs2=$selectionSearch.quicksearch(selectionSearchString).on("keydown",function(t){if(t.which==40){e.$selectionUl.focus();return false}});var l=this.$element.attr("id");nsMultiSelect.Json[l].data=[];nsMultiSelect.Json[l].obj=e;var i=null;$(this.$selectableUl).off("dblclick");$(this.$selectableUl).on("dblclick",".ms-elem-selectable",function(t){clearTimeout(i);var l=$(this).data("msValue");var a=$(t.target).text().trim();var s=e.$selectableUl;var n=e.$selectionUl.closest("div").attr("class");$("."+n+" ul li").each(function(){if($(this).text().trim()==a){s.find("li.selection-selected").removeClass("selection-selected");$(this).addClass("selection-selected");$(this).siblings().removeClass("selection-selected")}});var c=e.$element.attr("id");var r={id:l,text:a,type:"selection"};nsMultiSelect.multiSelectHandler(c,r)});$(this.$selectableUl).off("click");$(this.$selectableUl).on("click",".ms-elem-selectable",function(t){clearTimeout(i);$(t.target).closest("li").toggleClass("selection-selected");$(t.target).closest("li").siblings().removeClass("selection-selected");var l=$(this).data("msValue");var a=$(t.target).text().trim();i=setTimeout(function(){var t=e.$element.attr("id");var i={id:l,text:a,type:"selected"};nsMultiSelect.multiSelectHandler(t,i)},500)});var a=null;$(this.$selectionUl).off("click");$(this.$selectionUl).on("click",".ms-elem-selection",function(t){clearTimeout(a);$(t.target).closest("li").toggleClass("selection-selected");$(t.target).closest("li").siblings().removeClass("selection-selected");var l=$(this).data("msValue");var i=$(t.target).text().trim();a=setTimeout(function(){var t=e.$element.attr("id");var a={id:l,text:i,type:"cancelselected"};nsMultiSelect.multiSelectHandler(t,a)},500)});$(this.$selectionUl).off("dblclick");$(this.$selectionUl).on("dblclick",".ms-elem-selection",function(t){clearTimeout(a);var l=$(this).data("msValue");var i=$(t.target).text().trim();var s=e.$selectableUl.closest("div").attr("class");var n=e.$selectionUl;$("."+s+" ul li").each(function(){if($(this).text().trim()==i){n.find("li.selection-selected").removeClass("selection-selected");$(this).addClass("selection-selected");$(this).siblings().removeClass("selection-selected")}});var c=e.$element.attr("id");var r={id:l,text:i,type:"cancelselection"};nsMultiSelect.multiSelectHandler(c,r)})},afterSelect:function(e){this.$selectableContainer.add(this.$selectionContainer).find(".ms-list").perfectScrollbar("update");this.qs1.cache();this.qs2.cache();var t=this.$element.attr("id");var l={id:e,type:"selected"};nsMultiSelect.multiSelectedData(t,l)},afterDeselect:function(e){this.qs1.cache();this.qs2.cache();var t=this.$element.attr("id");var l={id:e,type:"deselected"};nsMultiSelect.multiSelectedData(t,l)}});if(typeof t.default!="undefined"){$("#"+r).multiSelect("select",t.default)}if(t.isALLSelect==true){$("#"+r).multiSelect("select_all")}if(t.isNotSelect==true){$("#"+r).multiSelect("deselect_all")}};nsMultiSelect.multiSelectHandler=function(e,t){var l;var i;var a;var s;var n=nsMultiSelect.Json[e].attribute;if(typeof n.selectedHanlder!="undefined"){l=n.selectedHanlder}if(typeof n.selectionHandler!="undefined"){i=n.selectionHandler}if(typeof n.cancelSelectedHandler!="undefined"){a=n.cancelSelectedHandler}if(typeof n.cancelSelectionHandler!="undefined"){s=n.cancelSelectionHandler}if(t.type=="selected"){if(typeof l=="function"){l(t.id,t.text)}}else if(t.type=="selection"){if(typeof i=="function"){var c=i(t.id,t.text);if(c.success){$("#"+e).multiSelect("select",t.id)}else{nsalert(c.msg)}}}else if(t.type=="cancelselected"){if(typeof a=="function"){a(t.id,t.text)}}else if(t.type=="cancelselection"){if(typeof s=="function"){var c=s(t.id,t.text);if(c.success){$("#"+e).multiSelect("deselect",t.id)}else{nsalert(c.msg)}}}};nsMultiSelect.multiSelectSort=function(e,t){var l=nsMultiSelect.Json[e];var i=l.obj;var a={};var s=$(i.$container).find(".selection-selected");var n=s.text().trim();var c=s.closest("div").attr("class");var r=$("."+c).parent().attr("id");if(typeof c=="undefined"){nsalert("请先选中需要排序的值")}else{a.selectedText=n;var d=$("#"+r+" ."+c+" ul li");var o=$("#"+r+" ."+c+" ul li:first").text().trim();var u=$("#"+r+" ."+c+" ul li:last").text().trim();var f;var v;$(d).each(function(e,t){if($(this).text().trim()==n){f=$(t);v=e}});var m=d.index(f);if(t=="up"){if(m<1){nsalert("系统提示,已移到最顶端了！")}else{function p(e){var t=e.prev();if(t.css("display")=="none"){p(t)}else{a.moveText=t.text().trim();t.before(f)}}p(f);nsMultiSelect.multiSelectRefreshData(e,a)}}else if(t=="down"){if(m>=d.length-1){nsalert("系统提示,已移到最底端了！")}else{function S(e){var t=e.next();if(t.css("display")=="none"){S(t)}else{a.moveText=t.text().trim();t.after(f)}}S(f);nsMultiSelect.multiSelectRefreshData(e,a)}}else if(t=="top"){if(m<1){nsalert("系统提示, 已移到最顶端了！")}else{a.moveText=o;f.parent().prepend(f);nsMultiSelect.multiSelectRefreshData(e,a)}}else if(t=="bottom"){if(m>=d.length-1){nsalert("系统提示,已移到最底端了！")}else{a.moveText=u;f.parent().append(f);nsMultiSelect.multiSelectRefreshData(e,a)}}}};nsMultiSelect.multiSelectRefreshData=function(e,t){var l=nsMultiSelect.Json[e].orderData;var i=nsMultiSelect.Json[e].attribute;var a=typeof i.valueField=="undefined"?"id":i.valueField;var s=typeof i.textField=="undefined"?"text":i.textField;var n=typeof i.labelField=="undefined"?"label":i.labelField;var c=typeof i.groupField=="undefined"?"subdata":i.groupField;var r=typeof i.order=="undefined"?"undefined":i.order;var d=0;var o=0;for(var u in l){if(l[u][s]==t.selectedText){d=u}if(l[u][s]==t.moveText){o=u}}var f=l[d][r];var v=l[o][r];l[d][r]=v;l[o][r]=f};nsMultiSelect.multiSelectedData=function(e,t){var l=e;var i=[];var a=nsMultiSelect.Json[l].attribute;var i=nsMultiSelect.Json[l].orderData;var s=t.id;var n=a.default;var c=typeof a.valueField!="undefined"?a.valueField:"id";var r=typeof a.textField!="undefined"?a.textField:"text";var d=typeof a.labelField!="undefined"?a.labelField:"label";var o=typeof a.groupField!="undefined"?a.groupField:"subdata";var u=typeof a.dataSrc!="undefined"?a.dataSrc:"";nsMultiSelect.Json[l].dataSrc=u;for(var f in i){if(typeof i[f][o]=="undefined"){for(var v=0;v<s.length;v++){if(i[f][c]==s[v]){if(t.type=="selected"){nsMultiSelect.Json[l].data.push(i[f])}else if(t.type=="deselected"){nsMultiSelect.Json[l].data.splice(i[f],1)}}}}else{var m=i[f][o];var p=i[f][d];var S={};for(var $ in m){for(var h=0;h<s.length;h++){if(m[$][c]==s[h]){if(t.type=="selected"){S[d]=p;S[o]=m[$];nsMultiSelect.Json[l].data.push(S)}else if(t.type=="deselected"){var b=nsMultiSelect.Json[l].data;for(var y in b){var M=b[y][o];for(var x in M){if(M[x]==s[h]){nsMultiSelect.Json[l].data.splice(y,1)}}}}}}}}}};nsMultiSelect.fillMultiValue=function(e,t){var l={};var i=nsMultiSelect.Json[e].attribute;var a=typeof i.valueField=="undefined"?"id":i.valueField;var s=typeof i.textField=="undefined"?"text":i.textField;var n=typeof i.singOrder=="undefined"?"undefined":i.singOrder;for(var c in t){l.value=t[a];l.text=t[s]}nsMultiSelect.Json[e].orderData.push(t);$("#"+e).multiSelect("addOption",l)};nsMultiSelect.componentMultiSelect=function(e,t,l){switch(t){case"refresh":$("#"+e).multiSelect("refresh");break;case"select_all":$("#"+e).multiSelect("select_all");break;case"deselect_all":$("#"+e).multiSelect("deselect_all");break;case"select":$("#"+e).multiSelect("select",l);break;case"deselect":$("#"+e).multiSelect("deselect",l);break;default:break}};nsMultiSelect.getSelectJson=function(e){var t={};var l=nsMultiSelect.Json[e].dataSrc;t[l]=nsMultiSelect.Json[e].data;return t};
$.validator.addMethod("ismobile",function(r,e){var a=/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/;var t=/^((0\d{2,3})-)?(\d{7,8})(-(\d{3,}))?$/;return this.optional(e)||(t.test(r)||a.test(r))},"电话号码格式有误!");$.validator.addMethod("postalcode",function(r,e){return this.optional(e)||/^[0-9]\d{5}$/.test(r)},"邮政编码格式有误!");$.validator.addMethod("year",function(r,e){return this.optional(e)||/(19[\d][\d]|20[\d][\d])$/.test(r)&&r.length<=4},"请输入正确年份,1900-2099!");$.validator.addMethod("month",function(r,e){return this.optional(e)||r>=1&&r<=12},"请输入正确月份,1-12");$.validator.addMethod("Icd",function(r,e){return this.optional(e)||IdentityCodeValid(r)},"请输入合法身份证号码!");$.validator.addMethod("bankno",function(r,e){return this.optional(e)||luhmCheck(r)},"请输入正确的银行卡号!");function stripHtml(r){return r.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-“”’]*/g,"")}$.validator.addMethod("maxWords",function(r,e,a){return this.optional(e)||stripHtml(r).match(/\b\w+\b/g).length<=a},$.validator.format("Please enter {0} words or less."));$.validator.addMethod("precision",function(r,e,a){return this.optional(e)||commonConfig.getRulesPrecisionNumber(r,a)},"不合法!");$.extend($.validator.messages,{required:"必填",remote:"验证未通过",email:"电子邮件地址",url:"有效网址",date:"有效日期",dateISO:"有效日期 (YYYY-MM-DD)",number:"有效数字",digits:"只能是数字",creditcard:"有效的信用卡号码",equalTo:"两次输入不同",extension:"后缀无效",maxlength:$.validator.format("最多 {0} 个字符"),minlength:$.validator.format("最少 {0} 个字符"),rangelength:$.validator.format("长度在 {0} 到 {1} 之间"),range:$.validator.format("范围在 {0} 到 {1} 之间"),max:$.validator.format("不大于 {0} 的数值"),min:$.validator.format("不小于 {0} 的数值")});$.validator.setDefaults({errorClass:"has-error",validClass:"has-success"});function uploadValid(r){var e=false;if(r){e=true}else{e=false}return e}function selectValid(r,e){var a=false;if(typeof r=="undefined"||r==""||r=="必填"||r==" "||r==null||r=="选填"||r=="请选择"){a=false}else{a=true}if(e){for(var t=0;t<e.length;t++){if(e[t].selected==true){a=true}}}return a}function autoCompleteValid(r){var e=$("#"+r).val().trim();var a=false;if(typeof e=="undefined"||e==""){a=false}else{a=true}return a}function luhmCheck(r){var e=false;if(r.length<16||r.length>19){e=false}var a=/^\d*$/;if(!a.exec(r)){e=false}var t="10,18,30,35,37,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,58,60,62,65,68,69,84,87,88,94,95,98,99";if(t.indexOf(r.substring(0,2))==-1){e=false}var n=r.substr(r.length-1,1);var s=r.substr(0,r.length-1);var l=new Array;for(var i=s.length-1;i>-1;i--){l.push(s.substr(i,1))}var o=new Array;var d=new Array;var f=new Array;for(var u=0;u<l.length;u++){if((u+1)%2==1){if(parseInt(l[u])*2<9)o.push(parseInt(l[u])*2);else d.push(parseInt(l[u])*2)}else{f.push(l[u])}}var v=new Array;var h=new Array;for(var p=0;p<d.length;p++){v.push(parseInt(d[p])%10);h.push(parseInt(d[p])/10)}var c=0;var g=0;var m=0;var $=0;var I=0;for(var b=0;b<o.length;b++){c=c+parseInt(o[b])}for(var y=0;y<f.length;y++){g=g+parseInt(f[y])}for(var M=0;M<v.length;M++){m=m+parseInt(v[M]);$=$+parseInt(h[M])}I=parseInt(c)+parseInt(g)+parseInt(m)+parseInt($);var w=parseInt(I)%10==0?10:parseInt(I)%10;var x=10-w;if(n==x){e=true}else{e=false}return e}function IdentityCodeValid(r){var e={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "};var a=true;if(!r||!/^([1-6]\d{5}(19|20)\d\d(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])\d{3}[0-9xX])|([1-6]\d{5}\d\d(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])\d{3})$/i.test(r)){a=false}else if(!e[r.substr(0,2)]){a=false}else{if(r.length==18){r=r.split("");var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];var n=[1,0,"X",9,8,7,6,5,4,3,2];var s=0;var l=0;var i=0;for(var o=0;o<17;o++){l=r[o];i=t[o];s+=l*i}var d=n[s%11];if(n[s%11]!=r[17]){a=false}}}return a}
formPlane.data={};formPlane.rules={};formPlane.fillValid={};formPlane.formInit=function(e,t){var a=[];var r=[];var l=[];var o=[];var n=[];var i={};var f={};var s=[];var d=[];var m=[];var c={};var v=false;var p={};var u=false;var h=false;var g={};var y={};var b=[];var P="";for(var x=0;x<e.form.length;x++){var I="";for(var S=0;S<e.form[x].length;S++){var k="";if(typeof e.form[x][S].id!="undefined"){I+=commonConfig.component(e.form[x][S],e.id,"form");if(e.form[x][S].type=="person-select"){if(e.form[x][S].rules){e.form[x][S].sRules=e.form[x][S].rules;delete e.form[x][S].rules}}a.push(e.form[x][S]);if(typeof e.form[x][S].btnhandler!="undefined"){r.push(e.form[x][S])}if(e.form[x][S].type=="radio"){f[e.form[x][S].id]=e.form[x][S]}if(e.form[x][S].type=="selectDate"){g[e.form[x][S].id]=e.form[x][S]}if(e.form[x][S].type=="daterangepicker"){y[e.form[x][S].id]=e.form[x][S]}if(e.form[x][S].type=="typeahead"){s.push(e.form[x][S])}if(e.form[x][S].type=="select"){b.push(e.form[x][S])}if(e.form[x][S].type=="tree-select"){c[e.form[x][S].id]=e.form[x][S]}if(e.form[x][S].type=="select2"){d.push(e.form[x][S])}if(typeof e.form[x][S].changeHandler!="undefined"){l.push(e.form[x][S])}if(e.form[x][S].type=="text-btn"){m.push(e.form[x][S])}if(e.form[x][S].type=="date"&&!e.form[x][S].readonly){var D={id:e.form[x][S].id,format:e.form[x][S].format,changeHandler:e.form[x][S].changeHandler};o.push(D)}if(e.form[x][S].type=="upload"&&!e.form[x][S].readonly){i[e.form[x][S].id]=e.form[x][S]}if(e.form[x][S].type=="person-select"){p[e.form[x][S].id]=e.form[x][S]}if(e.form[x][S].type=="add-select-input"){if(v==false){v=e.form[x][S];h=true}else{nsAlert("增查一体输入框只能有一个","error")}}if(e.form[x][S].type=="datetime"){n.push(e.form[x][S])}}else{if(typeof e.form[x][S].html!="undefined"){I+=e.form[x][S].html}else if(typeof e.form[x][S].note!="undefined"){I+="<blockquote>"+"<p>"+e.form[x][S].note+"</p>"+"</blockquote>"}else if(typeof e.form[x][S].element!="undefined"){if(e.form[x][S].element=="hr"){I+='<div class="col-xs-12 element-hr"><hr></div><div class="clearfix"></div>'}else if(e.form[x][S].element=="label"){var F="";var w="";if(e.form[x][S].label){F=e.form[x][S].label;w=""}else{F="";w="hide"}var C="";var H="";if(typeof e.form[x][S].height=="string"){if(e.form[x][S].height.indexOf("px")>-1){C="height: "+e.form[x][S].height+";"}else if(e.form[x][S].height.indexOf("%")>-1){C="height: "+e.form[x][S].height+";"}else{C="height: "+e.form[x][S].height+"px;"}}else if(typeof e.form[x][S].height=="number"){C="height: "+e.form[x][S].height+"px;"}if(typeof e.form[x][S].width=="string"){if(e.form[x][S].width.indexOf("px")>-1){H="width: "+e.form[x][S].width+";"}else if(e.form[x][S].width.indexOf("%")>-1){H="width: "+e.form[x][S].width+";"}else{H="width: "+e.form[x][S].width+"px;"}}else if(typeof e.form[x][S].width=="number"){H="width: "+e.form[x][S].width+"px;"}var V='style="'+C+""+H+'"';I+='<label class="grouplable '+w+'" '+V+">"+F+"</label>"}else if(e.form[x][S].element=="br"){I+='<div class="col-xs-12 element-br"></div><div class="clearfix"></div>'}else if(e.form[x][S].element=="title"){I+='<div class="col-xs-12 element-title"><label>'+'<i class="fa fa-arrow-circle-down"></i> '+e.form[x][S].label+"</label></div>"}}}}var T="row row-close";var B='<div class="col-xs-12 element-space"></div>';if(typeof e.format!="undefined"){if(e.format=="standard"){T="row row-close";B='<div class="col-xs-12 element-space"></div>'}else if(e.format=="close"){T="row row-close";B=""}else if(e.format=="noline"){T="row";B=""}}if(typeof e.fillbg!="undefined"){if(e.fillbg==true){T+=" fillbg"}}if(x==e.form.length-1){B=""}I='<div class="'+T+'">'+I+B+"</div>";P+=I}var O="";var M="";if(typeof e.size=="undefined"||e.size=="fullwidth"){}else if(e.size=="standard"){O=" "+e.size}else{M=' style="max-width: '+e.width+';"'}var Y="";if(t){Y='<form role="form" class="clearfix panel-form '+O+'"  id="form-'+e.id+'" method="get" action="" '+M+">"+P+"</form>"}else{Y='<div class="panel panel-default panel-form">'+'<div class="panel-body">'+'<form role="form" class="clearfix '+O+'"  id="form-'+e.id+'" method="get" action="" '+M+">"+P+"</form>"+"</div>"+"</div>"}if($("#"+e.id).length<1){nsalert("无法在页面上找到Form对象，请检查HTML和JSON中的id命名是否统一")}else if($("#"+e.id).length>1){nsalert("HTML中的from出现了ID重复,无法填充")}else{if(t){$("#"+e.id+" "+t).html(Y)}else{$("#"+e.id).html(Y)}}$("#form-"+e.id).on("keydown",function(e){if(e.keyCode==13){return false}});if(a.length>0){formPlane.validateForm(e.id,a)}if(!$.isEmptyObject(f)){formPlane.radioTooltipPlane(e.id,f)}if(o.length>0){formPlane.componentDate(e.id,o)}if(n.length>0){formPlane.componentDatetime(e.id,n)}if(!$.isEmptyObject(i)){formPlane.componentUpload(e.id,i)}if(s.length>0){formPlane.componentTypeahead(e.id,s)}if(!$.isEmptyObject(c)){treeUI.componentSelectPlane(e.id,c)}if(!$.isEmptyObject(p)){personUI.componentPersonPlane(e.id,p)}$(".form-item.select select").selectBoxIt().on("open",function(){$(this).data("selectBoxSelectBoxIt").list.perfectScrollbar()});$(".form-item.selectplane select").selectBoxIt().on("open",function(){$(this).data("selectBoxSelectBoxIt").list.perfectScrollbar()});if(d.length>0){formPlane.componentSelect2(e.id,d)}if(m.length>0){formPlane.componentTextBtnHandler(e.id,m)}if(v!=false){nsUI.addSearchInput.init(e,v)}if(h){}if(u){$("#form-"+e.id+' [data-toggle="popover"]').popover()}for(var z=0;z<r.length;z++){var j="#form-"+e.id+"-"+r[z].id;$(j).closest(".input-group").find(".btn").off("click");$(j).closest(".input-group").find(".btn").on("click",function(e){var t=$(e.target).closest("form").attr("id");var a=$(e.target).closest(".input-group").find("input").attr("id");a=a.substr(t.length+1,a.length);t=t.substr(5,t.length);var r=formPlane.data[t].formInput[a].btnhandler;r()})}if(l.length>0){formPlane.componentHandler(e.id,l)}if(b.length>0){formPlane.validateSelectPlane(e.id,b)}if(!$.isEmptyObject(g)){formPlane.selectDatePlane(e.id,g)}if(!$.isEmptyObject(y)){formPlane.daterangepickerPlane(e.id,y)}formPlane.selectMorePlane(e.id)};formPlane.init=formPlane.formInit;formPlane.radioTooltipPlane=function(e,t){for(var a in t){var r=t[a].isTooltip?t[a].isTooltip:false;if(r){var l="form-"+e+"-"+a;$('input[name="'+l+'"]').closest("label").tooltip()}}};formPlane.daterangepickerPlane=function(e,t){var a={};for(var r in t){var l="form-"+e+"-"+r;var o={};o={format:"YYYY-MM-DD",separator:"至",applyClass:"btn-sm btn-success",cancelClass:"btn-sm btn-default",locale:{applyLabel:"确定",cancelLabel:"取消",fromLabel:"开始时间",toLabel:"结束时间",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],daysOfWeek:["周日","周一","周二","周三","周四","周五","周六"]}};a[r]=$("#"+l).daterangepicker(o)}};formPlane.selectMorePlane=function(e){$("#form-"+e+' [commonplane="moreSelectPlane"] button').on("click",function(e){var t=Number($(this).attr("fid"));var a=$(e.target).closest("form").attr("id");var r=$(e.target).closest(".form-item").attr("ns-id");var l=$(e.target).closest(".form-td");a=a.substr(5,a.length);var o=formPlane.data[a].formInput[r].button[t].handler;if(o){o(r,l)}})};formPlane.selectDatePlane=function(e,t){var a=$('select[nstype="selectDate-caseSelect"]');a.selectBoxIt().on("change",function(e){var t=$(this).attr("id");var a=$(this).val().trim();var r=$(this).find("option:selected").text().trim();var l=$(e.target).closest("form").attr("id");t=t.substr(l.length+1,t.length);l=l.substr(5,l.length);var o=$(e.target).closest(".form-item").attr("ns-id");var n=formPlane.data[l].formInput[o].caseSelect.changeHandler;if(n){var i=n(o);i(a,r)}});$('input[nstype="selectDate-date"]').datepicker({format:"yyyy-mm-dd",autoclose:true,todayHighlight:true});var r={};r={format:"YYYY-MM-DD",separator:"至",applyClass:"btn-sm btn-success",cancelClass:"btn-sm btn-default",locale:{applyLabel:"确定",cancelLabel:"取消",fromLabel:"开始时间",toLabel:"结束时间",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],daysOfWeek:["周日","周一","周二","周三","周四","周五","周六"]}};var l=$('div[nstype="selectDate-daterange"]');l.daterangepicker(r,function(e,t,a){var r=e.format("YYYY-MM-DD")+"至"+t.format("YYYY-MM-DD");l.children("span").text(r)});l.on("apply.daterangepicker",function(e,t){var a=t.startDate.format("YYYY-MM-DD");endRange=t.endDate.format("YYYY-MM-DD");var r=a+"至"+endRange;l.children("span").text(r)})};formPlane.validateForm=function(e,t,a){var r=e;var l={};var o=[];for(var n=0;n<t.length;n++){var i=r+"-"+t[n].id;i=i.substr(r.length+1,i.length);if(t[n].type=="selectText"||t[n].type=="textSelect"){var f=t[n].text.id;var s=t[n].select.id;var d=t[n].text;var m=t[n].select;o.push(d,m)}else if(t[n].type=="selectDate"){var c=t[n].caseSelect;var v=t[n].text;var p=t[n].date;p.id=p.id;var u=t[n].daterange;u.id=u.id;o.push(c,v,p,u)}else if(t[n].type=="selectSelect"){var h=t[n].firstSelect;var g=t[n].secondSelect;o.push(h,g)}else if(t[n].type=="datetime"){if(p){var p=t[n].date;l[p.id]=p;o.push(p)}if(y){var y=t[n].time;l[y.id]=y;o.push(y)}}var b=t[n];l[i]=b}var P="form";if(typeof a=="string"){if(a=="dialog"||a=="form"){P=a}else{nsAlert("表格类型定义错误","error")}}formPlane.data[r]={id:r,formInput:l,formType:P};var x=$.merge(t,o);var I=commonConfig.getRules(x,r);var S=$("#form-"+r).validate(I);formPlane.rules[r]=I.rules};formPlane.validateSelectPlane=function(e,t){for(var a=0;a<t.length;a++){var r="form-"+e+"-"+t[a].id;$("#"+r).selectBoxIt().on("close",function(e){var t=$(e.target).closest("form").attr("id");var a=$(e.target).closest("select").attr("id");var r=a.substr(t.length+1,a.length);var l=t.substr(5,t.length);var o=formPlane.data[l].formInput[r].changeHandler;var n=$(e.target).closest("select").val().trim();var i=$(e.target).find("option:selected").text().trim();var f=a+"SelectBoxItText";$("#"+f).attr("data-val",n);$("#"+f).text(i);if(formPlane.data[l].formInput[r].rules){if(formPlane.data[l].formInput[r].rules.indexOf("select")>-1){if(n){formPlane.fillValid[l][a]=true;$(e.target).closest("div").find(".has-error").remove()}else{formPlane.fillValid[l][a]=false}}}if(o){o(n,i)}})}};formPlane.init=formPlane.formInit;formPlane.clearData=function(e){var t="form-"+e;var a=formPlane.data[e].formInput;for(var r in a){var l=t+"-"+r;var o=a[r].type;switch(o){case"select":var n="";var i="";if(a[r].rules){i="必填"}else{i="选填"}var f=a[r].textField;var s=a[r].valueField;var d=a[r].value;var m=l+"SelectBoxItText";$("#"+l).val(n);$("#"+l).closest("div").find("#"+m).text(i);$("#"+l).closest("div").find("#"+m).attr("data-val",n);break;case"selectText":$("#"+l+"CompareType").val("");var m=l+"CompareTypeSelectBoxItText";$("#"+l+"CompareType").closest("div").find("#"+m).text("选填");$("#"+l+"CompareType").closest("div").find("#"+m).attr("data-val","");$("#"+l+"DefaultValue1").val("");break;case"selectSelect":$("#"+l+"CompareType").val("");var m=l+"CompareTypeSelectBoxItText";$("#"+l+"CompareType").closest("div").find("#"+m).text("选填");$("#"+l+"CompareType").closest("div").find("#"+m).attr("data-val","");$("#"+l+"DefaultValue1").val("");var m=l+"DefaultValue1SelectBoxItText";$("#"+l+"DefaultValue1").closest("div").find("#"+m).text("选填");$("#"+l+"DefaultValue1").closest("div").find("#"+m).attr("data-val","");break;case"selectDate":$("#"+l+"CompareType").val("");var m=l+"CompareTypeSelectBoxItText";$("#"+l+"CompareType").closest("div").find("#"+m).text("选填");$("#"+l+"CompareType").closest("div").find("#"+m).attr("data-val","");$("#"+l+"DefaultValue1Temp").val("");$("#"+l+"DefaultValue1").val("");$("#"+l+"DefaultValue2").val("");break;case"select2":$select2Change[l].val("").trigger("change");break;case"datetime":$("#"+l+"-date").val("");$("#"+l+"-time").val("");break;case"radio":case"checkbox":$('input[name="'+l+'"]').removeAttr("checked");break;case"upload":$("#"+l).html("");var c=formPlane.dropzoneGetFile[r];var v=formPlane.dropzoneFileJson[r];if(!$.isEmptyObject(c)){for(var p in c){v.removeFile(c[p])}}break;case"tree-select":$("#"+l).val("");$("#"+l).attr("value","");$("#"+l).attr("nodeid","");break;default:$("#"+l).val("");break}}};formPlane.resetData=function(e){var t="form-"+e;var a=formPlane.data[e].formInput;for(var r in a){var l=t+"-"+r;if(a[r].type=="select"){var o="";var n="";if(a[r].rules){n="必填"}else{n="选填"}var i=a[r].textField;var f=a[r].valueField;var s=a[r].value;var d=a[r].subdata;for(var m in d){var c="text";if(typeof i=="undefined"){c="text"}else{c=i}var v="id";if(typeof f=="undefined"){v="id"}else{v=f}if(d[m].selected){o=d[m][v];n=d[m][c]}else if(typeof s!="undefined"){if(d[m][v]==s){o=d[m][v];n=d[m][c]}}}var p=l+"SelectBoxItText";$("#"+l).val(o);$("#"+l).closest("div").find("#"+p).text(n);$("#"+l).closest("div").find("#"+p).attr("data-val",o)}else if(a[r].type=="radio"||a[r].type=="checkbox"){$('input[name="'+l+'"]').removeAttr("checked")}else{if(typeof a[r].value!="undefined"){$("#"+l).val(a[r].value)}else{$("#"+l).val("")}}}};formPlane.dropzoneFileJson={};formPlane.dropzoneGetFile={};formPlane.tempFileJson={};formPlane.componentUpload=function(e,t){var a="form-"+e;for(var r in t){formPlane.dropzoneFileJson[r]={};formPlane.dropzoneGetFile[r]={};var l=a+"-"+r;var o=r;var n=typeof t[o].supportFormat=="undefined"?"":t[o].supportFormat;var i=typeof t[o].ismultiple=="undefined"?false:t[o].ismultiple;var f=typeof t[o].isAllowFiles=="undefined"?1:t[o].isAllowFiles;var s=0;if(t[o].subdata){s=t[o].subdata.length}var d=0;formPlane.tempFileJson[r]=s;$("#"+l).dropzone({url:t[o].uploadSrc,paramName:l,acceptedFiles:n,uploadMultiple:i,maxFiles:f,dictDefaultMessage:"选择上传",dictMaxFilesExceeded:"您一次最多只能上传{{maxFiles}}个文件",addRemoveLinks:true,dictInvalidFileType:"不支持上传的格式",dictResponseError:"文件上传失败",dictInvalidFileType:"文件名和类型不匹配",autoProcessQueue:true,accept:function(e,a){var r=$(this.element).attr("id");var l=$("#"+r).closest("form").attr("id");var o=r.substr(l.length+1,r.length);var n=t[o].isAllowFiles;var i=formPlane.tempFileJson[o];if(n==i){a("您一次最多只能上传"+n+"个文件")}else{a()}},init:function(){var e=this;var a=$(this.element).attr("id");var l=$("#"+a).closest("form").attr("id");var o=a.substr(l.length+1,a.length);var n={};n[a]={};n[a]["downloadhandler"]=t[o]["downloadHandler"];n[a]["delFileHandler"]=t[o]["delFileHandler"];if(typeof t[o].subdata!="undefined"){formPlane.dropzoneHandler(e,n)}formPlane.dropzoneFileJson[r]=e},addedfile:function(e){var t=$(this.element).attr("id");var a=parseInt(e.size/1024,10);a=a<1024?a+" KB":parseInt(a/1024,10)+" MB"},removedfile:function(e){var a=$(this.element).attr("id");var r=$("#"+a).closest("form").attr("id");var l=r.substr(5,r.length);var o=a.substr(r.length+1,a.length);if(t[o].rules){if($("#"+a).children("span").length>0){formPlane.fillValid[l][a]=true}else{formPlane.fillValid[l][a]=false}}formPlane.tempFileJson[o]=$("#"+a).children("span").length;if(formPlane.tempFileJson[o]==0){formPlane.dropzoneGetFile[o]={}}},success:function(e,a){var r=$(this.element).attr("id");var l=$("#"+r).closest("form").attr("id");var o=r.substr(l.length+1,r.length);var n=l.substr(5,l.length);if(t[o].rules){formPlane.fillValid[n][r]=true}else{formPlane.fillValid[n][r]=false}var i=this;var f;var s={};s.data=a;s.file=e;s.fileInputId=o;if(typeof t[o].changeHandler!="undefined"){var m=t[o].changeHandler;f=m(s)}var c="";var v="";if(typeof f!="undefined"){var p=t[o]["valueField"];var u=t[o]["textField"];v=f[p];c=f[u]}var h='<span class="dropzone-upload-span">'+'<a href="javascript:void(0)" id="'+v+'" ns-file="'+d+'" class="upload-close">'+"</a>"+'<a href="javascript:void(0)" id="'+v+'" class="upload-title">'+c+"</a>"+"</span>";$("#"+r).append(h);formPlane.tempFileJson[o]=$("#"+r).children("span").length;formPlane.dropzoneGetFile[o][d]=e;d++;var s={};s[r]={};s[r]["downloadhandler"]=t[o]["downloadHandler"];s[r]["delFileHandler"]=t[o]["delFileHandler"];formPlane.dropzoneHandler(i,s)},error:function(e,t){nsAlert(t)}})}};formPlane.dropzoneHandler=function(e,t){var a=$(e.element).attr("id");$("#"+a+" a.upload-title").off("click");$("#"+a+" a.upload-title").on("click",function(e){var r=$(this).attr("id");if(typeof t[a]["downloadhandler"]!="undefined"){var l=t[a]["downloadhandler"];l(r)}});$("#"+a+" a.upload-close").off("click");$("#"+a+" a.upload-close").on("click",function(r){$(this).closest("span").remove();var l=$(this).attr("id");var o=$(this).attr("ns-file");var n=$("#"+a).closest("form").attr("id");var i=n.substr(5,n.length);var f=a.substr(n.length+1,a.length);var s=formPlane.dropzoneGetFile[f][o];if(s){e.removeFile(s)}else{var d=formPlane.data[i].formInput[f].rules;if(d){if($("#"+a).children("span").length>0){formPlane.fillValid[i][a]=true}else{formPlane.fillValid[i][a]=false}}formPlane.tempFileJson[f]=$("#"+a).children("span").length;if(formPlane.tempFileJson[f]==0){formPlane.dropzoneGetFile[f]={}}}if(typeof t[a]["delFileHandler"]!="undefined"){var m=t[a]["delFileHandler"];m(l)}})};formPlane.componentDatetime=function(e,t){for(var a in t){var r="form-"+e+"-"+t[a].id+"-date";var l="form-"+e+"-"+t[a].id+"-time";$("#"+r).datepicker({format:t[a].format,autoclose:true,todayHighlight:true}).on("changeDate",function(e){var t=$(e.target).closest("form").attr("id");var a=$(this).attr("id");var r=a.substr(t.length+1,a.length);r=r.substr(0,r.length-5);t=t.substr(5,t.length);var l=formPlane.data[t].formInput[r].changeHandler;var o="form-"+t+"-"+r+"-time";var n=$("#"+o).val().trim();if(typeof l!="undefined"){var i=$(this).val().trim();var f=i+" "+n;var s={};s.datevalue=i;s.dateID=a;s.timeValue=n;s.timeID=o;s.datetimerID=r;s.datetimervalue=f;l(s)}});var o=typeof t[a].minuteStep=="undefined"?1:t[a].minuteStep;var n=typeof t[a].showSeconds=="undefined"?false:t[a].showSeconds;var i=typeof t[a].secondStep=="undefined"?1:t[a].secondStep;var f=typeof t[a].showMeridian=="undefined"?false:t[a].showMeridian;$("#"+l).timepicker({minuteStep:o,template:"dropdown",showSeconds:n,secondStep:i,showMeridian:f,defaultTime:false,showInputs:false}).on("hide.timepicker",function(e){var t=$(e.target).closest("form").attr("id");var a=$(this).attr("id");var r=a.substr(t.length+1,a.length);r=r.substr(0,r.length-5);t=t.substr(5,t.length);var l=formPlane.data[t].formInput[r].changeHandler;var o="form-"+t+"-"+r+"-date";var n=$("#"+o).val().trim();if(typeof l!="undefined"){var i=$(this).val().trim();var f=n+" "+i;var s={};s.datevalue=n;s.dateID=o;s.timeValue=i;s.timeID=a;s.datetimerID=r;s.datetimervalue=f;l(s)}})}$("#form-"+e+' [nstype="datetime"]').on("focus",function(e){var t=$(this).attr("id");if(t.indexOf("-date")>-1){var a=t.substr(0,t.length-5);a=a+"-time";$("#"+a).timepicker("hideWidget")}else{var r=t.substr(0,t.length-5);r=r+"-date";$("#"+r).datepicker("hide")}})};formPlane.componentDate=function(e,t){for(var a in t){var r=$("#form-"+e+"-"+t[a].id);var l=r.closest("div");l=l.find(".input-group-addon a");l.on("click",function(e){var t=$(e.target).closest(".input-group").children("input");t.datepicker("show")});var o={autoclose:true,todayHighlight:true,format:t[a].format};$("#form-"+e+"-"+t[a].id).datepicker({autoclose:true,todayHighlight:true,format:t[a].format}).on("changeDate",function(e){var t=$(e.target).closest("form").attr("id");var a=$(this).attr("id");a=a.substr(t.length+1,a.length);t=t.substr(5,t.length);var r=formPlane.data[t].formInput[a].changeHandler;if(typeof r!="undefined"){var l=$(this).val().trim();var o={};o.id=a;o.value=l;r(o)}})}};formPlane.componentTypeahead=function(e,t){for(var a in t){var r="#form-"+e+"-"+t[a].id;var l="asc";if(typeof t[a].order!="undefined"){l=t[a].order}var o={};if(typeof t[a].sourceSrc!="undefined"){if(t[a].sourceSrc!=""){o={ajax:{url:t[a].sourceSrc,path:t[a].dataSrc}}}else{o[t[a].dataSrc]={data:t[a].selfData}}}typeof $.typeahead==="function"&&$.typeahead({input:r,minLength:1,maxItem:20,order:l,group:true,maxItemPerGroup:3,groupOrder:function(){var e=this,t=[];for(var a in this.result){t.push({group:a,length:this.result[a].length})}t.sort(e.helper.sort(["length"],false,function(e){return e.toString().toUpperCase()}));return $.map(t,function(e,t){return e.group})},hint:true,dropdownFilter:t[a].dropdownFilter,source:o,callback:{onInit:function(e){},onNavigateBefore:function(e,t,a){console.log(t);if(~[38,40].indexOf(a.keyCode)){a.preventInputChange=true}},onSearch:function(t,a){var r=$(t).attr("id");for(var l in formPlane.fillValid[e]){if(l==r){$("#"+l).closest("span").find(".has-error").remove();if(a==""){formPlane.fillValid[e][l]=false;$("#"+l).closest("span").append('<label class="has-error">必填</label>')}else{formPlane.fillValid[e][l]=true}}}},onResult:function(t,a,r,l){if(a==="")return;var o="";var n=true;if(r.length>0&&r.length<l){o="Showing <strong>"+r.length+"</strong> of <strong>"+l+'</strong> elements matching "'+a+'"';n=true}else if(r.length>0){o="Showing <strong>"+r.length+'</strong> elements matching "'+a+'"';n=true}else{o='No results matching "'+a+'"';n=false}var i=$(t).attr("id");$("#"+i).closest("span").find(".has-error").remove();if(n==false){$("#"+i).closest("span").append('<label class="has-error">未找到匹配值</label>')}for(var f in formPlane.fillValid[e]){if(f==i){formPlane.fillValid[e][f]=n}}$("#result-container").html(o)},onShowLayout:function(e,t){},onHideLayout:function(e,t){e.attr("placeholder","Search")}}})}};var $select2Change={};formPlane.componentSelect2=function(e,t){for(var a in t){var r=false;if(t[a].filltag==true){r=true}var l=true;if(t[a].isAllowClear==false){l=false}var o=3;if(typeof t[a].maximumItem!="undefined"){o=t[a].maximumItem}var n=-1;if(typeof t[a].isCloseSearch!="undefined"){n=t[a].isCloseSearch}var i="form-"+e+"-"+t[a].id;$select2Change[i]=$("#"+"form-"+e+"-"+t[a].id).select2({placeholder:"请选择",tags:r,maximumSelectionLength:o,allowClear:l,data:t[a].data,minimumResultsForSearch:n,width:"100%"});var f="";if(typeof t[a].value=="function"){f=t[a].value()}else{f=t[a].value}$select2Change[i].val(f).trigger("change")}$(".form-item.select2 select").on("select2:close",function(e){var t=$(e.target).closest("select").attr("id");var a=$(e.target).closest("form").attr("id");var r=a.substr(5,a.length);var l=$(e.target).closest("select").val();var o=$(e.target).closest("select").find("option:selected").text().trim();for(var n in formPlane.fillValid[r]){if(n==t){$("#"+n).closest("div").find(".has-error").remove();if(l==""||l=="请选择"||l==null){formPlane.fillValid[r][n]=false;$("#"+n).closest("div").append('<label class="has-error">必填</label>')}else{formPlane.fillValid[r][n]=true}}}if(typeof l=="object"){for(var i in l){if(l[i]==""){l.splice(i,1)}}}var f="form-"+r;var s=t.substr(f.length+1,t.length);$select2Change[t].val(l).trigger("change");var d=formPlane.data[r].formInput[s].changeHandler;if(typeof d!="undefined"){d(l,o)}})};formPlane.componentTextBtnHandler=function(e,t){for(var a=0;a<t.length;a++){var r="form-"+e+"-"+t[a].id;var l=$("#"+r).closest("div").find("button");if(typeof l.attr("disabled")=="undefined"){l.on("click",function(e){var t=Number($(this).attr("fid"));var a=$(this).closest("div").parent().find("input").attr("id");var r=$(this).closest("form").attr("id");a=a.substr(r.length+1,a.length);r=r.substr(5,r.length);var l=formPlane.data[r].formInput[a].btns;if(!isNaN(t)){if(typeof l[t].handler!="undefined"){var o=l[t].handler;if(typeof o!="undefined"){o()}}}})}}};formPlane.componentHandler=function(e,t){for(var a=0;a<t.length;a++){var r="form-"+e+"-"+t[a].id;if(t[a].type=="radio"||t[a].type=="checkbox"){$('input[name="'+r+'"]').on("change",function(e){var t=$(e.target).closest("form").attr("id");var a=$(e.target).attr("name");a=a.substr(t.length+1,a.length);t=t.substr(5,t.length);var r=formPlane.data[t].formInput[a].changeHandler;var l=$(e.target).val();var o=$(this);r(l,o)})}else if(t[a].type=="select"){}else if(t[a].type=="text"||t[a].type=="text-btn"||t[a].type=="number"){$('input[id="'+r+'"]').on("keyup",function(e){var t=$(e.target).closest("form").attr("id");var a=$(e.target).closest("input").attr("id");a=a.substr(t.length+1,a.length);t=t.substr(5,t.length);var r=formPlane.data[t].formInput[a].changeHandler;var l={};l.id=a;l.value=$(e.target).val().trim();l.obj=$(this);if(typeof r!="undefined"){r(a,$(e.target).val().trim(),l)}})}}};formPlane.selectProvince=function(e,t){var a=[];var r=[];for(var l=0;l<e.length;l++){var o=e[l];var n=formPlane.getInputContainerAndData(o.id,t);var i=n[0];var f=n[1];$.each(o,function(e,t){if(e!="id"){f[e]=t}});var s="form-"+t+"-"+f.id;var d=f.subdata;var m="";for(var c in d){var v=d[c].selected?"selected":"";m+='<option value="'+d[c].value+'" '+v+">"+d[c].text+"</option>"}m='<select id="'+s+'" class="form-control" nstype="select">'+m+"</select>";i.closest("div").html(m);if(typeof f.id!="undefined"){if(typeof f.changeHandler!="undefined"){a.push(f)}if(f.type=="select"){r.push(f.id)}}}for(refreshSel in r){var p="form-"+t+"-"+r[refreshSel];$("#"+p).selectBoxIt().on("open",function(){$(this).data("selectBoxSelectBoxIt").list.perfectScrollbar()})}formPlane.componentHandler(t,a)};formPlane.append=function(e,t,a){var r="";var l=[];var o="form-"+t;for(var n=0;n<e.length;n++){if(typeof e[n].id=="undefined"){if(typeof e[n].html!="undefined"){r+=e[n].html}}else{if($("#"+o+"-"+e[n].id).length>0){r+=""}else{r+=commonConfig.component(e[n],t,"form");l.push(e[n])}}}if(typeof a=="undefined"){$("#"+o).children(".row").last().append(r)}else{$("#"+o+"-"+a).closest(".row.row-close.fillbg").append(r)}if(l.length>0){formPlane.validateForm(t,l)}$(".form-item.select select").selectBoxIt().on("open",function(){$(this).data("selectBoxSelectBoxIt").list.perfectScrollbar()});$(".form-item.selectplane select").selectBoxIt().on("open",function(){$(this).data("selectBoxSelectBoxIt").list.perfectScrollbar()})};formPlane.delete=function(e,t){if(typeof t=="object"){for(var a=0;a<t.length;a++){var r="form-"+e+"-"+t[a];$("#"+r).closest(".form-td").remove()}}};formPlane.edit=function(e,t){var a=[];var r=[];var l=[];var o={};var n=[];var i={};var f={};var s=[];for(var d=0;d<e.length;d++){var m=e[d];var c=formPlane.getInputContainerAndData(m.id,t);var v=c[0];var p=c[1];$.each(m,function(e,t){if(e!="id"){p[e]=t}});var u=typeof nsForm.data[t].formType=="string"?nsForm.data[t].formType:"form";var h="";if(u=="dialog"||u=="modal"){u="modal";h=commonConfig.component(p,t,u,nsdialog.config.size)}else{h=commonConfig.component(p,t,u)}var g="form-"+t+"-"+p.id;if(p.type=="hidden"){if(v.parent().hasClass("row row-close")){$("#"+g).val(p.value)}}if(u=="form"){var y=h.substring(h.indexOf("=")+1,h.indexOf(">"));h=h.substring(h.indexOf(">")+1,h.lastIndexOf("<"));inputContainerAttr=y.substring(y.indexOf('"')+1,y.length-1);v.closest(".form-td").attr("class",inputContainerAttr);v.closest(".form-td").html(h)}else if(u=="modal"){var b=h.substring(h.indexOf('class="')+7,h.indexOf(">"));b=b.substring(0,h.indexOf('"'));h=h.substring(h.indexOf(">")+1,h.lastIndexOf("<"));v.closest(".form-group ").attr("class",b);v.closest(".form-group ").html(h)}if(typeof p.id!="undefined"){if(typeof p.changeHandler!="undefined"){a.push(p)}if(p.type=="select"){r.push(p)}var P=p.readonly?p.readonly:false;if(p.type=="date"&&P==false){l.push(p)}if(p.type=="upload"&&P==false){o[p.id]=p}if(p.type=="text-btn"){n.push(p)}if(p.type=="select"){s.push(p)}if(p.type=="tree-select"){i[p.id]=p}if(p.type=="selectDate"){f[p.id]=p}}}formPlane.validateSelectPlane(t,s);if(!$.isEmptyObject(f)){formPlane.selectDatePlane(t,f)}formPlane.selectMorePlane(t);if(!$.isEmptyObject(i)){treeUI.componentSelectPlane(t,i)}if(n.length>0){formPlane.componentTextBtnHandler(t,n)}if(l.length>0){formPlane.componentDate(t,l)}if(!$.isEmptyObject(o)){formPlane.componentUpload(t,o)}var x=[];var I=[];for(refreshSel in r){var S="form-"+t+"-"+r[refreshSel].id;var k=false;if(typeof r[refreshSel].disabled!="undefined"){k=r[refreshSel].disabled;if(k==true){x.push(S)}else{I.push(S)}}}if(x.length>0){for(var D in x){$("#"+x[D]).attr("disabled",true)}}if(I.length>0){for(var D in x){$("#"+x[D]).attr("disabled",false)}}formPlane.componentHandler(t,a);$(".form-item.select select").selectBoxIt().on("open",function(){$(this).data("selectBoxSelectBoxIt").list.perfectScrollbar()});$(".form-item.selectplane select").selectBoxIt().on("open",function(){$(this).data("selectBoxSelectBoxIt").list.perfectScrollbar()})};formPlane.getInputContainerAndData=function(e,t){var a={};var r={};for(var l in formPlane.data){var a=formPlane.data[t].formInput;r=a[e];if(!$.isEmptyObject(r)){var o;if(r.type=="radio"||r.type=="checkbox"){var n="form-"+formPlane.data[t].id+"-"+r.id;o=$('input[name="'+n+'"]')}else{o=$("#form-"+formPlane.data[t].id+"-"+r.id)}return[o,r]}}if($.isEmptyObject(a)){nsalert("无法找到表单")}else{if($.isEmptyObject(r)){nsalert("无法找到已有组件数据")}}return false};formPlane.setValues=function(e,t){e=nsVals.clearNull(e);formPlane.fillValues(e,t)};formPlane.fillValues=function(e,t){var a=arguments[1]?arguments[1]:"";var r=a;if(r==""){for(var l in formPlane.data){a=l;r="form-"+l}}else{r="form-"+a}$.each(e,function(e,t){if(typeof formPlane.data[a].formInput[e]!="undefined"){var l=r+"-"+e;var o=t;var n=formPlane.data[a].formInput[e].type;var i="";var f="value";if(formPlane.data[a].formInput[e].valueField){f=formPlane.data[a].formInput[e].valueField}if(n=="radio"){i=formPlane.data[a].formInput[e].subdata}if(n=="checkbox"){i=formPlane.data[a].formInput[e].subdata}if(n==""){}if(n=="add-select-input"){var s=formPlane.data[a].formInput[e];var d="";for(var m=0;m<s.localDataArr.length;m++){if(s.localDataArr[m][s.localDataHiddenIDIndex]==t){d=s.localDataArr[m];break}}if(d!=""){var c=[];for(var v=0;v<s.columnData.length;v++){c.push(d[s.columnData[v]])}c.push(d[s.localDataHiddenIDIndex]);nsUI.addSearchInput.fillValue(c,s,$("#"+l))}else{if(t!=""||t!=undefined){nsalert(s.label+"返回值错误");nsUI.addSearchInput.clearValue(s,$("#"+l),true)}}}else if(n=="selectDate"){commonConfig.setSelectKeyValue(l,o,n)}else if(n=="selectSelect"){commonConfig.setSelectKeyValue(l,o,n)}else if(n=="selectText"){commonConfig.setSelectKeyValue(l,o,n)}else{commonConfig.setKeyValue(l,o,n,i,f);if(typeof formPlane.fillValid[a][l]!="undefined"){formPlane.fillValid[a][l]=true}}}})};formPlane.getAllFormData=function(e){var t={};for(var a in formPlane.data[e].formInput){var r;var l;var o=formPlane.data[e].formInput[a].type;r=a;if(o=="radio"){l=$("#form-"+e+' input[name="form-'+e+"-"+r+'"]:checked').val()}else if(o=="checkbox"){var n=$("#form-"+e+' input[name="form-'+e+"-"+r+'"]');if(n.length==1){if($(n).is(":checked")){l=1}else{l=0}}else{if($("#form-"+e+' input[name="form-'+e+"-"+r+'"]:checked').length>0){var i=[];$("#form-"+e+' input[name="form-'+e+"-"+r+'"]:checked').each(function(e){i.push($(this).val())});l=i}else{l=""}}}else{l=$("#form-"+e+" #form-"+e+"-"+r).val()}t[r]=l}return t};formPlane.getFormJSON=function(e,t){if(typeof e!="string"){nsalert("getFormJSON参数错误，必须提供config中form的id","error");return false}if($("#form-"+e).length==0){nsalert("表单ID："+e+" 不存在","error");return false}if(typeof t!="boolean"){t=true}function a(){var t=true;if($("#form-"+e).valid()==false){t=false}var a=true;var r=[];for(var l in formPlane.fillValid[e]){if(formPlane.fillValid[e][l]==false){a=false;r.push(l)}}if(a==false){for(var o in r){if($("#"+r[o]).parent().children().hasClass("has-error")){$("#"+r[o]).parent().find(".has-error").remove()}$("#"+r[o]).parent().append('<label class="has-error">必填</label>')}t=false}for(var n in formPlane.data[e].formInput){var i=formPlane.data[e].formInput[n];var f=i.type;switch(f){case"person-select":var s=nsUI.personSelect.isValid(nsForm.data[e].formInput[n]);if(s==false){t=false}break}}return t}function r(){var t={};for(var a in formPlane.data[e].formInput){var r;var l=formPlane.data[e].formInput[a];var o=l.type;switch(o){case"selectText":case"textSelect":t[a]=$("#form-"+e+" #form-"+e+"-"+a).val();var n=l.select.id;var i=l.text.id;var f="form-"+e+"-"+n;var s=$("#form-"+e+" #"+f).val().trim();t[n]=s;var d="form-"+e+"-"+i;var m=$("#form-"+e+" #"+d).val().trim();t[i]=m;break;case"selectDate":var c="form-"+e+"-";var v=l.caseSelect.id;var p=$("#form-"+e+" #"+c+v).val().trim();var i=l.text.id;var m=$("#form-"+e+" #"+c+i).val().trim();var u=l.date.id;var h=$("#form-"+e+" #"+c+u).val().trim();var g=l.daterange.id;var y=$("#form-"+e+" #"+c+g).children("span").text().trim();if(y){var b=y.split("至")[0];var P=y.split("至")[1];t[u]=b;t[g]=P}else{t[u]=h;
t[g]=""}t[v]=p;t[i]=m;t[a]=$("#form-"+e+" #form-"+e+"-"+a).val();break;case"selectSelect":var c="form-"+e+"-";var x=l.firstSelect.id;var I=l.secondSelect.id;var S=$("#form-"+e+" #"+c+x).val().trim();var k=$("#form-"+e+" #"+c+I).val().trim();t[x]=S;t[I]=k;t[a]=$("#form-"+e+" #form-"+e+"-"+a).val();break;case"radio":r=$("#form-"+e+' input[name="form-'+e+"-"+a+'"]:checked').val();t[a]=r;break;case"checkbox":var D=$("#form-"+e+' input[name="form-'+e+"-"+a+'"]');if(D.length==1){if($(D).is(":checked")){r=1}else{r=0}}else{if($("#form-"+e+' input[name="form-'+e+"-"+a+'"]:checked').length>0){var F=[];$("#form-"+e+' input[name="form-'+e+"-"+a+'"]:checked').each(function(e){F.push($(this).val())});r=F}else{r=""}}t[a]=r;break;case"add-select-input":r=$("#"+l.fullHiddenID).val();t[a]=r;break;case"tree-select":r=$("#form-"+e+" #form-"+e+"-"+a).attr("nodeId");t[a]=r;break;case"datetime":var w=$("#form-"+e+" #form-"+e+"-"+a+"-date").val().trim();var C=$("#form-"+e+" #form-"+e+"-"+a+"-time").val().trim();r=w+" "+C;t[a]=r;break;case"person-select":r=nsForm.data[e].formInput[a].resultPersonArr;t[a]=r;break;default:r=$("#form-"+e+" #form-"+e+"-"+a).val();t[a]=r;break}}return t}if(t){var l=a();if(l==false){nsalert("验证失败，请核实填写的内容");return false}else{return r()}}else{return r()}};
nsFrame.popContainer={};nsFrame.popDrag={};nsFrame.minContainer={};nsFrame.loading=function(){public_vars.$pageLoadingOverlay.removeClass("loaded")};nsFrame.loaded=function(){public_vars.$pageLoadingOverlay.addClass("loaded")};nsFrame.setRootObj=function(n){nsFrame.rootObj=n};nsFrame.showingPageArr=[];nsFrame.init=function(n){var e="root";var i="";function o(a){$.each(a,function(a,t){e=e+"-"+a;if(t==n){i=e}if(typeof t=="object"){o(t)}})}if(typeof n!="object"){nsalert("nsFrame.init()参数未定义","error");return false}if(typeof n.main!="function"){nsalert("没有找到main方法，无法完成初始化","error");return false}n.main();if(typeof n.config=="object"){return false;var a=n.config.pageCode;a=a.replace(/\./g,"-");var t=$("#"+a+"-map").val();var r=nsCustomConfig.initConfig(n.config,t);for(var s=0;s<n.config.nav.length;s++){var p=n.config.nav[s];p.btns=r[p.id];nsNav.init(p)}nsNav.initConfigBtn(n.config,n.config.pageCode)}else{nsFrame.currentConfig=false}nsFrame.showingPageArr.push(n)};nsFrame.configDefault=function(n){if(typeof n.container=="undefined"){n.container="container"}if(typeof n.filterContainer=="undefined"){n.filterContainer="body"}};nsFrame.loadMeun=nsFrame.loadMenu;nsFrame.loadMenu=function(n,e,i,o){var a=e.split("-");for(var t=0;t<a.length;t++){a[t]=parseInt(a[t])}mainmenu.initNav(a[0],a[1]);mainmenu.setCurrentMenu(a[0],a[1]);if(i=="true"){mainmenu.setMin(true)}else if(i=="false"){mainmenu.setMin(false)}if(o){if(typeof o=="string"){o=JSON.parse(o)}var r="";$.each(o,function(n,e){r+=n+"="+e});if(n.indexOf("?")==-1){n+="?"+r}else{n+=r}}nsFrame.loadPage(n)};nsFrame.loadPage=function(n){var e={url:n,filterContainer:"container",container:"container"};nsFrame.initPage(e)};nsFrame.popPage=function(n){var e={url:n};nsFrame.popPageConfig(e)};nsFrame.popPageChange=function(n,e){var i={url:n,filterContainer:"container",container:"#nsPopContainer .content"};nsFrame.initPage(i,"popPageChange")};nsFrame.popPageConfig=function(n){var e=nsFrame.popContainerInit(n);nsFrame.popPageShow(e)};nsFrame.popContainerInit=function(n){if(n.url){if($.isEmptyObject(nsFrame.popContainer)){$("body").append('<div id="nsPopContainer" class="nspop-container page-container"></div>');nsFrame.popContainer.init=true;nsFrame.popContainer.windows={};nsFrame.popContainer.length=0}}else{nsalert("弹出页面的URL未指定","error");return false}var e={};e.url=n.url;var i;if(n.width){if(typeof n.width=="number"){i=n.width;e.width=n.width+"px"}else{if(n.width=="default"){i=960;e.width="960px"}else if(n.width=="auto"){i=$(window).width()-100;e.width=i+"px"}else{var o=n.width;if(o.indexOf("px")>=0){i=parseInt(o.substr(0,o.indexOf("px")))}else if(o.indexOf("%")>=0){i=parseInt(o.substr(0,o.indexOf("%")));i=parseInt($(window).width()*i/100)}e.width=o}}}else{i=$(window).width()-100;e.width=$(window).width()-100+"px"}e.left=parseInt(($(window).width()-i)/2)+"px";e.top="50px";if(n.height){if(typeof n.height=="number"){e.height=n.height+"px"}else{e.height=n.height}}else{e.height="auto"}if(n.title){e.title=n.title}else{e.title=""}if(typeof n.closeHandler=="function"){e.closeHandler=n.closeHandler}else{e.closeHandler=function(){}}if(typeof n.loadedHandler=="function"){e.loadedHandler=n.loadedHandler}else{e.loadedHandler=function(){}}if(typeof n.data=="object"){e.data=n.data}if(n.bg){e.bg=n.bg}else{e.bg=true}return e};nsFrame.popPageShow=function(n,e,i){if(!nsFrame.popContainer.init){return false}var o;if(e){o=e}else{function a(){var n="container-"+Math.floor(Math.random()*1e10+1);if(nsFrame.popContainer.windows[o]){n=a()}return n}o=a()}var t=0;$.each(nsFrame.popContainer.windows,function(n,e){t++});n.id=o;n.zindex=t;nsFrame.popContainer.length=t+1;nsFrame.popContainer.windows[o]={};nsFrame.popContainer.windows[o].config=n;var r=nsFrame.getWindowHTML(n,o);$("#nsPopContainer").append(r);if(n.bg){if($("#nsPopContainer").find(".nspop-bg").length==0){$("#nsPopContainer").append('<div class="nspop-bg"></div>')}}$("#nsPopContainer #"+o+" .window-close").on("click",function(n){var e=$(this).closest(".nswindow").attr("id");nsFrame.popPageCloseByID(e)});$("#nsPopContainer #"+o+" .window-min").on("click",function(n){var e=$(this).closest(".nswindow").attr("id");nsFrame.popPageMinByID(e)});var s={containerID:o,url:n.url,filterContainer:"container",container:"#"+o+" .content"};nsFrame.initPage(s,"popPageShow",i)};nsFrame.popPageCloseByID=function(n){$("#nsPopContainer #"+n+" .window-close").off("click");$("#nsPopContainer #"+n).remove();nsFrame.popContainer.windows[n].config.closeHandler();delete nsFrame.popContainer.windows[n];nsFrame.popContainer.length-=1;if(nsFrame.popContainer.length==0){if($("#nsPopContainer").find(".nspop-bg").length>0){$("#nsPopContainer .nspop-bg").remove()}}};nsFrame.popPageClose=function(){if($.isEmptyObject(nsFrame.popContainer.windows)){return false}$.each(nsFrame.popContainer.windows,function(n,e){var i=n;nsFrame.popContainer.windows[i].config.closeHandler()});$("#nsPopContainer .window-close").off("click");$("#nsPopContainer").html("");nsFrame.popContainer.windows={};nsFrame.popContainer.length=0};nsFrame.popPageMinByID=function(n){if($.isEmptyObject(nsFrame.minContainer)){nsFrame.minContainer.windows={};nsFrame.minContainer.length=0;$("body").append('<div id="nsMinContainer" class="nsmin-container"><div class="blocks"></div></div>')}var e=nsFrame.popContainer.windows[n].config.title;nsFrame.minContainer.windows[n]={};nsFrame.minContainer.windows[n].id=n;nsFrame.minContainer.windows[n].html=$("#nsPopContainer #"+n).html();var i={};var o=$("#nsPopContainer #"+n+" .content [id]");for(var a=0;a<o.length;a++){if($(o[a]).val()!=""){i[$(o[a]).attr("id")]={value:$(o[a]).val(),nstype:$(o[a]).attr("nstype")}}}o=null;nsFrame.minContainer.windows[n].values=i;nsFrame.minContainer.windows[n].config=nsFrame.popContainer.windows[n].config;nsFrame.minContainer.length=nsFrame.minContainer.length+1;$("#nsPopContainer #"+n+" .window-min").off("click");$("#nsPopContainer #"+n+" .window-close").off("click");$("#nsPopContainer #"+n).remove();nsFrame.popContainer.windows[n]="";delete nsFrame.popContainer.windows[n];nsFrame.popContainer.length-=1;if(nsFrame.popContainer.length==0){if($("#nsPopContainer").find(".nspop-bg").length>0){$("#nsPopContainer .nspop-bg").remove()}}$("#nsMinContainer .blocks").append('<div wid="'+n+'"  class="min-block">'+e+"</div>");$('#nsMinContainer [wid="'+n+'"]').on("click",function(n){var e=$(n.target).attr("wid");nsFrame.minOpenPage(e)})};nsFrame.minOpenPage=function(n){var e=nsFrame.minContainer.windows[n].config;var i=nsFrame.minContainer.windows[n].values;nsFrame.popPageShow(e,n,i);$('#nsMinContainer [wid="'+n+'"]').off("click");$('#nsMinContainer [wid="'+n+'"]').remove();delete nsFrame.minContainer.windows[n];nsFrame.minContainer.length-=1};nsFrame.getWindowHTML=function(n,e){var i=n.height=="auto"?"":"height:"+n.height+"; ";var o=$(".sidebar-menu").width();var a="width:"+n.width+"; ";var t,r;var s,p;if(nsFrame.popContainer.length>=2){$.each(nsFrame.popContainer.windows,function(i,o){if(i!=e){t=$("#"+i).position().left;r=$("#"+i).position().top;s=t+"px"==n.left?t+30+"px":n.left;p=r+"px"==n.top?r+30+"px":n.top}})}if(typeof s=="undefined"){s=n.left;p=n.top}if($(document).scrollTop()>0){if($(window).height()!=$(document).height()){var d=$(document).height()-$(window).height();if(typeof p=="string"){if(p.indexOf("px")>-1){p=p.substr(0,p.length-2);p=Number(p)}}p=p+d+"px"}}s="left:"+s+"; ";p="top:"+p+"; ";var f=n.zindex+801;var l="z-index:"+(n.zindex+801)+"; ";var m=n.title?n.title:"";var c='style="'+i+a+s+p+l+'"';var g='<div class="window-title">'+m+'</div><div class="window-min"><i class="fa fa-minus"></i></div><div class="window-close">x</div><div class="content"></div>';var w='<div id="'+e+'" class="nswindow main-content table-content" '+c+">"+g+"</div>";return w};nsFrame.initPage=function(n,e,i){var o;if(e=="popPageShow"){o=n.containerID+" .content"}else if(e=="popPageChange"){o=n.containerID+" .content"}else{nsFrame.configDefault(n);o="container-more-"+Math.floor(Math.random()*1e10+1);$(n.container).attr("id",o)}$.ajax({url:n.url,data:"",cache:false,success:function(a){dataObj=a;var t=a;t=nsFrame.filterCode(t,n.filterContainer);var r=$("#"+o);r.html(t);r.find("#dialog-more").remove();r.find("#placeholder-popupbox").remove();r.find(".page-loading-overlay").remove();r.find(".settings-pane").remove();if(e=="popPageShow"||e=="popPageChange"){}if(e=="popPageShow"){if(nsFrame.popContainer.windows[n.containerID].config.height=="auto"){var s=r.height();if(s<300){s=300}else if(s>$(window).height()-100){s=$(window).height()-100}var p=" height:"+s+"px;";var d=$("#"+n.containerID).attr("style")+p;$("#"+n.containerID).attr("style",d)}if(typeof i!="undefined"){$.each(i,function(n,e){commonConfig.setKeyValue(n,e.value,e.nstype)})}if(typeof nsFrame.popContainer.windows[n.containerID].config.loadedHandler=="function"){var f=nsFrame.popContainer.windows[n.containerID].config.loadedHandler;f()}}}})};nsFrame.filterCode=function(n,e){var i=n.substr(n.indexOf("<"+e),100);i=i.substring(0,i.indexOf(">")+1);var o=n.substr(n.lastIndexOf(e+">")-100+e.length+1,100);o=o.substr(o.lastIndexOf("<"),o.length);n=n.substring(n.indexOf(i)+i.length,n.lastIndexOf(o));return n};nsFrame.loadMenuNew=function(n,e,i,o){var a=e.split("-");for(var t=0;t<a.length;t++){a[t]=parseInt(a[t])}mainmenu.initNavNew(a[0],a[1]);mainmenu.setCurrentMenu(a[0],a[1]);if(i=="true"){mainmenu.setMin(true)}else if(i=="false"){mainmenu.setMin(false)}if(o){if(typeof o=="string"){o=JSON.parse(o)}var r="";$.each(o,function(n,e){r+=n+"="+e});if(n.indexOf("?")==-1){n+="?"+r}else{n+=r}}nsFrame.loadPage(n)};var demos={};demos.form={};demos.frame={};demos.ui={};demos.table={};nsFrame.setRootObj(demos);
nsLayout.data={};nsLayout.convertOptions=function(t){if(typeof t=="undefined"){return{position:"default"}}else{return nsVals.convertOptions(t)}};nsLayout.setNavDefaultsOptions=function(t){};nsLayout.setPanelDefaultOptions=function(t){var a=t;if(t.position){}else{a.position="default"}if(typeof a.col=="undefined"){a.col=12}a.beforeHeight=this.height;a.rowId=this.rowNum;a.colId=this.colNum-this.rowNum*12;this.colNum+=a.col;if(this.colNum%12==0){this.rowNum++;if(a.height){if(a.height!="auto"){this.height+=a.height}}else{this.height+=30}}return a};nsLayout.setPanelTabsDefaultOptions=function(t){var a=t.container.children("tab");if(a.length>0){t.tab={};for(var n=0;n<a.length;n++){var e=$(a[n]);var o={};o.container=e;if(typeof e.attr("ns-id")=="undefined"){o.nsId="tab"+n;o.id=t.id+"-"+o.nsId}else{o.nsId=e.attr("ns-id");o.id=t.id+"-"+o.nsId}o.optionsStr=e.attr("ns-options");o.options=nsLayout.convertOptions(o.optionsStr);if(typeof o.options.title=="undefined"){o.options.title=o.nsId}t.tab[o.nsId]=o}}return t};nsLayout.init=function(layoutID,pageDom){if(typeof layoutID!="string"){nsalert("参数只能是ID字符串","error");return false}var $container=$("#"+layoutID);if($.isEmptyObject($container)||$container.length==0){nsalert("nsLayout.init()参数："+layoutID+" 错误，无法找到指定ID对应的DOM","error");return false}nsLayout.data[layoutID]={};var layoutData=nsLayout.data[layoutID];layoutData.id=layoutID;layoutData.container=$container;layoutData.optionsStr=$container.attr("ns-options");layoutData.options=nsLayout.convertOptions(layoutData.optionsStr);if(layoutData.options.custom){layoutData.customConfig={}}else{layoutData.customConfig=false}var $nav=$container.children("nav");if($nav.length>1){nsalert("主导航只能有一个","error");return false}else if($nav.length==1){layoutData.nav={};layoutData.nav.nsId=$nav.attr("ns-id");layoutData.nav.id=layoutData.id+"-"+layoutData.nav.nsId;layoutData.nav.initContainer=$nav;if(typeof $nav.attr("ns-config")!="undefined"){try{var package=$container.attr("ns-package");var config=$nav.attr("ns-config");if(config.indexOf("nav:")){config=config.replace(/nav:/,"")}config=$.trim(config);if(package){config=package+"."+config}layoutData.nav.config=eval(config)}catch(t){var errInfo="导航栏-按钮参数错误："+t.message+"\n\n";nsalert(errInfo,"error")}}layoutData.nav.options=nsLayout.convertOptions($nav.attr("ns-options"));nsLayout.initNav(layoutData)}else{}var htmlCodeArr=[];var planeRowsArr=[];this.rowNum=0;this.colNum=0;this.height=0;var panels=$container.children("panel");if(panels.length<1){}else{layoutData.panels={};for(var panelIndex=0;panelIndex<panels.length;panelIndex++){var $panel=$(panels[panelIndex]);var panel={};panel.nsId=$panel.attr("ns-id");panel.id=layoutData.id+"-"+panel.nsId;panel.container=$panel;panel.optionsStr=$panel.attr("ns-options");panel.options=nsLayout.convertOptions(panel.optionsStr);panel.options=nsLayout.setPanelDefaultOptions(panel.options);panel.config=nsLayout.getPanelConfig($container,$panel);layoutData.panels[panel.id]=panel;var outputPanelHtml=nsLayout.getPanelHtml(layoutData,panel);panel.beforeHeight=this.height;htmlCodeArr.push(outputPanelHtml)}}var tabs=$container.children("tabs");if(tabs.length<1){}else{layoutData.tabs={};if(typeof layoutData.panels=="undefined"){layoutData.panels={}}for(var tabsI=0;tabsI<tabs.length;tabsI++){var $tabs=$(tabs[tabsI]);var tabs={};tabs.nsId=$tabs.attr("ns-id");tabs.id=layoutData.id+"-"+tabs.nsId;tabs.container=$tabs;tabs.optionsStr=$tabs.attr("ns-options");tabs.options=nsLayout.convertOptions(tabs.optionsStr);tabs.options=nsLayout.setPanelDefaultOptions(tabs.options);tabs=nsLayout.setPanelTabsDefaultOptions(tabs);layoutData.tabs[tabs.nsId]=tabs;$.each(tabs.tab,function(t,a){var n=tabs.tab[t];n.config=nsLayout.getPanelConfig($container,a.container);layoutData.panels[n.id]=n});var outputTabsHtml=nsLayout.getTabsHtml(tabs);htmlCodeArr.push(outputTabsHtml)}}var outputHTMLCode="";if(htmlCodeArr.length>0){for(var codeI=0;codeI<htmlCodeArr.length;codeI++){outputHTMLCode+=htmlCodeArr[codeI]}var rowClass="";if(layoutData.options.type){rowClass=layoutData.options.type}layoutData.rowTotal=this.rowNum;layoutData.colTotal=this.colNum;delete this.rowNum;delete this.colNum;delete this.height;outputHTMLCode='<div class="row layout-planes '+rowClass+'" id="'+layoutData.id+'">'+outputHTMLCode+"</div>";$container.after(outputHTMLCode);if(layoutData.options.custom){layoutData.customConfig.pageCode=layoutData.id;$.each(layoutData.panels,function(panelID,panelData){if(panelData.config){try{var configObj={};configObj=eval(panelData.config.value);configObj.id=panelData.id;if(panelData.config.type=="form"){if(layoutData.customConfig.formJson){}else{layoutData.customConfig["formJson"]=[]}layoutData.customConfig.formJson.push(configObj)}else if(panelData.config.type=="table"){if(layoutData.customConfig.tableJson){}else{layoutData.customConfig["tableJson"]=[];layoutData.customConfig["tableConfig"]={}}var columnUser={};columnUser.id="table-"+configObj.id;columnUser.configTitle=configObj.data.configTitle;columnUser.columns=configObj.columns;layoutData.customConfig.tableConfig[columnUser.id]=configObj;layoutData.customConfig.tableJson.push(columnUser);var panelHeight=$("#"+panelData.id).height();var tabelHtml='<div class="table-responsive" style="height:'+panelHeight+'px;">'+'<table cellspacing="0" class="table table-singlerow table-hover table-bordered table-striped" '+'id="table-'+configObj.id+'">'+"</table>"+"</div>";$("#"+configObj.id+" .panel-body").html(tabelHtml)}else if(panelData.config.type=="tree"){if(layoutData.customConfig.treeJson){}else{layoutData.customConfig["treeJson"]={}}var treeHtml='<div id="tree-'+configObj.id+'"></div>';$("#"+configObj.id+" .panel-body").html(treeHtml);configObj.id="tree-"+panelData.id;configObj.isLayout=true;nsTree.init(configObj)}}catch(t){var errInfo="面板"+panelData.nsId+" config参数错误：<br>"+t.message+"\n\n";nsalert(errInfo,"error")}}});nsCustomConfig.init(layoutData.customConfig)}else{$.each(layoutData.panels,function(panelID,panelData){if(panelData.config){var configObj;configObj=eval(panelData.config.value);configObj.id=panelData.id;if(panelData.config.type=="form"){nsForm.init(configObj,".panel-body")}else if(panelData.config.type=="table"){configObj.data.tableID="table-"+panelData.id;var containerConfig={};containerConfig.height=$("#"+panelData.id).height();var tabelHtml='<div class="table-responsive" style="height:'+containerConfig.height+'px;">'+'<table cellspacing="0" class="table table-singlerow table-hover table-bordered table-striped" '+'id="table-'+panelData.id+'">'+"</table>"+"</div>";$("#"+panelData.id+" .panel-body").html(tabelHtml);baseDataTable.init(configObj.data,configObj.columns,configObj.ui,configObj.btns,containerConfig)}else if(panelData.config.type=="tree"){if(layoutData.customConfig.treeJson){}else{layoutData.customConfig["treeJson"]={}}var treeHtml='<div id="tree-'+configObj.id+'"></div>';$("#"+panelData.id+" .panel-body").html(treeHtml);configObj.id="tree-"+panelData.id;configObj.isLayout=true;nsTree.init(configObj)}}})}nsLayout.resizeHandler()}};nsLayout.getPanelConfig=function(t,a){if(typeof a.attr("ns-config")!="undefined"){var n=t.attr("ns-package");var e=a.attr("ns-config");if(e.indexOf("nav:")){e=e.replace(/nav:/,"")}var o=e.substr(0,e.indexOf(":"));var i=e.substr(e.indexOf(":")+1,e.length);o=$.trim(o);i=$.trim(i);n=$.trim(n);if(n){i=n+"."+i}var s={type:o,value:i};return s}else{return false}};nsLayout.resizeHandler=function(){$(window).resize(function(){var t=$(".nspanel.autoHeight");for(var a=0;a<t.length;a++){var n=$(t[a]);var e=n.attr("style");var o=e.substr(e.indexOf("height:")+7,10);o=o.substr(0,o.indexOf("px"));if(parseInt(o)>0){var i=nsVals.containerHeight();var s=n.parent();var l=nsLayout.data[s.attr("id")];var r=l.panels[n.attr("id")];if(l.options.type=="nospace"){i=i-r.options.beforeHeight-2}else{i=i-r.options.beforeHeight-20-r.options.rowId*10}if(typeof r.options.afterHeight=="number"){if(l.options.type=="nospace"){i=i-r.options.afterHeight}else{var f=0;if(typeof r.options.afterRow=="number"){f=r.options.afterRow}i=i-r.options.afterHeight-f*10}}e=e.replace("height:"+o,"height:"+i);n.attr("style",e)}}})};nsLayout.initNav=function(t){var a="";if(t.nav.options.position=="default"){a='<div class="page-title nav-form" id="'+t.nav.id+'"></div>'}t.container.before(a);if(t.nav.config){t.nav.config.id=t.nav.id;if(t.options.custom){t.customConfig.nav=[t.nav.config]}else{nsNav.init(t.nav.config)}}};nsLayout.getPanelHtml=function(t,a,n){var e="";var o="";var i="";if(a.options.height){if(a.options.height=="auto"){i=" autoHeight";var s=nsVals.containerHeight();if(t.options.type=="nospace"){s=s-this.height-2}else{s=s-this.height-20-a.options.rowId*10}if(typeof a.options.afterHeight=="number"){if(t.options.type=="nospace"){s=s-a.options.afterHeight}else{var l=1;if(typeof a.options.afterRow=="number"){l=a.options.afterRow}s=s-a.options.afterHeight-l*10}}o+="height:"+s+"px; "}else if(typeof a.options.height=="number"){o+="height:"+a.options.height+"px; "}else{o+="height:"+a.options.height+"; "}}if(a.options.width){if(typeof a.options.width=="number"){o+="width:"+a.options.width+"px; "}else{o+="width:"+a.options.width+"; "}}var r=" nspanel";if(n){r+=" "+n}var f="";if(a.options.border){f=" border-"+a.options.border}var p="col-xs-12 col-sm-"+a.options.col;var u="panel-form";var c="";if(a.config.type){c=" layout-"+a.config.type}switch(a.config.type){case"table":u=u+" panel-table";break}var d='<div class="panel panel-default '+u+'"><div class="panel-body"></div></div>';if(a.options.position=="default"){e='<div id="'+a.id+'" class="'+p+r+c+f+i+'" style="'+o+'" >'+d+"</div>"}return e};nsLayout.initPanels=function(t,a){var n="";if(t.options.size=="standard"){n="standard"}var e='<div class="row '+n+'">'+a+"</div>";t.container.after(e)};nsLayout.getPanelTabsHtml=function(t){var a="";var n="";if(t.tab){var e="";var o="";var i=0;$.each(t.tab,function(t,a){var n="";var s="";if(i==0){n=' class="active"';s=" active";i++}e+='<div class="tab-pane'+s+'" id="'+a.id+'"></div>';o+="<li"+n+'><a href="#'+a.id+'" data-toggle="tab">'+a.options.title+"</a></li>"});n='<div class="panel-options">'+'<ul class="nav nav-tabs">'+o+"</ul>"+"</div>";e='<div class="panel-body">'+'<div class="tab-content">'+e+"</div>"+"</div>";a+=e}if(t.options.title){n='<div class="panel-heading">'+'<h3 class="panel-title">'+t.options.title+"</h3>"+n+"</div>"}a='<div class="panel panel-default panel-tabs" id="'+t.id+'">'+n+a+"</div>";var s="";if(t.options.bg=="none"){s="nspanel-nobg"}var l="col-xs-12 col-sm-"+t.options.col;a='<div class="'+l+"  nspanel nspanel-tab "+s+'">'+a+"</div>";return a};nsLayout.getTabsHtml=function(t){var a="";var n="";if(t.tab){var e="";var o="";var i=0;$.each(t.tab,function(t,a){var n="";var s="";if(i==0){n=' class="active"';s=" active";i++}e+='<div class="tab-pane'+s+'" id="'+a.id+'"><div class="panel panel-default panel-form"><div class="panel-body"></div></div></div>';o+="<li"+n+'><a href="#'+a.id+'" data-toggle="tab">'+a.options.title+"</a></li>"});o='<ul class="nav nav-tabs nav-tabs-justified">'+o+"</ul>";var s="";if(t.options.height){s="height:"+(t.options.height-30)+"px;"}e='<div class="tab-content" style="'+s+'">'+e+"</div>";a+=e}a=o+a;return a};
function getHeight(t){var e=$(t);if(e.length>=1){var n=0;n+=e.height();n+=parseInt(e.css("padding-top"));n+=parseInt(e.css("padding-bottom"));n+=parseInt(e.css("border-top-width"));n+=parseInt(e.css("border-bottom-width"));n+=parseInt(e.css("margin-top"));n+=parseInt(e.css("margin-bottom"));if(isNaN(n)){n=0}return n}else{return 0}}function getContainerHeight(t){var e=$(t);if(e.length>=1){var n=0;n+=e.height();n+=parseInt(e.css("padding-top"));n+=parseInt(e.css("padding-bottom"));n+=parseInt(e.css("border-top-width"));n+=parseInt(e.css("border-bottom-width"));if(isNaN(n)){n=0}return n}else{return 0}}function getMainHeight(){var t=0;t+=getHeight(".navbar.user-info-navbar");t+=getHeight("div.page-title");t+=getHeight("footer.main-footer");t+=getHeight("#panel-menus .panel-heading");t+=parseInt($(".main-content").css("padding-top"));var e=$(window).height()-t;return e}
var btnGroupIndex=0;commonConfig.getBtn=function(i,a,f,e,s){var n=typeof arguments[3]!="undefined"?arguments[3]:true;var c=typeof arguments[4]!="undefined"?arguments[4]:true;var l="";if(typeof i.type=="undefined"){if(a=="modal"){l="btn btn-info"}else if(a=="form"){l="btn btn-white"}else if(a=="table"){l="btn btn-white";d=""}}else{l="btn btn-"+i.type}var t="";var d="";var o="";var r="";if(typeof i.columnID!="undefined"){o='columnID="'+i.columnID+'"'}if(typeof i.handler!="undefined"){if(typeof i.handler=="function"){d="";t=' fid="'+f+'"'}else{if(i.handler.indexOf("(")>-1){if(i.handler.indexOf("'")>-1){d=' onclick="'+i.handler+';"'}else{d=" onclick='"+i.handler+";'"}}else{d=' onclick="'+i.handler+'();"'}}if(typeof i.isReturn=="boolean"){if(i.isReturn){r='isReturn="true"'}}}var x="";if(typeof i.iconCls=="undefined"){if(i.type=="success"){x='<i class="fa-check"></i> '}else if(i.type=="warning"){x='<i class="fa-remove"></i> '}var b=i.text;if(b.indexOf("查看")>=0){x='<i class="fa-file-text-o"></i> '}if(b.indexOf("库存")>=0){x='<i class="fa-file-text-o"></i> '}if(b.indexOf("重置")>=0){x='<i class="fa-recycle"></i> '}if(b.indexOf("明细")>=0){x='<i class="fa-file-text-o"></i> '}if(b.indexOf("表格")>=0){x='<i class="fa-table"></i> '}if(b.indexOf("代码")>=0||b.indexOf("模板")>=0){x='<i class="fa-code"></i> '}if(b.indexOf("转账")>=0){x='<i class="fa-exchange"></i> '}if(b.indexOf("合同")>=0){x='<i class="fa-file-text-o"></i> '}if(b.indexOf("拍照")>=0){x='<i class="fa-camera"></i> '}if(b.indexOf("照片")>=0){x='<i class="fa-file-image-o"></i> '}if(b.indexOf("图片")>=0){x='<i class="fa-file-image-o"></i> '}if(b.indexOf("条码")>=0){x='<i class="fa-barcode"></i> '}if(b.indexOf("扫码")>=0){x='<i class="fa-barcode"></i> '}if(b.indexOf("上传")>=0){x='<i class="fa-upload"></i> '}if(b.indexOf("下载")>=0){x='<i class="fa-download"></i> '}if(b.indexOf("?")>=0){x='<i class="fa-question-circle-o"></i>'}if(b.indexOf("编号")>=0){x='<i class="fa-list-ol"></i> '}if(b.indexOf("打印")>=0){x='<i class="fa-print"></i> '}if(b.indexOf("价格")>=0){x='<i class="fa-rmb"></i> '}if(b.indexOf("流程图")>=0){x='<i class="fa-sitemap"></i> '}if(b.indexOf("环节")>=0){x='<i class="fa-cogs"></i> '}if(b.indexOf("删除")>=0){x='<i class="fa-trash"></i> '}if(b.indexOf("搜索")>=0){x='<i class="fa-search"></i> '}if(b.indexOf("清除")>=0){x='<i class="fa-trash"></i> '}if(b.indexOf("导入")>=0){x='<i class="fa-sign-in"></i> '}if(b.indexOf("导出")>=0){x='<i class="fa-sign-out"></i> '}if(b.indexOf("结算")>=0){x='<i class="fa-calculator "></i> '}if(b.indexOf("更多")>=0){x='<i class="fa-ellipsis-h"></i> '}if(b.indexOf("上移")>=0){x='<i class="fa-arrow-up"></i> '}if(b.indexOf("下移")>=0){x='<i class="fa-arrow-down"></i> '}if(b.indexOf("升序")>=0){x='<i class="fa-long-arrow-up"></i> '}if(b.indexOf("降序")>=0){x='<i class="fa-long-arrow-down"></i> '}if(b.indexOf("置顶")>=0){x='<i class="fa-fast-backward fa-rotate-90 fa-fontsize12"></i> '}if(b.indexOf("置底")>=0){x='<i class="fa-fast-backward fa-rotate-270 fa-fontsize12"></i> '}if(b.indexOf("窗体")>=0){x='<i class="fa-calculator"></i> '}if(b.indexOf("更多")>=0){x='<i class="fa-ellipsis-h"></i> '}if(b.indexOf("附件")>=0){x='<i class="fa-paperclip"></i> '}if(b.indexOf("分配")>=0){x='<i class="fa-random"></i> '}if(b.indexOf("项目")>=0){x='<i class="fa-cube"></i> '}if(b.indexOf("选中")>=0){x='<i class="fa-mouse-pointer"></i> '}if(b.indexOf("刷新")>=0){x='<i class="fa-refresh"></i> '}if(b.indexOf("回退")>=0){x='<i class="fa-arrow-left"></i> '}if(b.indexOf("前进")>=0){x='<i class="fa-arrow-right"></i> '}if(b.indexOf("返回")>=0){x='<i class="fa-mail-reply"></i> '}if(b.indexOf("上一步")>=0){x='<i class="fa-arrow-left"></i> '}if(b.indexOf("下一步")>=0){x='<i class="fa-arrow-right"></i> '}if(b.indexOf("复制")>=0){x='<i class="fa-clone"></i> '}if(b.indexOf("选择")>=0){x='<i class="fa-mouse-pointer"></i> '}if(b.indexOf("签名")>=0){x='<i class="fa-pencil"></i> '}if(b.indexOf("生成")>=0){x='<i class="fa-retweet"></i> '}if(b.indexOf("说明")>=0){x='<i class="fa-file-text-o"></i> '}if(b.indexOf("重选")>=0){x='<i class="fa-mouse-pointer"></i> '}if(b.indexOf("重选")>=0){x='<i class="fa-recycle"></i> '}if(b.indexOf("启用")>=0){x='<i class="fa-repeat"></i> '}if(b.indexOf("作废")>=0){x='<i class="fa-ban"></i> '}if(b.indexOf("维护")>=0){x='<i class="fa-wrench"></i> '}if(b.indexOf("默认")>=0){x='<i class="fa-check-square"></i> '}if(b.indexOf("意见")>=0){x='<i class="fa-comments-o"></i> '}if(b.indexOf("详细")>=0){x='<i class="fa-file-text-o"></i> '}if(b.indexOf("说明")>=0){x='<i class="fa-file-text-o"></i> '}if(b.indexOf("录入")>=0){x='<i class="fa-pencil"></i> '}if(b.indexOf("列表")>=0){x='<i class="fa-list"></i> '}if(b.indexOf("参数")>=0){x='<i class="fa-database"></i> '}if(b.indexOf("信息")>=0){x='<i class="fa-file-text-o"></i> '}if(b.indexOf("检测")>=0){x='<i class="fa-cogs"></i> '}if(b.indexOf("确定")>=0){x='<i class="fa-check"></i> '}if(b.indexOf("确认")>=0){x='<i class="fa-check"></i> '}if(b.indexOf("取消")>=0){x='<i class="fa-ban"></i> '}if(b.indexOf("运行")>=0){x='<i class="fa-play"></i> '}if(b.indexOf("保存")>=0){x='<i class="fa-save"></i> '}if(b.indexOf("统计")>=0){x='<i class="fa-bar-chart"></i> '}if(b.indexOf("支付")>=0){x='<i class="fa-rmb"></i> '}}else{if(i.iconCls!=""){x='<i class="'+i.iconCls+'"></i> '}}switch(i.text){case"添加附件":x='<i class="fa-upload"></i> ';break;case"合同正文":x='<i class="fa-file-text-o"></i> ';break}switch(i.text){case"修改":l="btn btn-info";x='<i class="fa-edit"></i> ';break;case"作废":case"删除":l="btn btn-warning";x='<i class="fa-trash"></i> ';break;case"保存新增":case"保存":l="btn btn-success";x='<i class="fa-save"></i> ';break;case"提交":l="btn btn-info";x='<i class="fa-cloud-upload"></i> ';break;case"批准":case"记账":case"支付":l="btn btn-info";x='<i class="fa-check"></i> ';break;case"撤销":l="btn btn-warning";x='<i class="fa-rotate-left"></i> ';break;case"取消":case"作废":case"清除":l="btn btn-white";x='<i class="fa-ban"></i> ';break;case"新增":case"新建":case"添加":l="btn btn-success";x='<i class="fa-plus"></i> ';break;case"编辑":l="btn btn-info";x='<i class="fa-wrench"></i> ';break;case"复制":l="btn btn-info";x='<i class="fa-copy"></i> ';break;case"搜索":l="btn btn-info";x='<i class="fa-search"></i> ';break;case"查看":l="btn btn-info";x='<i class="fa-eye"></i> ';break;case"打开":l="btn btn-info";x='<i class="fa-folder-open"></i>';break;case"查询":l="btn btn-info";x='<i class="fa-search"></i>';break;case"项目选择":l="btn btn-info";x='<i class="fa-tags"></i>';break}x=n?x:"";textHtml=c?"<span>"+i.text+"</span>":"";var O="";var u="";if(i.configShow==false&&typeof i.configShow=="boolean"){l=l+" hidden"}if(a=="table"&&e==true&&s==false){l=l+"  btn-icon"}var p="";if(typeof i.disabled!="undefined"){p=i.disabled}if(i.subdata){u='<ul class="dropdown-menu">';var h="";var w="";for(var k in i.subdata){if(typeof i.subdata[k].handler=="function"){h="";w=' fid="'+btnGroupIndex+'"'}else{w="";if(i.subdata[k].handler.indexOf("(")>-1){if(i.subdata[k].handler.indexOf("'")>-1){h=' onclick="'+i.subdata[k].handler+';"'}else{h=" onclick='"+i.subdata[k].handler+";'"}}else{h=' onclick="'+i.subdata[k].handler+'();"'}}btnGroupIndex++;u+="<li "+h+w+r+">"+'<a href="javascript:void(0);">'+i.subdata[k].text+"</a>"+"</li>"}u+="</ul>";O='<div class="btn-group">'+'<button type="button" class="'+l+' dropdown-toggle" data-toggle="dropdown">'+i.text+'<span class="caret"></span>'+"</button>"+u}else if(i.html){O='<div class="btn-group">'+'<button type="button" class="'+l+' dropdown-toggle" data-toggle="dropdown">'+i.text+'<span class="caret"></span>'+"</button>"+i.html}else{O='<button type="button" class="'+l+'" '+p+" "+d+t+r+o+">"+x+textHtml+"</button>"}return O};
commonConfig.converSelectHtml=function(e){var t="";var a=[];if(e.subdata){a=e.subdata}else{var i=e.action?e.action:"POST";$.ajax({url:e.url,data:e.data,type:i,dataType:"json",async:false,success:function(e){a=e}})}for(var l=0;l<a.length;l++){var s=e.valueField?e.valueField:"value";var r=e.textField?e.textField:"text";var d="";if(e.value){d=a[l][s]==e.value?"selected":""}else{d=a[l].selected?"selected":""}t+='<option value="'+a[l][s]+'" '+d+">"+a[l][r]+"</option>"}return t};commonConfig.component=function(e,t,a,i){if(e.value==null){e.value=""}var l=arguments[3]?arguments[3]:"";var s="";var r=commonConfig.getPlaceHolder(e);var d="";if(typeof e.readonly!="undefined"){if(e.readonly==true){d='readonly="readonly"'}else if(e.readonly==false){d=""}}var o=typeof e.id=="undefined"?"":"form-"+t+"-"+e.id;var n=typeof e.value=="undefined"?"":e.value;if(typeof e.value=="function"){n=e.value()}else if(typeof e.value=="number"){n=n.toString()}var f="";var c="";var v="";var p="";var u="";if(typeof e.height=="string"){if(e.height.indexOf("px")>-1){p="height: "+e.height+";"}else if(e.height.indexOf("%")>-1){p="height: "+e.height+";"}else{p="height: "+e.height+"px;"}}else if(typeof e.height=="number"){p="height: "+e.height+"px;"}if(typeof e.width=="string"){if(e.width.indexOf("px")>-1){u="width: "+e.width+";"}else if(e.width.indexOf("%")>-1){u="width: "+e.width+";"}else{u="width: "+e.width+"px;"}}else if(typeof e.width=="number"){u="width: "+e.width+"px;"}var m='style="'+p+""+u+'"';if(typeof e.label=="undefined"||e.label==""){c="hide";v=""}else{c="";v=e.label}var y="";if(e.height){y='style="height:'+e.height+'px;"'}if(a=="modal"){var b=["col-sm-4","col-sm-8"];switch(l){case"s":b=["col-sm-4","col-sm-8"];break;case"m":b=["col-sm-3","col-sm-9"];break;default:b=["col-sm-2","col-sm-10"];break}var h="";if(typeof e.hidden=="boolean"){if(e.hidden==true){h=" hidden"}}else if(typeof e.hidden=="function"){var g=e.hidden();if(g==true){h=" hidden"}}f='<label class="control-label '+b[0]+" "+c+" "+e.type+'-label" '+m+' for="'+o+'">'+v+"</label>";if(e.type=="text"||e.type=="password"||e.type=="number"){s='<div class="form-group '+h+'">'+f+'<div class="'+b[1]+'">'+'<input id="'+o+'" name="'+o+'" type="'+e.type+'" ns-type="'+e.type+'" placeholder="'+r+'" class="form-control" value="'+n+'" '+d+">"+"</div>"+"</div>"}else if(e.type=="hidden"){s='<input id="'+o+'" name="'+o+'"  nstype="'+e.type+'" type="hidden" ns-type="hidden" value="'+n+'" class="hidden">'}else if(e.type=="text-btn"){s='<div class="form-group '+h+'">'+f+'<div class="'+b[1]+'">'+'<input id="'+o+'" name="'+o+'" type="text" placeholder="'+r+'" class="form-control" ns-type="'+e.type+'" value="'+n+'" '+d+">";var x=e.btns;if(typeof x!="undefined"&&x.length>0){s+='<div class="input-group-btn text-btn">';for(var k=0;k<x.length;k++){var C=x[k].isDisabled?" disabled ":"";var D={};D.text=x[k].text;D.handler=x[k].handler;s+=commonConfig.getBtn(D,"form",k,true,false)}s+="</div>"}s+="</div></div>"}else if(e.type=="date"){s='<div class="form-group '+h+'">'+f+'<div class="'+b[1]+'">'+'<div class="input-group">'+'<input id="'+o+'" name="'+o+'"  nstype="'+e.type+'" type="text" class="form-control datepicker" value="'+n+'" readonly placeholder="'+r+'" data-format="'+e.format+'">'+'<div class="input-group-addon">'+'<a href="javascript:void(0);"><i class="linecons-calendar"></i></a>'+"</div>"+"</div>"+"</div>"+"</div>"}else if(e.type=="datetime"){var F=o+"-date";var S=o+"-time";var H=commonConfig.formatDate("","YYYY-MM-DD HH:MM:DD");var O=n;var w="";var I="";if(O){w=O.split(" ")[0];I=O.split(" ")[1]}s='<div class="form-group '+h+'">'+f+'<div class="'+b[1]+' datetimepicker">'+'<input id="'+F+'" name="'+F+'" nstype="'+e.type+'" type="text" class="form-control datepicker" value="'+w+'" readonly />'+'<input id="'+S+'" name="'+S+'" nstype="'+e.type+'" type="text" class="form-control timepicker" value="'+I+'" readonly />'+"</div>"+"</div>"}else if(e.type=="textarea"){var j=e.height;var p="";if(j){if(typeof j=="string"){var T=false;if(j.indexOf("px")>-1){j='style="height: '+e.height+';"';T=false}else{j='style="height: '+e.height+'px;"';T=true}if(Number(j)>100){var N=e.height-20;if(T){p='style="height: '+N+'px;"'}else{p='style="height: '+N+';"'}}else{if(T){p='style="height: '+e.height+'px;"'}else{p='style="height: '+e.height+';"'}}}else{j='style="height: '+e.height+'px;"';var N=e.height-20;if(j>100){p='style="height: '+N+'px;"'}else{p='style="height: '+e.height+'px;"'}}}else{j="";p=""}if(typeof e.isFullWidth!="undefined"){if(e.isFullWidth==true){b=["hide","col-sm-12"]}}var _="";if(typeof e.column=="undefined"){_="col-sm-12"}else{_=h}s='<div class="form-group '+_+'">'+f+'<div class="'+b[1]+'">'+'<textarea id="'+o+'" name="'+o+'"  nstype="'+e.type+'" placeholder="'+r+'" class="form-control" '+d+j+">"+n+"</textarea>"+"</div>"+"</div>"}else if(e.type=="upload"){s='<div class="row '+h+'">'+'<div class="col-sm-3 text-center">'+'<div id="advancedDropzone" class="droppable-area">'+"文件区域"+"</div>"+"</div>"+'<div class="col-sm-9">'+'<div class="table-responsive">'+'<table class="table table-bordered table-striped table-hover dataTable no-footer table-modal table-singlerow"  nstype="'+e.type+'" id="'+e.id+'">'+"</table>"+"</div>"+"</div>"+"</div>"}else if(e.type=="upload_single"){var P=e.subdata;var R="";if(typeof P!="undefined"){var M=e.textField;var V=e.valueField;for(var Y=0;Y<P.length;Y++){var B=P[Y][V];var q=P[Y][M];R+='<span class="dropzone-upload-span">'+'<a href="javascript:void(0)" id="'+B+'" class="upload-close"></a>'+'<a href="javascript:void(0)" id="'+B+'" class="upload-title">'+q+"</a>"+"</span>"}}s='<div class="form-group '+h+'">'+f+'<div class="form-item upload '+b[1]+'">'+'<div class="input-group">'+'<div id="'+o+'" class="droppable-area-dialog dz-clickable form-control">'+R+"</div>"+'<div class="input-group-addon">'+'<a href="javascript:void(0);"><i class="fa fa-upload"></i></a>'+"</div>"+"</div>"+"</div>"+"</div>"}else if(e.type=="table"){s='<div class="row"><div class="col-xs-12">'+'<div class="table-responsive">'+'<table class="table table-bordered table-striped table-hover dataTable no-footer table-modal table-singlerow" nstype="'+e.type+'" id="'+e.id+'">'+"</table>"+"</div>"+"</div></div>"}else if(e.type=="radio"){radioHtml="";if(typeof e.subdata!="undefined"){for(var z=0;z<e.subdata.length;z++){var L="cbr cbr-primary";if(e.subdata[z].isChecked){var L="cbr cbr-primary"}var A="";var U="";if(typeof e.textField=="undefined"){A=e.subdata[z].text}else{A=e.subdata[z][e.textField]}if(typeof e.valueField=="undefined"){U=e.subdata[z].value}else{U=e.subdata[z][e.valueField]}var K="";if(n){K=U==n?"checked":""}else{K=e.subdata[z].isChecked?" checked ":""}var W="";var E=e.subdata[z].isDisabled?e.subdata[z].isDisabled:false;if(E){W="disabled"}else{W=""}var G="";if(e.subdata[z].msg){G='data-toggle="tooltip" title="'+e.subdata[z].msg+'"'}radioHtml+='<label class="radio-inline" '+G+">"+'<input id="'+o+"-"+z+'"  nstype="'+e.type+'" type="radio" '+K+" "+W+' class="'+L+'" name="'+o+'" value="'+U+'" >'+A+"</label>"}}var J=e.isHasClose?e.isHasClose:false;var Q=e.subdata.length;if(J){radioHtml+='<label class="radio-inline control-label radio-clear">'+'<input id="'+o+"-"+Q+'"  nstype="'+e.type+'-clear" type="radio" class="cbr cbr-primary hide" name="'+o+'" value="" />'+"清空"+"</label>"}s='<div class="form-group '+h+'">'+f+'<div class="'+b[1]+'">'+radioHtml+"</div>"+"</div>"}else if(e.type=="checkbox"){checkboxHtml="";if(typeof e.subdata!="undefined"){for(var X=0;X<e.subdata.length;X++){var Z="cbr cbr-primary";if(e.subdata[X].isChecked){Z="cbr cbr-primary"}var ee="";var te="";if(typeof e.textField=="undefined"){ee=e.subdata[X].text}else{ee=e.subdata[X][e.textField]}if(typeof e.valueField=="undefined"){te=e.subdata[X].value}else{te=e.subdata[X][e.valueField]}var K="";if(typeof e.value=="function"){var ae=e.value();K=te==ae?"checked":""}else if(typeof e.value=="string"||typeof e.value=="number"){if(e.value){K=e.value==te?"checked":""}else{K=e.subdata[X].isChecked?" checked ":""}}else if(typeof e.value=="object"){for(var ie in e.value){if(te==e.value[ie]){K="checked"}}}var W="";var E=e.subdata[X].isDisabled?e.subdata[X].isDisabled:false;if(E){W="disabled"}else{W=""}checkboxHtml+='<label class="radio-inline">'+'<input id="'+o+"-"+X+'"  nstype="'+e.type+'" type="checkbox" '+K+" "+W+' class="'+Z+'" name="'+o+'" value="'+e.subdata[X].value+'" >'+e.subdata[X].text+"</label>"}}s='<div class="form-group '+h+'">'+f+'<div class="'+b[1]+'">'+checkboxHtml+"</div>"+"</div>"}else if(e.type=="select"){we='<option value="">'+r+"</option>";var le;var se={};if(e.data){se=e.data}if(e.url==""||e.url==null){le=e.subdata}else{var re;if(typeof e.url=="function"){re=e.url()}else{re=e.url}$.ajax({url:re,type:e.method,data:se,dataType:"json",async:false,success:function(t){if(typeof e.dataSrc=="undefined"){le=t}else{for(data in t){le=t[e.dataSrc]}}},error:function(){nsalert("请检查数据格式是否合法","warning")}})}if(le){if(le.length>0){for(var de=0;de<le.length;de++){var oe="";var ne="";if(typeof e.textField=="undefined"){oe=le[de].text}else{oe=le[de][e.textField]}if(typeof e.valueField=="undefined"){ne=le[de].value}else{ne=le[de][e.valueField]}var K="";if(n){K=n==ne?"selected":""}else{K=le[de].selected?"selected":""}var W=le[de].isDisabled?" disabled ":"";we+='<option value="'+ne+'" '+K+">"+oe+"</option>"}}else{if(n){we+='<option value="'+n+'" selected>'+n+"</option>"}}}var fe=e.disabled?"disabled":"";we='<select class="form-control" id="'+o+'" '+fe+'  nstype="'+e.type+'">'+we+"</select>";s='<div class="form-group '+h+'">'+f+'<div class="'+b[1]+' form-item select">'+we+"</div>"+"</div>"}else if(e.type=="select2"){we='<option value="">'+r+"</option>";var ce=e.subdata;if(typeof e.url!="undefined"&&e.url!=""){var ve=e.url;if(typeof e.url=="function"){var pe=e.url;ve=pe()}$.ajax({url:ve,dataType:"json",async:false,data:e.params,success:function(t){if(typeof e.dataSrc=="undefined"){ce=t}else{ce=t[e.dataSrc]}}})}else{ce=e.subdata}for(var ue in ce){if(typeof e.textField=="undefined"){oe=ce[ue].text}else{oe=ce[ue][e.textField]}if(typeof e.valueField=="undefined"){ne=ce[ue].value}else{ne=ce[ue][e.valueField]}if(typeof e.optlable=="undefined"){selectLabel=ce[ue][e.textField]}else{selectLabel=ce[ue][e.optlable]}var me=[];var ye="";if(typeof e.optchildren=="undefined"){ye="children"}else{ye=e.optchildren}var me=ce[ue][ye];if(me!=null&&typeof me!="undefined"&&me.length>0){we+='<optgroup label="'+selectLabel+'">';for(var be in me){if(typeof e.textField=="undefined"){oe=me[be].text}else{oe=me[be][e.textField]}if(typeof e.valueField=="undefined"){ne=me[be].value}else{ne=me[be][e.valueField]}we+='<option value="'+ne+'">'+oe+"</option>"}we+="</optgroup>"}else{we+='<option value="'+ne+'">'+oe+"</option>"}}var he=e.multiple?"multiple":"";we='<select class="form-control" id="'+o+'" '+he+'  nstype="'+e.type+'">'+we+"</select>";s='<div class="form-group '+h+'">'+f+'<div class="form-item select2 '+b[1]+'">'+we+"</div>"+"</div>"}else if(e.type=="typeahead"){s='<div class="form-group '+h+'">'+f+'<div class="form-item '+b[1]+'">'+'<div class="typeahead__container">'+'<div class="typeahead__field">'+'<span class="typeahead__query">'+'<input id="'+o+'" class="form-control" nstype="'+e.type+'" type="search" placeholder="Search" autofocus autocomplete="off" />'+"</span>"+'<span class="typeahead__button">'+'<button type="button">'+'<span class="typeahead__search-icon"></span>'+"</button>"+"</span>"+"</div>"+"</div>"+"</div>"+"</div>"}else if(e.type=="addSelectInput"){if(typeof e.hiddenID=="undefined"){e.hiddenID=e.id+"-hidden"+Math.round()*1e5}e.fullHiddenID="form-"+t+"-"+e.hiddenID;s='<div class="form-group '+h+'">'+f+'<div class="'+b[1]+'">'+'<input id="'+o+'" name="'+o+'" type="text" placeholder="'+r+'" class="form-control" value="'+n+'" '+d+">"+'<input id="'+mt+'" name="'+mt+'" type="'+e.type+'-hidden" value="" >'+"</div>"+"</div>"}else if(e.type=="tree-select"){var ge=o+"-tree-menuBtn";var xe=typeof e.text=="undefined"?"":e.text;var ke="";if(typeof e.value=="function"){ke=e.value()}else{ke=e.value?e.value:""}var Ce=o+"-tree";s='<div class="form-group '+h+'">'+f+'<div class="'+b[1]+'">'+'<input id="'+o+'" name="'+o+'" nodeid="'+ke+'" treeType="'+e.treeId+'" nstype="'+e.type+'" value="'+xe+'" class="form-control" type="text" readonly>'+'<a id="'+ge+'" href="javascript:void(0)" class="treeselect-arrow"><i class="fa fa-caret-down"></i></a>'+'<ul id="'+Ce+'" class="ztree hide"></ul>'+"</div>"+"</div>"}}else if(a=="form"){var De="";if(typeof e.column=="undefined"){De=" col-lg-3 col-md-4 col-sm-6 col-xs-12"}else{var Fe=parseInt(e.column);if(Fe<0||Fe>12){Fe=12}switch(Fe){case 1:De=" col-lg-1 col-md-1 col-sm-1 col-xs-1";break;case 2:De=" col-lg-2 col-md-2 col-sm-6 col-xs-12";break;case 3:De=" col-lg-3 col-md-4 col-sm-6 col-xs-12";break;case 4:De=" col-md-4 col-sm-6 col-xs-12";break;case 6:De=" col-sm-6 col-xs-12";break;case 8:De=" col-md-8 col-xs-12";break;case 12:De=" col-xs-12";break}}if(e.hidden){De+=" hidden"}f='<label class="control-label '+c+" "+e.type+'-label" '+m+' for="'+o+'">'+v+"</label>";if(e.type=="text"||e.type=="password"||e.type=="number"){s='<div class="form-td '+De+'">'+'<div class="form-group" '+y+">"+f+'<div class="form-item">'+'<input id="'+o+'" name="'+o+'"  nstype="'+e.type+'" type="'+e.type+'" placeholder="'+r+'" class="form-control" value="'+n+'" '+d+">"+"</div>"+"</div>"+"</div>"}else if(e.type=="textSelect"){var Se=commonConfig.converSelectHtml(e.select);var He="form-"+t+"-"+e.select.id;var fe=e.select.disabled?"disabled":"";var Oe=commonConfig.getPlaceHolder(e.select);var $e='<option value="">'+Oe+"</option>";var we='<select id="'+He+'" name="'+He+'" class="form-control" nstype="'+e.type+'-select" '+fe+">"+$e+Se+"</select>";var Ie="form-"+t+"-"+e.text.id;var je=commonConfig.getPlaceHolder(e.text);var Te=e.text.value?e.text.value:"";var d=e.text.readonly?'readonly="readonly"':"";var s='<input type="text" id="'+Ie+'" name="'+Ie+'" value="'+Te+'" class="form-control" nstype="'+e.type+'-text" placeholder="'+je+'" '+d+" />";var Ne="";if(e.button){var _e=e.button;for(var Pe=0;Pe<_e.length;Pe++){var D={};D.text=_e[Pe].text;D.handler=_e[Pe].handler;Ne+=commonConfig.getBtn(D,"form",Pe,true,false)}Ne='<div class="btn-group" nstype="'+e.type+'_button">'+Ne+"</div>"}var Re='<input type="hidden" id="'+o+'" name="'+o+'" value="'+n+'" />';s='<div class="form-td '+De+'">'+'<div class="form-group" '+y+">"+f+'<div class="form-item selectplane '+e.type+'" ns-id="'+e.id+'">'+Re+s+we+Ne+"</div>"+"</div>"+"</div>"}else if(e.type=="selectText"){var Se=commonConfig.converSelectHtml(e.select);var He="form-"+t+"-"+e.select.id;var fe=e.select.disabled?"disabled":"";var Oe=commonConfig.getPlaceHolder(e.select);var $e='<option value="">'+Oe+"</option>";var we='<select id="'+He+'" name="'+He+'" class="form-control" nstype="'+e.type+'-select" '+fe+">"+$e+Se+"</select>";var Ie="form-"+t+"-"+e.text.id;var je=commonConfig.getPlaceHolder(e.text);var Te=e.text.value?e.text.value:"";var d=e.text.readonly?'readonly="readonly"':"";var s='<input type="text" id="'+Ie+'" name="'+Ie+'" value="'+Te+'" class="form-control" nstype="'+e.type+'-text" placeholder="'+je+'" '+d+" />";var Ne="";if(e.button){var _e=e.button;for(var Pe=0;Pe<_e.length;Pe++){var D={};D.text=_e[Pe].text;D.handler=_e[Pe].handler;Ne+=commonConfig.getBtn(D,"form",Pe,true,false)}Ne='<div class="btn-group" commonplane="moreSelectPlane" nstype="'+e.type+'_button">'+Ne+"</div>"}var Re='<input type="hidden" id="'+o+'" name="'+o+'" value="'+n+'" />';s='<div class="form-td '+De+'">'+'<div class="form-group" '+y+">"+f+'<div class="form-item selectplane '+e.type+'" ns-id="'+e.id+'">'+Re+we+s+Ne+"</div>"+"</div>"+"</div>"}else if(e.type=="selectDate"){var Me=commonConfig.converSelectHtml(e.caseSelect);var Ve="form-"+t+"-"+e.caseSelect.id;var Ye='<select id="'+Ve+'" name="'+Ve+'" class="form-control" nstype="'+e.type+'-caseSelect">'+Me+"</select>";var Be="form-"+t+"-"+e.text.id;var qe=e.text.value?e.text.value:"";var d=e.text.readonly?'readonly="readonly"':"";var ze=commonConfig.getPlaceHolder(e.text);var Le=e.text.hidden?"hide":"";var Ae='<input type="text" id="'+Be+'" name="'+Be+'" class="form-control '+Le+'" value="'+qe+'" placeholder="'+ze+'" '+d+' nstype="'+e.type+'-text" />';var F="form-"+t+"-"+e.date.id;var w=e.date.value?e.date.value:"";var Ue=e.date.readonly?'readonly="readonly"':"";var Ke=e.date.hidden?"hide":"";var We='<input type="text" id="'+F+'" name="'+F+'" class="form-control datepicker '+Ke+'" readonly value="'+w+'" '+Ue+' nstype="'+e.type+'-date"  />';var Ee="form-"+t+"-"+e.daterange.id;var Ge=e.daterange.startDate?e.daterange.startDate:"";var Je=e.daterange.endDate?e.daterange.endDate:"";var Qe="";if(Ge){Qe=Ge+"至"+Je}var Xe=e.daterange.hidden?"hide":"";var Ze='<div class="daterange daterange-inline add-ranges '+Xe+'" id="'+Ee+'" nstype="'+e.type+'-daterange">'+'<i class="fa-calendar"></i>'+"<span>"+Qe+"</span>"+"</div>";var Re='<input type="hidden" id="'+o+'" name="'+o+'" value="'+n+'" />';var Ne="";if(e.button){var _e=e.button;for(var Pe=0;Pe<_e.length;Pe++){var D={};D.text=_e[Pe].text;D.handler=_e[Pe].handler;Ne+=commonConfig.getBtn(D,"form",Pe,true,false)}Ne='<div class="btn-group" commonplane="moreSelectPlane" nstype="'+e.type+'_button">'+Ne+"</div>"}s='<div class="form-td '+De+'">'+'<div class="form-group" '+y+">"+f+'<div class="form-item selectplane '+e.type+'" ns-id="'+e.id+'">'+Re+Ye+Ae+We+Ze+Ne+"</div>"+"</div>"+"</div>"}else if(e.type=="selectSelect"){var Re='<input type="hidden" id="'+o+'" name="'+o+'" value="'+n+'" />';var et=commonConfig.converSelectHtml(e.firstSelect);var He="form-"+t+"-"+e.firstSelect.id;var fe=e.firstSelect.disabled?"disabled":"";var tt=commonConfig.getPlaceHolder(e.firstSelect);var at='<option value="">'+tt+"</option>";var it='<select id="'+He+'" name="'+He+'" class="form-control" nstype="'+e.type+'-firstSelect" '+fe+">"+at+et+"</select>";var lt=commonConfig.converSelectHtml(e.secondSelect);var st="form-"+t+"-"+e.secondSelect.id;var rt=e.secondSelect.disabled?"disabled":"";var dt=commonConfig.getPlaceHolder(e.secondSelect);var ot='<option value="">'+dt+"</option>";var nt='<select id="'+st+'" name="'+st+'" class="form-control" nstype="'+e.type+'-secondSelect" '+rt+">"+ot+lt+"</select>";var Ne="";if(e.button){var _e=e.button;for(var Pe=0;Pe<_e.length;Pe++){var D={};D.text=_e[Pe].text;D.handler=_e[Pe].handler;Ne+=commonConfig.getBtn(D,"form",Pe,true,false)}Ne='<div class="btn-group" commonplane="moreSelectPlane" nstype="'+e.type+'_button">'+Ne+"</div>"}s='<div class="form-td '+De+'">'+'<div class="form-group" '+y+">"+f+'<div class="form-item selectplane '+e.type+'" ns-id="'+e.id+'">'+Re+it+nt+Ne+"</div>"+"</div>"+"</div>"}else if(e.type=="hidden"){s='<input id="'+o+'" name="'+o+'"  nstype="'+e.type+'" type="hidden" value="'+n+'" class="hidden">'}else if(e.type=="date"){s='<div class="form-td '+De+'">'+'<div class="form-group">'+f+'<div class="form-item">'+'<div class="input-group" '+y+">"+'<input id="'+o+'" name="'+o+'" nstype="'+e.type+'" type="text" class="form-control datepicker" value="'+n+'" readonly placeholder="'+r+'" data-format="'+e.format+'" >'+'<div class="input-group-addon">'+'<a href="javascript:void(0);"><i class="linecons-calendar"></i></a>'+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"}else if(e.type=="datetime"){var F=o+"-date";var S=o+"-time";var H=commonConfig.formatDate("","YYYY-MM-DD HH:MM:DD");var O=n;var w="";var I="";if(O){w=O.split(" ")[0];I=O.split(" ")[1]}s='<div class="form-td datetimepicker '+De+'">'+'<div class="form-group" '+y+">"+f+'<div class="form-item datetimepicker">'+'<input id="'+F+'" name="'+F+'" nstype="'+e.type+'" type="text" class="form-control datepicker" value="'+w+'" readonly />'+'<input id="'+S+'" name="'+S+'" nstype="'+e.type+'" type="text" class="form-control timepicker" value="'+I+'" readonly />'+"</div>"+"</div>"+"</div>"}else if(e.type=="daterangepicker"){s='<div class="form-td  '+De+'">'+'<div class="form-group">'+f+'<div class="form-item datetimepicker">'+'<input type="text" name="'+o+'" id="'+o+'" class="form-control" readonly nstype="'+e.type+'">'+"</div>"+"</div>"+"</div>"}else if(e.type=="upload"){var P=e.subdata;var R="";if(typeof P!="undefined"){var M=e.textField;var V=e.valueField;for(var Y=0;Y<P.length;Y++){var B=P[Y][V];var q=P[Y][M];R+='<span class="dropzone-upload-span">'+'<a href="javascript:void(0)" id="'+B+'" class="upload-close"></a>'+'<a href="javascript:void(0)" id="'+B+'" class="upload-title">'+q+"</a>"+"</span>"}}s='<div class="form-td '+De+'">'+'<div class="form-group" '+y+">"+f+'<div class="form-item upload">'+'<div class="input-group">'+'<div id="'+o+'" class="droppable-area-form dz-clickable">'+R+"</div>"+'<div class="input-group-addon">'+'<a href="javascript:void(0);"><i class="fa fa-upload"></i></a>'+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"}else if(e.type=="textarea"){var j=e.height;var p="";if(j){if(typeof j=="string"){var T=false;if(j.indexOf("px")>-1){j='style="height: '+e.height+';"';T=false}else{j='style="height: '+e.height+'px;"';T=true}if(Number(j)>100){var N=e.height-20;if(T){p='style="height: '+N+'px;"'}else{p='style="height: '+N+';"'}}else{if(T){p='style="height: '+e.height+'px;"'}else{p='style="height: '+e.height+';"'}}}else{j='style="height: '+e.height+'px;"';var N=e.height-20;if(j>100){p='style="height: '+N+'px;"'}else{p='style="height: '+e.height+'px;"'}}}else{j="";p=""}var _="";if(typeof e.column=="undefined"){_="col-sm-12"}else{_=De}s='<div class="form-td '+_+'">'+'<div class="form-group">'+f+'<textarea id="'+o+'" name="'+o+'"  nstype="'+e.type+'" placeholder="'+r+'" class="form-control" '+d+j+">"+n+"</textarea>"+"</div>"+"</div>"}else if(e.type=="tree-select"){var ge=o+"-tree-menuBtn";var xe=typeof e.text=="undefined"?"":e.text;var ke="";if(typeof e.value=="function"){var ke=e.value()}else{ke=e.value?e.value:""}var Ce=o+"-tree";s='<div class="form-td '+De+'">'+'<div class="form-group" '+y+">"+f+'<input id="'+o+'" type="text" nodeid="'+ke+'" name="'+o+'" treeType="'+e.treeId+'" nstype="'+e.type+'" value="'+xe+'" class="form-control" readonly>'+'<a id="'+ge+'" href="javascript:void(0)" class="treeselect-arrow"><i class="fa fa-caret-down"></i></a>'+'<ul id="'+Ce+'" class="ztree hide"></ul>'+"</div>"+"</div>"}else if(e.type=="person-select"){var ft="";var ct=true;var vt=33;if(typeof e.isUsedHistory=="boolean"){if(e.isUsedHistory==false){ct=false;vt=3}}else{e.isUsedHistory=true}if(ct){ft='<a href="javascript:void(0);" class="person-select-plane-btn" style="right: 3px;" ns-control="historyInfo">'+'<i class="fa fa-clock-o"></i>'+"</a>"}s='<div class="form-td '+De+'">'+'<div class="form-group" '+y+">"+f+'<input id="'+o+'" type="text" name="'+o+'"  nstype="'+e.type+'" personType="'+e.type+'" value="'+n+'" class="form-control">'+'<a href="javascript:void(0);" class="person-select-plane-btn" style="right: '+(vt+30)+'px;" ns-control="personInfo">'+'<i class="fa fa-user"></i>'+"</a>"+'<a href="javascript:void(0);" class="person-select-plane-btn" style="right: '+vt+'px;" ns-control="groupInfo">'+'<i class="fa fa-sitemap"></i>'+"</a>"+ft+"</div>"+"</div>"}else if(e.type=="radio"){radioHtml="";if(debugerMode){if(typeof e.subdata!="object"){nsAlert("单选按钮组"+e.id+" subdata必须是数组","error");return false}}if(e.subdata){var pt=0;for(var z=0;z<e.subdata.length;z++){var L="cbr cbr-primary";if(e.subdata[z].isChecked){var L="cbr cbr-primary"}var A="";var U="";if(typeof e.textField=="undefined"){A=e.subdata[z].text}else{A=e.subdata[z][e.textField]}if(typeof e.valueField=="undefined"){U=e.subdata[z].value}else{U=e.subdata[z][e.valueField]}var K="";if(n){K=n==U?"checked":""}else{K=e.subdata[z].isChecked?"checked":""}var W="";var E=e.subdata[z].isDisabled?e.subdata[z].isDisabled:false;if(E){W="disabled";pt++}else{W=""}var G="";if(e.subdata[z].msg){G='data-toggle="tooltip" title="'+e.subdata[z].msg+'"'}radioHtml+='<label class="radio-inline" '+G+">"+'<input id="'+o+"-"+z+'" nstype="'+e.type+'" type="radio" '+K+" "+W+' class="'+L+'" name="'+o+'" value="'+U+'" >'+A+"</label>"}}var ut="";if(pt==e.subdata.length){ut=" all-disabled"}var J=typeof e.isHasClose=="boolean"?e.isHasClose:false;if(J){var Q=e.subdata.length;radioHtml+='<label class="radio-inline radio-clear">'+'<input id="'+o+"-"+Q+'"  nstype="'+e.type+'-clear" type="radio" class="cbr cbr-primary hide" name="'+o+'" value="" />'+"清空"+"</label>"}s='<div class="form-td '+De+'">'+'<div class="form-group" '+y+">"+f+'<div class="form-item radio '+ut+'">'+radioHtml+"</div>"+"</div>"+"</div>"}else if(e.type=="checkbox"){checkboxHtml="";if(typeof e.subdata!="undefined"){var pt=0;for(var X=0;X<e.subdata.length;X++){var Z="cbr cbr-primary";if(e.subdata[X].isChecked){var Z="cbr cbr-primary"}var ee="";var te="";if(typeof e.textField=="undefined"){ee=e.subdata[X].text}else{ee=e.subdata[X][e.textField]}if(typeof e.valueField=="undefined"){te=e.subdata[X].value}else{te=e.subdata[X][e.valueField]}var K="";if(typeof e.value=="function"){var ae=e.value();K=te==ae?"checked":""}else if(typeof e.value=="string"||typeof e.value=="number"){if(e.value){K=e.value==te?"checked":""}else{K=e.subdata[X].isChecked?" checked ":""}}else if(typeof e.value=="object"){for(var ie in e.value){if(te==e.value[ie]){K="checked"}}}var W="";var E=e.subdata[X].isDisabled?e.subdata[X].isDisabled:false;if(E){W="disabled";pt++}else{W=""}checkboxHtml+='<label class="checkbox-inline">'+'<input id="'+o+"-"+X+'"  nstype="'+e.type+'" type="checkbox" '+K+" "+W+' class="'+Z+'" name="'+o+'" value="'+te+'" >'+ee+"</label>"}}else{checkboxHtml='<label class="checkbox-inline">'+'<input id="'+o+'0"  nstype="'+e.type+'" type="checkbox"  class="cbr cbr-primary" name="'+o+'" value="1" >'+e.textField+"</label>"}var ut="";if(pt==e.subdata.length){ut=" all-disabled"}s='<div class="form-td '+De+'">'+'<div class="form-group" '+y+">"+f+'<div class="form-item checkbox '+ut+'">'+checkboxHtml+"</div>"+"</div>"+"</div>"}else if(e.type=="select2"){we='<option value="">'+r+"</option>";var ce=e.subdata;if(typeof e.url!="undefined"&&e.url!=""){$.ajax({url:e.url,dataType:"json",async:false,data:e.params,success:function(t){if(typeof e.dataSrc=="undefined"){ce=t}else{ce=t[e.dataSrc]}}})}else{ce=e.subdata}for(var ue in ce){if(typeof e.textField=="undefined"){oe=ce[ue].text}else{oe=ce[ue][e.textField]}if(typeof e.valueField=="undefined"){n=ce[ue].value}else{n=ce[ue][e.valueField]}if(typeof e.optlable=="undefined"){selectLabel=ce[ue][e.textField]}else{selectLabel=ce[ue][e.optlable]}var me=[];if(typeof e.optchildren=="undefined"){me=ce[ue].children}else{me=ce[ue][e.optchildren]}if(me!=null&&typeof me!="undefined"&&me.length>0){we+='<optgroup label="'+selectLabel+'">';for(var be in me){if(typeof e.textField=="undefined"){oe=me[be].text}else{oe=me[be][e.textField]}if(typeof e.valueField=="undefined"){n=me[be].value}else{n=me[be][e.valueField]}we+='<option value="'+n+'">'+oe+"</option>"}we+="</optgroup>"}else{we+='<option value="'+n+'">'+oe+"</option>"}}var he=e.multiple?"multiple":"";we='<select class="form-control" nstype="'+e.type+'" id="'+o+'" '+he+" >"+we+"</select>";s='<div class="form-td '+De+'">'+'<div class="form-group" '+y+">"+f+'<div class="form-item select2">'+we+"</div>"+"</div>"+"</div>"}else if(e.type=="select"){we='<option value="">'+r+"</option>";var le;var se={};if(e.data){se=e.data}if(e.url==""||e.url==null){le=e.subdata}else{$.ajax({url:e.url,type:e.method,data:se,dataType:"json",async:false,success:function(t){if(typeof e.dataSrc=="undefined"){le=t}else{for(data in t){le=t[e.dataSrc]}}},error:function(){nsalert("请检查数据格式是否合法","warning")}})}if(le){if(le.length>0){for(var de=0;de<le.length;de++){var oe="";var ne="";if(typeof e.textField=="undefined"){oe=le[de].text}else{oe=le[de][e.textField]}if(typeof e.valueField=="undefined"){ne=le[de].value}else{ne=le[de][e.valueField]}var K="";if(n){K=n==ne?"selected":""}else{K=le[de].selected?"selected":""}var W=le[de].isDisabled?" disabled ":"";we+='<option value="'+ne+'" '+K+">"+oe+"</option>"}}else{if(n){we+='<option value="'+n+'" selected>'+n+"</option>"}}}var fe=e.disabled?"disabled":"";we='<select class="form-control" id="'+o+'" '+fe+">"+we+"</select>";s='<div class="form-td '+De+'">'+'<div class="form-group" '+y+">"+f+'<div class="form-item select">'+we+"</div>"+"</div>"+"</div>"}else if(e.type=="text-btn"){var x=e.btns;s='<div class="form-td '+De+'">'+'<div class="form-group">'+f+'<div class="form-item">'+'<div class="input-group">'+'<input id="'+o+'" name="'+o+'" '+d+' nstype="'+e.type+'" type="text" class="form-control" placeholder="'+r+'" value="'+n+'">';if(typeof x!="undefined"&&x.length>0){s+='<div class="input-group-btn text-btn">';for(var k=0;k<x.length;k++){var C=x[k].isDisabled?" disabled ":"";var D={};D.text=x[k].text;D.handler=x[k].handler;D.disabled=C;s+=commonConfig.getBtn(D,"form",k,true,false)}s+="</div>"}s+="</div>"+"</div>"+"</div>"+"</div>"}else if(e.type=="typeahead"){s='<div class="form-td '+De+'">'+'<div class="form-group">'+f+'<div class="form-item">'+'<div class="typeahead__container">'+'<div class="typeahead__field">'+'<span class="typeahead__query">'+'<input id="'+o+'" class="form-control"  nstype="'+e.type+'" type="search" placeholder="Search" autofocus autocomplete="off" />'+"</span>"+'<span class="typeahead__button">'+'<button type="button">'+'<span class="typeahead__search-icon"></span>'+"</button>"+"</span>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"}else if(e.type=="add-select-input"){if(typeof e.hiddenID=="undefined"){e.hiddenID=e.id+"-hidden-"+parseInt(Math.random()*1e5+1)}if(typeof e.submitIndex=="number"){e.localDataHiddenIDIndex=e.submitIndex}var mt="form-"+t+"-"+e.hiddenID;e.fullHiddenID=mt;var yt='data-toggle="tooltip" data-placement="top" title="直接输入：张某 18610611123 则可自动保存为新用户" ';s='<div class="form-td add-select-input '+De+'">'+'<div class="form-group">'+f+'<div class="form-item">'+'<div class="input-group">'+'<input id="'+o+'" name="'+o+'"  nstype="'+e.type+'" type="text" placeholder="'+r+'" class="form-control" value="'+n+'" '+d+">"+'<a href="javascript:void(0);" class="input-group-btn add-select-input-btn" ns-control="refresh"><i class="fa fa-refresh"></i></a>'+'<a href="javascript:void(0);" class="input-group-btn add-select-input-btn" ns-control="list"><i class="fa fa-list"></i></a>'+'<input id="'+mt+'" name="'+mt+'" nstype="'+e.type+'-hidden" type="hidden" >'+"</div>"+"</div>"+"</div>"+"</div>"}else{nsalert("配置类型参数："+e.type+" 填写有误，请核实")}}return s};commonConfig.getSelectData=function(e){if(e.url==""||e.url==null){selectData=e.subdata}else{var t=e.url;if(typeof t=="function"){t=t()}var a=e.data;if(typeof a=="function"){a=a()}$.ajax({url:t,type:e.method,data:a,async:false,success:function(t){if(typeof e.dataSrc=="undefined"){selectData=t}else{for(data in t){selectData=t[e.dataSrc]}}},error:function(){nsalert("请检查数据格式是否合法","warning")}})}return selectData};commonConfig.getRules=function(e,t){formPlane.fillValid[t]={};var a={};var i={};var l={};for(var s=0;s<e.length;s++){if(typeof e[s].rules!="undefined"){var r="form-"+t+"-"+e[s].id;var d={};var o=e[s].rules;var n=o.split(" ");for(var f=0;f<n.length;f++){if(n[f]=="required"){d["required"]=true}if(n[f]=="number"){d["number"]=true}if(n[f]=="email"){d["email"]=true}if(n[f]=="ismobile"){d["ismobile"]=true}if(n[f]=="postalcode"){d["postalcode"]=true}if(n[f]=="year"){d["year"]=true}if(n[f]=="month"){d["month"]=true}if(n[f]=="Icd"){d["Icd"]=true}if(n[f]=="bankno"){d["bankno"]=true}if(n[f]=="url"){d["url"]=true}if(n[f]=="date"){d["date"]=true}if(n[f]=="dateISO"){d["dateISO"]=true}if(n[f].indexOf("equalTo=")>-1){var c=n[f];c=c.substr(c.indexOf("=")+1,c.length);c="form-"+t+"-"+c;d["equalTo"]="#"+c}if(n[f].indexOf("minlength=")>-1){d["minlength"]=commonConfig.getRuleNumber(n[f],"minlength")}if(n[f].indexOf("maxlength=")>-1){d["maxlength"]=commonConfig.getRuleNumber(n[f],"maxlength")}if(n[f].indexOf("min=")>-1){d["min"]=commonConfig.getRuleNumber(n[f],"min")}if(n[f].indexOf("max=")>-1){d["max"]=commonConfig.getRuleNumber(n[f],"max")}if(n[f].indexOf("range=")>-1){d["range"]=commonConfig.getRuleNumberArray(n[f]);
}if(n[f].indexOf("rangelength=")>-1){d["rangelength"]=commonConfig.getRuleNumberArray(n[f])}if(n[f]=="autocomplete"){a[r]=autoCompleteValid(r)}if(n[f]=="select"){a[r]=selectValid(e[s].value,e[s].subdata)}if(n[f]=="select2"){a[r]=selectValid(e[s].value,e[s].subdata)}if(n[f].indexOf("precision")>-1){d["precision"]=commonConfig.getRuleNumber(n[f],"precision")}if(n[f]=="upload"){a[r]=uploadValid(e[s].subdata)}}l[r]=d}i["rules"]=l;formPlane.fillValid[t]=a;i["errorPlacement"]=function(e,t){if(t.attr("nstype")=="radio"){e.appendTo(t.closest(".form-item.radio"))}else{t.after(e)}}}return i};commonConfig.getRulesPrecisionNumber=function(e,t){var a;switch(t){case 1:a=/^\d{0,9}\.\d{0,1}$|^\d{0,9}$/;break;case 2:a=/^\d{0,9}\.\d{0,2}$|^\d{0,9}$/;break;case 3:a=/^\d{0,9}\.\d{0,3}$|^\d{0,9}$/;break;case 4:a=/^\d{0,9}\.\d{0,4}$|^\d{0,9}$/;break;case 5:a=/^\d{0,9}\.\d{0,5}$|^\d{0,9}$/;break}var i=false;e=Number(e);if(isNaN(e)){i=false}else{if(a.test(e)){i=true}else{i=false}}return i};commonConfig.getPrecisionNumber=function(e){var t=e.substr(e.indexOf("=")+1,e.length);var a=parseInt(t);return a};commonConfig.getRuleNumber=function(e,t){var a;if(e.indexOf(t)>-1){var i=e.substring(e.indexOf(t),e.length);var l=i.split(" ");a=l[0].substr(l[0].indexOf("=")+1,l[0].length)}a=parseInt(a);return a};commonConfig.getPlaceHolder=function(e){var t="";if(typeof e.placeholder=="undefined"){if(typeof e.rules!="undefined"){var a="";if(e.rules.indexOf("required")>=0){a+="必填"}if(e.rules.indexOf("email")>=0){a+=" xxx@xxx.xxx"}if(e.rules.indexOf("dateISO")>=0){a+=" 年-月-日"}if(e.rules.indexOf("url")>=0){a+=" 有效网址"}if(e.rules.indexOf("number")>=0){a+=" 数字"}if(e.rules.indexOf("minlength")>=0){a+=" 最少"+commonConfig.getRuleNumber(e.rules,"minLength")+"个字"}if(e.rules.indexOf("precision")>=0){a+="\t小数位数"+commonConfig.getRuleNumber(e.rules,"precision")+"位"}if(e.rules.indexOf("maxlength")>=0){a+=" 最多"+commonConfig.getRuleNumber(e.rules,"maxlength")+"个字"}if(e.rules.indexOf("min=")>=0){a+=" 不小于"+commonConfig.getRuleNumber(e.rules,"min")+"的数字"}if(e.rules.indexOf("max=")>=0){a+=" 不大于"+commonConfig.getRuleNumber(e.rules,"max")+"的数字"}if(e.rules.indexOf("range=")>=0){var i=commonConfig.getRuleNumberArray(e.rules);a+=" 数字 "+i[0]+"到"+i[1];i=null}if(e.rules.indexOf("ismobile")>=0){a+=" 默认手机号11位"}if(e.rules.indexOf("postalcode")>=0){a+="请输入邮政编码"}if(e.rules.indexOf("year")>=0){a+="请输入四位年份"}if(e.rules.indexOf("month")>=0){a+="请输入月份"}if(e.rules.indexOf("Icd")>=0){a+="请输入身份证号码"}if(e.rules.indexOf("bankno")>=0){a+="请输入银行卡号"}if(e.rules.indexOf("select")>=0){a="必填"}if(e.rules.indexOf("select2")>=0){a="请选择"}t=a}else{t="选填"}}else{t=e.placeholder}return t};commonConfig.compareDate=function(e){var t=new Date;var a=t.getFullYear();var i=t.getMonth()+1;var l=t.getDate();var s=a+"-";if(i<10){s+="0"}s+=i+"-";if(l<10){s+="0"}s+=l+" ";var r=false;var d=s.split("-");var o=e.split("-");var n=d.length;for(var f=0;f<n;f++){if(parseInt(d[f])<parseInt(o[f])){r=true;break}else if(parseInt(d[f])>parseInt(o[f])){break}}return r};commonConfig.getRuleNumberArray=function(e){var t=e.indexOf("[");var a=e.indexOf(",");var i=e.indexOf("]");var l=parseInt(e.substring(t+1,a));var s=parseInt(e.substring(a+1,i));return[l,s]};commonConfig.formatDate=function(e,t){var a=arguments[1]?arguments[1]:"YYYY-MM-DD";var i;var l;if(typeof e=="string"){if(e==""){l=new Date}else{var i=Number(e);if(isNaN(i)){y=moment(e).format(a);return y}else{l=new Date(i)}}}else if(typeof e=="number"){l=new Date(e)}else if(typeof e=="undefined"){l=new Date}else{return""}var s=l.getFullYear();var r=l.getMonth()+1;var d=l.getDate();var o=l.getHours();var n=l.getMinutes();var f=l.getSeconds();var c=r<10?"0"+r:r.toString();var v=d<10?"0"+d:d.toString();var p=o<10?"0"+o:o.toString();var u=n<10?"0"+n:n.toString();var m=f<10?"0"+f:f.toString();var y="";y=s+"-"+c+"-"+v+" "+p+":"+u+":"+m;y=moment(y).format(a);return y};commonConfig.setSelectKeyValue=function(e,t,a){switch(a){case"selectText":var i=t.select;var l=t.text;$("#"+e+"CompareType").val(i);var s=$("#"+e+"CompareType").find("option:selected").text();$("#"+e+"CompareType").next().find(".selectboxit-btn .selectboxit-text").text(s);$("#"+e+"DefaultValue1").val(l);break;case"selectSelect":var r=t.firstSelect;var d=t.secondStr;$("#"+e+"CompareType").val(r);var s=$("#"+e+"CompareType").find("option:selected").text();$("#"+e+"CompareType").next().find(".selectboxit-btn .selectboxit-text").text(s);$("#"+e+"DefaultValue1").val(d);var o=$("#"+e+"DefaultValue1").find("option:selected").text();$("#"+e+"DefaultValue1").next().find(".selectboxit-btn .selectboxit-text").text(o);break;case"selectDate":var i=t.select;var l=t.date;$("#"+e+"CompareType").val(i);var s=$("#"+e+"CompareType").find("option:selected").text();$("#"+e+"CompareType").next().find(".selectboxit-btn .selectboxit-text").text(s);$("#"+e+"DefaultValue1Temp").val(l);$("#"+e+"DefaultValue1").val(l);$("#"+e+"DefaultValue2").val(l);break}};commonConfig.setKeyValue=function(e,t,a,i,l){switch(a){case"text":$("#"+e).val(t);break;case"date":var s=/^[-+]?\d*$/;if(s.test(t)){t=commonConfig.formatDate(t)};$("#"+e).val(t);break;case"checkbox":var r=i;for(var d=0;d<r.length;d++){if(r[d][l]==t){$("#"+e+"-"+d).get(0).checked=true}else{$("#"+e+"-"+d).attr("checked",false)}}break;case"radio":var o=i;for(var n=0;n<o.length;n++){if(o[n][l]==t){$("#"+e+"-"+n).get(0).checked=true}else{$("#"+e+"-"+n).attr("checked",false)}}break;case"select":$("#"+e).val(t);var f=$("#"+e).find("option:selected").text();$("#"+e).next().find(".selectboxit-btn .selectboxit-text").text(f);break;case"select2":var c=$select2Change[e];c.val(t).trigger("change");default:$("#"+e).val(t);break}};
toastr.options={closeButton:false,debug:false,newestOnTop:false,progressBar:false,rtl:false,positionClass:"toast-top-right",preventDuplicates:false,onclick:null,showDuration:200,hideDuration:500,timeOut:2e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};function nsalert(e,s,t,i){if(typeof e!="string"){nsalert("nsalert传入参数错误","error");return false}var n="";var a="";if(e.indexOf("成功")>-1||e.indexOf("完成")>-1){n='<i class="fa fa-check"></i> ';a="success"}else if(e.indexOf("失败")>-1||e.indexOf("错误")>-1||e.indexOf("error")>-1||e.indexOf("有误")>-1){n='<i class="fa fa-warning"></i> ';a="error"}else if(e.indexOf("提醒")>-1||e.indexOf("警告")>-1||e.indexOf("提示")>-1||e.indexOf("无法")>-1||e.indexOf("禁止")>-1){n='<i class="fa fa-warning"></i> ';a="warning"}if(typeof t!="undefined"){n='<i class="fa fa-'+t+'"></i> '}if(typeof s!="undefined"){a=s}if(a==""){a="info"}if(n==""){if(a=="error"||a=="warning"){n='<i class="fa fa-warning"></i> '}else if(a=="success"){n='<i class="fa fa-check"></i> '}else if(a=="info"){n='<i class="fa fa-comment"></i> '}}var r=n+e;switch(a){case"success":toastr.success(r);break;case"info":toastr.info(r);break;case"warning":toastr.warning(r);break;case"error":toastr.error(r);break}var o=2e3;if(i){o=i}toastr.options.timeOut=o;toastr.options.extendedTimeOut=1e3}var nsAlert=nsalert;function nsconfirm(e,s,t){toastr.options.timeOut=0;toastr.options.extendedTimeOut=0;var i=parseInt(Math.random()*1e5+1);var n='<div class="nsconfirm">'+'<div class="message">'+e+"</div>"+'<div class="btn-group">'+'<button type="button" id="confirm-btn-ok-'+i+'" class="btn btn-white">'+"确认"+"</button>"+'<button type="button" id="confirm-btn-cancel-'+i+'" class="btn btn-white">'+"取消"+"</button>"+"</div>"+"</div>";if(typeof t=="string"){}else{t="info"}switch(t){case"success":toastr.success(n);break;case"info":toastr.info(n);break;case"warning":toastr.warning(n);break;case"error":toastr.error(n);break}toastr.options.timeOut=2e3;toastr.options.extendedTimeOut=1e3;$("#confirm-btn-ok-"+i).on("click",function(){$(this).off("click");s(true)});$("#confirm-btn-cancel-"+i).on("click",function(){$(this).off("click");s(false)})}var nsConfirm=nsconfirm;