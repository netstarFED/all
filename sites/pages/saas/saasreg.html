<!--
 * @Description: In User Settings Edit
 * @Author: 祁倩
 * @Date: 2020-2-13 10:30
 * @LastEditTime: 2020-2-13 10:30
 * @LastEditors: Please set LastEditors
 -->
<!--# include file="/sites/docs/include/homepage-html-dev-1.html" -->
<script src="https://qa.wangxingcloud.com/static/libs/axios.min.js"></script>
<container>
    <div class="pt-main">
        <div class="pt-container">
            <div id="netstar-saas-reg-btns"></div>
            <div class="pt-main-row" id="saasreg">
                <!-- left -->
                <div class="pt-main-col">
                    <!-- 用户照片 -->
                    <div class="pt-panel">
                        <div class="user-photo">
                            <img src="../static/images/user-photo.jpg" alt="">
                        </div>
                        <div class="user-photo-eidt">
                            <div class="pt-btn-group">
                                <button class="pt-btn pt-btn-default">
                                    <i class="icon icon-image"></i>
                                </button>
                                <button class="pt-btn pt-btn-default">
                                    <i class="icon icon-id"></i>
                                </button>
                                <button class="pt-btn pt-btn-default">
                                    <i class="icon icon-camera"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- 用户照片 end-->
                    <!-- 排队 -->
                    <div class="pt-panel">
                        <div class="queue">
                            <div class="list">
                                <a class="list-item" href="#">
                                    <i class="fa fa-venus"></i>
                                    <span>王晓霖</span>
                                    <div class="list-after">
                                        <i class="icon icon-arrow-top-o"></i>
                                    </div>
                                </a>
                                <a class="list-item" href="#">
                                    <i class="fa fa-mars"></i>
                                    <span>张文远</span>
                                    <div class="list-after">
                                        <i class="icon icon-user"></i>
                                    </div>
                                </a>
                                <a class="list-item" href="#">
                                    <i class="fa fa-mars"></i>
                                    <span>宋文涛</span>
                                    <div class="list-after">
                                        <i class="icon icon-arrow-down-o"></i>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                    <!-- 排队 end -->
                    <!-- 报价单 -->
                    <div class="pt-panel">
                        <!-- 报价单 类型-->
                        <!--  <div class="price-block">
                                <div class="price-block-header">
                                    <span class="price-type price-type-public" :class = ""
                        >公费</span>
                                    <span></span>
                                </div>
                                <div class="price-block-body">
                                    <ul>
                                        <li>
                                            <label for="">标准价格：</label>
                                            <span>￥99.00</span>
                                        </li>
                                        <li>
                                            <label for="">优惠券：</label>
                                            <span>￥99.00</span>
                                        </li>
                                        <li>
                                            <label for="">实收金额：</label>
                                            <span><b>￥99.00</b></span>
                                        </li>
                                    </ul>
                                </div>
                            </div> -->
                        <!-- 报价单 已付款-->
                        <div class="price-block" v-for="item in regPricingVOList" :class="{'price-paid':isChargeStyle}">
                            <div class="price-block-header">
                                <span class="price-type"
                                    :class="{'price-type-public':isPublicExpense,'price-type-own':isOwnExpenseStyle}">{{item.isOwnExpense}}</span>
                                <span>{{item.pricingCode}}</span>
                            </div>
                            <div class="price-block-body">
                                <ul>
                                    <li>
                                        <label for="">标准价格：</label>
                                        <span>{{item.standardAmount}}</span>
                                    </li>
                                    <li>
                                        <label for="">优惠券：</label>
                                        <span>{{item.discountAmount}}</span>
                                    </li>
                                    <li>
                                        <label for="">实收金额：</label>
                                        <span><b>{{item.amount}}</b></span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- 报价单 end -->
                    <!-- 优惠券 -->
                    <div class="pt-panel">
                        <div class="card-group">
                            <div class="card-list">
                                <div class="card">
                                    <div class="card-before">
                                        <span>优惠券</span>
                                    </div>
                                    <div class="card-body">
                                        <div class="card-content">
                                            <div class="card-title">
                                                <h4>￥100</h4>
                                            </div>
                                            <div class="card-text">
                                                2020年6月30日
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-after">
                                        <button class="pt-btn pt-btn-default">
                                            <span>去使用</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="card-list">
                                <div class="card card-checked">
                                    <div class="card-before">
                                        <span>优惠券</span>
                                    </div>
                                    <div class="card-body">
                                        <div class="card-content">
                                            <div class="card-title">
                                                <h4>￥100</h4>
                                            </div>
                                            <div class="card-text">
                                                2020年6月30日
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-after">
                                        <i class="icon icon-check-circle"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 优惠券 end-->
                </div>
                <!-- center -->
                <div class="pt-main-col">
                    <div class="pt-panel" id="saas-regvo-top">
                        <div class="pt-panel-header" id="saas-regvo-top">
                            <div class="title">体检登记</div>
                            <div class="pt-panel-header-right">
                                <span>预约时间：{{time}}</span>
                                <span>订单编号：{{orderNo}}</span>
                                <div class="switch">
                                    <div class="switch-item" v-on:click="btnCutaways"
                                        :class="{'current': isbtnCutaways==0}">
                                        <span>个人</span>
                                    </div>
                                    <div class="switch-item" v-on:click="btnCutawaysBack"
                                        :class="{'current': isbtnCutaways==1}">
                                        <span>单位</span>
                                    </div>
                                </div>
                                <div class="checkbox-box" v-on:click="btnChecked" :class="{'checked': ischecked==true}">
                                    <span>预约</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="netstar-saas-reg-vo"></div>
                    <!-- 图片上传 -->
                </div>
                <div class="pt-main-col">
                    <!-- 体检项目 -->
                    <div class="pt-panel">
                        <div class="pt-panel-header">
                            <div class="pt-btn-group">
                                <button class="pt-btn pt-btn-default pt-btn-icon" onclick="javascript:addCombo()"
                                    id="netstar-saas-reg-addCombo-dialog">
                                    <i class="icon icon-add"></i>
                                </button>
                                <button class="pt-btn pt-btn-default">
                                    <span>清空</span>
                                </button>
                                <button class="pt-btn pt-btn-default">
                                    <span>计算价格</span>
                                </button>
                                <button class="pt-btn pt-btn-default">
                                    <span>项目详情</span>
                                </button>
                            </div>
                            <div class="badge">
                                <span>项目数量</span>
                                <span class="pt-badge pt-badge-warning">
                                    25
                                </span>
                            </div>
                        </div>
                        <div class="pt-panel-body">
                            <div class="block-list block-list-vertical">
                                <div class="block-list-group">
                                    <div class="block-list-item ">
                                        <div class="block-list-content">
                                            <div class="list-body">
                                                <div class="list-title">
                                                    <span>胸透</span>
                                                </div>
                                                <div class="list-text">
                                                    <span>￥400</span>
                                                    <span class="text-through">￥300</span>
                                                </div>

                                            </div>
                                            <div class="block-list-control">
                                                <div class="pt-btn-group">
                                                    <button class="pt-btn pt-btn-default pt-btn-icon">
                                                        <i class="icon">
                                                            自
                                                        </i>
                                                    </button>
                                                    <button class="pt-btn pt-btn-default pt-btn-icon">
                                                        <i class="icon icon-trash-o"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="price-type-mark">
                                                自
                                            </div>
                                            <div class="program-addon-mark">
                                                +
                                            </div>
                                        </div>
                                    </div>
                                    <div class="block-list-item checked">
                                        <div class="block-list-content">
                                            <div class="list-body">
                                                <div class="list-title">
                                                    <span>胸透</span>
                                                </div>
                                                <div class="list-text">
                                                    <span>￥400</span>
                                                    <span class="text-through">￥300</span>
                                                </div>

                                            </div>
                                            <div class="block-list-control">
                                                <div class="pt-btn-group">
                                                    <button class="pt-btn pt-btn-default pt-btn-icon">
                                                        <i class="icon">
                                                            自
                                                        </i>
                                                    </button>
                                                    <button class="pt-btn pt-btn-default pt-btn-icon">
                                                        <i class="icon icon-trash-o"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="price-type-mark">
                                                自
                                            </div>
                                            <div class="program-addon-mark">
                                                +
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 体检项目 end-->
                </div>
            </div>
        </div>
    </div>
    <script>
     var saasReg =   new Vue({
            el: '#saasreg',
            data: {
                time: '2020年2月18日', //预约时间
                orderNo: "20202187968545265", //订单编号
                isbtnCutaways: 0, //个人单位切换
                ischecked: true, //预约勾选
                isOwnExpense: true,
                isChargeStyle: true, //是否已收费样式
                isOwnExpenseStyle: false, //自费样式--
                isPublicExpense: true, //公费样式
                regPricingVOList: [ //划价单vo
                    /*{
                          isOwnExpense:'自费',//缴费类型
                          pricingCode:'20200325354688',//编号
                          standardAmount:'',//标准价格
                          discountAmount:'',//优惠券
                          amount:''//实收金额
                      },*/
                ],
                regCouponVOList: [//登记使用优惠券
                    /*{
                        "couponType": "银行卡",//券类型  number
                        "parValue": 100, //面值   number
                    } */

                ] ,

                addComboVOList:[//登记添加项目VO集合

                ]


            },
            methods: {
                //体检登记  单位个人切换
                btnCutaways: function () {
                    var _this = this;
                    console.log(_this)
                    _this.isbtnCutaways = 0
                },
                btnCutawaysBack: function () {
                    var _this = this;
                    _this.isbtnCutaways = 1
                },
                //体检登记 预约勾选
                btnChecked: function () {
                    var _this = this;
                    console.log(_this);
                    if (_this.ischecked) {
                        _this.ischecked = false;
                    } else {
                        _this.ischecked = true;
                    }
                },

            },
            mounted() {
                var _this = this;
                axios.get('/sites/pages/saas//getById.json').then(function (data) {
                    /* debugger; */
                    console.log(data.data.data)
                    var data = data.data.data;
                    var regPricingVOList = data.regPricingVOList; //划价单vo
                    var regCouponVOList = data.regCouponVOList; //登记使用优惠券
                    //划价单vo数据处理 isOwnExpense/0/公费  1/自费
                    /* --是否付费处理 */
                    for (var regPricingI = 0; regPricingI < regPricingVOList.length; regPricingI++) {
                        if (regPricingVOList[regPricingI].isOwnExpense == 1) {
                            regPricingVOList[regPricingI].isOwnExpense = "自费"
                        }
                        if (regPricingVOList[regPricingI].isOwnExpense == 0) {
                            regPricingVOList[regPricingI].isOwnExpense = "公费"
                        }
                    }
                    _this.regPricingVOList = regPricingVOList;
                    _this.regCouponVOList = regCouponVOList;

                }).catch(function (error) {

                })
            }

        })


        var getRootPath = function () {
            return 'https://qaapi.wangxingcloud.com/'
        };
        var regId = {
            btns: 'netstar-saas-reg-btns',
            voId: "netstar-saas-reg-vo",
            pricingBlockListId: "netstar-saas-reg-pricing-BlockList",
            hazardBlockListId: "netstar-saas-reg-hazard-BlockList",
            regcomboBlocklistId: 'netstar-saas-reg-regcombo-BlockList',
            regcombobtns: 'netstar-saas-reg-regcombobtns',
            regVoTop: 'netstar-saas-reg-vo-top',
            addComboDialogId: 'netstar-saas-reg-addCombo-dialog' //添加项目弹框Id
        }
        //体检登记vo
        var configs = {
            /* 按钮组 */
            regBtns: {
                id: regId.btns,
                btns: [{
                        text: '提交',
                        handler: function (data) {

                        }
                    },
                    {
                        text: '新增',
                        handler: function () {

                        }
                    },
                    {
                        text: '打印',
                        handler: function () {

                        }
                    },
                    {
                        text: '保存',
                        handler: function () {
                            var ajaxConfig = {
                                url: getRootPath + '/reg/regs/save',
                                contentType: '',
                            }
                            NetStarUtils.ajax(ajaxConfig, function () {

                            })
                        }
                    },
                    {
                        text: '预览',
                        handler: function () {

                        }
                    },
                    {
                        text: '保存草稿',
                        handler: function () {

                        }
                    },
                    {
                        text: '草稿箱',
                        handler: function () {

                        }
                    },
                    {
                        text: '流程查看',
                        handler: function () {

                        }
                    },
                    {
                        text: '撤回',
                        handler: function () {

                        }
                    },
                    {
                        text: '回退',
                        handler: function () {

                        }
                    },
                    {
                        text: '历史记录',
                        handler: function () {

                        }
                    }
                ]
            },
            // 项目按钮
            regcombobtns: {
                id: regId.regcombobtns,
                btns: [{
                        text: '清空',
                        handler: function () {

                        }
                    },
                    {
                        text: '计算项目',
                        handler: function () {

                        }
                    },
                    {
                        text: '查看详情',
                        handler: function () {

                        }
                    }
                ]
            },
            //体检登记vo
            regVo: {
                id: regId.voId,
                defaultComponentWidth: "33%",
                isSetMore: false,
                form: [{
                        id: "regCode",
                        label: '体检编号',
                        type: 'text'
                    },
                    {
                        id: 'peTypeId',
                        type: 'select',
                        label: '体检类别',
                        url: getRootPath() + '/npebase/datPeClasss/getList',
                        contentType: '',
                        mentod: 'POST',
                        dataSrc: 'rows',
                        valueField: 'id',
                        textField: 'name',
                    },
                    {
                        id: "idNo",
                        label: '证件类别',
                        type: 'select',
                        valueField: 'id',
                        textField: "name",
                        subdata: [{
                                id: '0',
                                name: '省份证'
                            },
                            {
                                id: '1',
                                name: '护照'
                            }
                        ]
                    },
                    {
                        id: "regName",
                        label: '姓名',
                        type: 'text',
                    },
                    {
                        id: "age",
                        label: '年龄',
                        type: 'text',
                    },
                    {
                        id: "regRegVO",
                        label: '出生日期',
                        type: 'date',
                    },
                    {
                        id: "sex",
                        label: '性别',
                        type: 'radio',
                        subdata: [{
                                id: '1',
                                name: '男'
                            },
                            {
                                id: '2',
                                name: '女'
                            }
                        ],
                        valueField: "id",
                        textField: 'name'
                    },
                    {
                        id: 'phoneNo',
                        type: 'text',
                        label: '手机号'
                    },
                    {
                        id: 'grade',
                        type: 'text',
                        label: '文化程度',
                        dictArguments: "grade",
                        type: 'select',
                        textField: '',
                        valueField: ''
                    },
                    {
                        id: 'nativePlace',
                        type: 'text',
                        label: '籍贯',
                        textField: '',
                        valueField: ''
                    },
                    {
                        id: 'address',
                        type: 'text',
                        label: '家庭住址'
                    },
                    {
                        id: 'nation',
                        type: 'text',
                        label: '民族',
                        dictArguments: "nation",
                        type: 'select',
                        textField: 'value',
                        valueField: 'id'
                    },
                    {
                        id: 'marriage',
                        label: '婚姻状态',
                        dictArguments: "marriage",
                        type: 'select',
                        textField: 'value',
                        valueField: 'id'
                    },
                    {
                        id: 'customerName',
                        type: 'text',
                        label: '工作单位'
                    },
                    {
                        id: 'customerDeptName',
                        type: 'text',
                        label: '车间部门',
                    },
                    {
                        id: 'empNo',
                        type: 'text',
                        label: '工号',

                    },
                    {
                        id: 'workTypeName',
                        type: 'select',
                        label: '工种',
                        url: getRootPath() + '/pfdCustomerWorks/getList',
                        contentType: '',
                        mentod: 'POST',
                        dataSrc: 'rows',
                        valueField: 'id',
                        textField: 'workName',

                    },
                    {
                        id: 'customerBatchId',
                        type: 'text',
                        label: '合同批次'
                    },
                    {
                        id: 'whenEntry',
                        type: 'date',
                        label: '入场日期'
                    },
                    {
                        id: 'workYears',
                        type: 'text',
                        label: '总工龄'
                    },
                    {
                        id: 'hazardYears',
                        type: 'text',
                        label: '接害工龄'
                    },
                    {
                        id: 'ocpcId',
                        type: 'select',
                        label: '监护种类',
                        url: getRootPath() + '/npebase/occTutelages/getList',
                        contentType: '',
                        mentod: 'POST',
                        dataSrc: 'rows',
                        valueField: 'id',
                        textField: 'tutelageName'

                    },
                    {
                        id: 'ss',
                        type: 'select',
                        label: '危害',
                        url: getRootPath() + '/npebase/occHazards/getList',
                        contentType: '',
                        mentod: 'POST',
                        dataSrc: 'rows',
                        valueField: 'id',
                        textField: 'hazardName'
                    }
                ]
            },
            /* 优惠券 */
            pricingBlockList: {
                id: regId.pricingBlockListId,
                type: 'blockList',
                data: {
                    idField: "id",
                    dataSource: [{

                    }]
                },
                columns: [{
                        field: 'pricingCode',
                        title: '编号'
                    },
                    {
                        field: 'standardAmount',
                        title: '标准价格',
                        columnType: "money",
                        editConfig: {
                            type: "number",
                        },
                        formatHandler: {
                            type: 'money',
                            data: {
                                format: {
                                    places: "2"
                                }
                            }
                        }
                    },
                    {
                        field: 'discountAmount',
                        title: '优惠券'
                    },
                    {
                        field: 'amount',
                        title: '实收金额',
                        columnType: "money",
                        editConfig: {
                            type: "number",
                        },
                        formatHandler: {
                            type: 'money',
                            data: {
                                format: {
                                    places: "2"
                                }
                            }
                        }
                    }
                ],
                ui: {
                    listExpression: "<div>{{pricingCode}}</div><div><span>标准价格：{{standardAmount}}</span></div><div><span>标准价格：{{standardAmount}}</span></div>",
                    height: 200,
                    isOpenQuery: true,
                }
            },
            /* 职业危害因素 */
            hazardBlockList: {
                id: regId.hazardBlockListId,
                type: "blockList",
                data: {
                    idField: "id",
                    dataSource: [{
                            hazardName: "噪音",
                            ocpcName: "在岗期间"
                        },
                        {
                            hazardName: "噪音",
                            ocpcName: "在岗期间"
                        },
                        {
                            hazardName: "噪音",
                            ocpcName: "在岗期间"
                        },
                        {
                            hazardName: "噪音",
                            ocpcName: "在岗期间"
                        },
                        {
                            hazardName: "噪音",
                            ocpcName: "在岗期间"
                        },
                        {
                            hazardName: "噪音",
                            ocpcName: "在岗期间"
                        },
                        {
                            hazardName: "噪音",
                            ocpcName: "在岗期间"
                        }
                    ]
                },
                columns: [{
                        field: 'hazardName',
                        title: '职业危害'
                    },
                    {
                        field: 'ocpcName',
                        title: '监护种类名称'
                    }
                ],
                ui: {
                    height: 200,
                    listExpression: '<div>{{hazardName}}</div>'
                }
            },
            /* 项目 */
            regcomboBlocklist: {
                id: regId.regcomboBlocklistId,
                type: "blockList",
                data: {
                    idField: "id",
                    dataSource: [{
                            comboName: "噪音",
                            standardAmount: "500"
                        },
                        {
                            comboName: "噪音",
                            standardAmount: ""
                        },
                        {
                            comboName: "噪音",
                            standardAmount: "在岗期间"
                        },
                        {
                            comboName: "噪音",
                            standardAmount: "在岗期间"
                        },
                        {
                            comboName: "噪音",
                            standardAmount: "在岗期间"
                        },
                        {
                            comboName: "噪音",
                            standardAmount: "在岗期间"
                        },
                        {
                            comboName: "噪音",
                            standardAmount: "在岗期间"
                        }
                    ]
                },
                columns: [{
                        field: 'comboName',
                        title: '噪音'
                    },
                    {
                        field: 'standardAmount',
                        title: '标准金额',
                        columnType: "money",
                        editConfig: {
                            type: "number",
                        },
                        formatHandler: {
                            type: 'money',
                            data: {
                                format: {
                                    places: "2"
                                }
                            }
                        }
                    }
                ],
                ui: {
                    height: 200,
                    listExpression: '<div>{{comboName}}<span> {{standardAmount}}</span></div>'
                }
            },
        };

        //添加项目弹框
        var addCombo = function () {
            var addComboDialog = {
                id: regId.addComboDialogId,
                templateName: 'PC',
                height: '80%',
                width: '80%',
                title: '添加项目',
                shownHandler: function (data) {
                    var dialogBodyId = data.config.bodyId;
                    var footerBodyId = data.config.footerId;
                    $('#' + dialogBodyId).html(
                    '<div class="pt-tab-header">\
                        <div class="pt-nav">\
                            <ul class="pt-tab-list-components-tabs">\
                                <li id="tab-propertyList" class="component-list pt-nav-item current" ns-name="unitList">\
                                    <a id="tab-color" href="javascript:void(0);">单位套餐 </a>\
                                </li>\
                                <li id="tab-processorList" class="component-list pt-nav-item" ns-name="regList">\
                                    <a id="tab-color-2" href="javascript:void(0);" hidden> 体检套餐 </a>\
                                </li>\
                                <li id="tab-processorList" class="component-list pt-nav-item" ns-name="itemList">\
                                    <a id="tab-color-2" href="javascript:void(0);" hidden> 体检项目</a>\
                                </li>\
                            </ul>\
                        </div>\
                    </div>\
                    <div id="netstar-saas-addcombo"></div>' 
                    );
                    $('#' + footerBodyId).html(
                        '<div id="netstar-saas-addcombo-btns"></div>');
                    //项目
                    var itemList = {
                        id: 'netstar-saas-addcombo',
                        data:{
                            idField:'id',
                            src:getRootPath() + '/npebase/datCombos/getList',
                            contentType:'application/json',
                            mentod:'GET',
                            dataSrc:'rows',
                            data:{},
                        },
                        columns:[
                            {
                                field:'itemClassId',
                                title:'项目类别',
                            },
                            {
                                field:'comboName',
                                title:'组合项目',
                            },
                            {//number
                                field:'comboPrice',
                                title:'标准金额',

                            }
                        ],
                        ui:{
                            isCheckSelect:true,
                            isOpenQuery:true,
                            height:500   
                        }
                    };
                    var regList = {
                        id: 'netstar-saas-addcombo',
                        data:{
                            idField:'id',
                            src:getRootPath() + '/npebase/datPackages/getList',
                            contentType:'application/json',
                            mentod:'GET',
                            data:{},
                        },
                        columns:[
                            {
                                field:'itemType',
                                title:'体检项目',
                            },
                            {
                                field:'itemType',
                                title:'套餐名称',
                            },
                            {
                                field:'itemType',
                                title:'标准金额',
                            },
                            {
                                field:'itemType',
                                title:'优惠金额',
                            },
                            {
                                field:'itemType',
                                title:'应收金额',
                            },
                            {
                                field:'itemType',
                                title:'折扣率',
                            }
                        ],
                        ui:{
                            isOpenQuery:true,   
                        }
                    };
                    var unitList = {
                        id: 'netstar-saas-addcombo',
                        data:{
                            idField:'id',
                            src:getRootPath() + '/npebase/datPackages/getList',
                            contentType:'application/json',
                            mentod:'GET',
                            data:{},
                        },
                        columns:[
                            {
                                field:'itemType',
                                title:'体检项目',
                            },
                            {
                                field:'itemType',
                                title:'套餐名称',
                            },
                            {
                                field:'itemType',
                                title:'标准金额',
                            },
                            {
                                field:'itemType',
                                title:'优惠金额',
                            },
                            {
                                field:'itemType',
                                title:'应收金额',
                            },
                            {
                                field:'itemType',
                                title:'折扣率',
                            }
                        ],
                        ui:{
                            isOpenQuery:true,
                            height:500  
                        }
                    }
                    NetStarGrid.init(unitList);
                    var dialogDataManage = {
                        currentName : 'unitList',
                        data : {},
                        table : {
                            itemList : itemList,
                            regList : regList,
                            unitList : unitList,
                        }
                    };
                    // NetStarGrid.init(unitList);
                    // NetStarGrid.init(regList);
                    // 添加tab事件
                    var $lis = $('#' + dialogBodyId).find('li');
                    $lis.off('click');
                    $lis.on('click', function(ev){
                        var $this = $(this);
                        // 记录数据
                        dialogDataManage.data[dialogDataManage.currentName] = NetStarGrid.getCheckedData('netstar-saas-addcombo');
                        // 切换tab
                        $lis.removeClass('current');
                        $this.addClass('current');
                        dialogDataManage.currentName = $this.attr('ns-name');
                        // 切换table
                        var gridConfig = dialogDataManage.table[dialogDataManage.currentName];
                        // 设置默认值
                        NetStarGrid.init(gridConfig);
                    });
                    var addComboBtns = {
                        id:'netstar-saas-addcombo-btns',
                        btns:[
                            {
                                text:'确认',
                                handler:function(){
                                    var checkedData = NetStarGrid.getCheckedData('netstar-saas-addcombo');
                                    var comboIds=''
                                    for(var i = 0;i<checkedData.length;i++){
                                        comboIds += checkedData[i].id + ','
                                    }
                                    var ajaxConfig ={
                                        url:getRootPath() + 'reg/combos/addCombo',
                                        contentType:'application/x-www-form-urlencoded',
                                        type:'POST',
                                        data:{
                                            comboIds:comboIds
                                        }
                                    }
                                    NetStarUtils.ajax(ajaxConfig,function(res){
                                        if(res.success){
                                            nsalert('保存成功');
                                            //获取项目数据
                                            saasReg.data.addComboVOList = res.rows
                                        }
                                    })
                                }
                            },
                            {
                                text:'关闭',
                                handler:function(){

                                }
                            }
                        ]
                    }
                   
                    vueButtonComponent.init(addComboBtns);
                }
               
            };
            NetstarComponent.dialogComponent.init(addComboDialog)
        }

        function init() {
            NetstarComponent.formComponent.show(configs.regVo);
            // NetstarBlockList.init(configs.pricingBlockList);
            // NetstarBlockList.init(configs.hazardBlockList);
            // NetstarBlockList.init(configs.regcomboBlocklist);
            vueButtonComponent.init(configs.regBtns);
            height:500

            /* vueButtonComponent.init(configs.regcombobtns) */
        }
        init();
    </script>
</container>
</body>

</html>